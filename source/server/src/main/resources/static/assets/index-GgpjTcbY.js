var Zd=Object.defineProperty;var qd=(l,s,c)=>s in l?Zd(l,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[s]=c;var mn=(l,s,c)=>qd(l,typeof s!="symbol"?s+"":s,c);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const m of y.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&f(m)}).observe(document,{childList:!0,subtree:!0});function c(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function f(d){if(d.ep)return;d.ep=!0;const y=c(d);fetch(d.href,y)}})();function bd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ho={exports:{}},Yr={},Qo={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya;function ef(){if(Ya)return Te;Ya=1;var l=Symbol.for("react.element"),s=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),m=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),C=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=C&&T[C]||T["@@iterator"],typeof T=="function"?T:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,S={};function D(T,K,me){this.props=T,this.context=K,this.refs=S,this.updater=me||R}D.prototype.isReactComponent={},D.prototype.setState=function(T,K){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,K,"setState")},D.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function $(){}$.prototype=D.prototype;function Z(T,K,me){this.props=T,this.context=K,this.refs=S,this.updater=me||R}var V=Z.prototype=new $;V.constructor=Z,Q(V,D.prototype),V.isPureReactComponent=!0;var M=Array.isArray,q=Object.prototype.hasOwnProperty,W={current:null},h={key:!0,ref:!0,__self:!0,__source:!0};function x(T,K,me){var ge,Se={},Ne=null,ee=null;if(K!=null)for(ge in K.ref!==void 0&&(ee=K.ref),K.key!==void 0&&(Ne=""+K.key),K)q.call(K,ge)&&!h.hasOwnProperty(ge)&&(Se[ge]=K[ge]);var ye=arguments.length-2;if(ye===1)Se.children=me;else if(1<ye){for(var Ce=Array(ye),Ae=0;Ae<ye;Ae++)Ce[Ae]=arguments[Ae+2];Se.children=Ce}if(T&&T.defaultProps)for(ge in ye=T.defaultProps,ye)Se[ge]===void 0&&(Se[ge]=ye[ge]);return{$$typeof:l,type:T,key:Ne,ref:ee,props:Se,_owner:W.current}}function O(T,K){return{$$typeof:l,type:T.type,key:K,ref:T.ref,props:T.props,_owner:T._owner}}function F(T){return typeof T=="object"&&T!==null&&T.$$typeof===l}function z(T){var K={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(me){return K[me]})}var I=/\/+/g;function H(T,K){return typeof T=="object"&&T!==null&&T.key!=null?z(""+T.key):K.toString(36)}function w(T,K,me,ge,Se){var Ne=typeof T;(Ne==="undefined"||Ne==="boolean")&&(T=null);var ee=!1;if(T===null)ee=!0;else switch(Ne){case"string":case"number":ee=!0;break;case"object":switch(T.$$typeof){case l:case s:ee=!0}}if(ee)return ee=T,Se=Se(ee),T=ge===""?"."+H(ee,0):ge,M(Se)?(me="",T!=null&&(me=T.replace(I,"$&/")+"/"),w(Se,K,me,"",function(Ae){return Ae})):Se!=null&&(F(Se)&&(Se=O(Se,me+(!Se.key||ee&&ee.key===Se.key?"":(""+Se.key).replace(I,"$&/")+"/")+T)),K.push(Se)),1;if(ee=0,ge=ge===""?".":ge+":",M(T))for(var ye=0;ye<T.length;ye++){Ne=T[ye];var Ce=ge+H(Ne,ye);ee+=w(Ne,K,me,Ce,Se)}else if(Ce=k(T),typeof Ce=="function")for(T=Ce.call(T),ye=0;!(Ne=T.next()).done;)Ne=Ne.value,Ce=ge+H(Ne,ye++),ee+=w(Ne,K,me,Ce,Se);else if(Ne==="object")throw K=String(T),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ee}function Y(T,K,me){if(T==null)return T;var ge=[],Se=0;return w(T,ge,"","",function(Ne){return K.call(me,Ne,Se++)}),ge}function b(T){if(T._status===-1){var K=T._result;K=K(),K.then(function(me){(T._status===0||T._status===-1)&&(T._status=1,T._result=me)},function(me){(T._status===0||T._status===-1)&&(T._status=2,T._result=me)}),T._status===-1&&(T._status=0,T._result=K)}if(T._status===1)return T._result.default;throw T._result}var _={current:null},A={transition:null},J={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:A,ReactCurrentOwner:W};function G(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Y,forEach:function(T,K,me){Y(T,function(){K.apply(this,arguments)},me)},count:function(T){var K=0;return Y(T,function(){K++}),K},toArray:function(T){return Y(T,function(K){return K})||[]},only:function(T){if(!F(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Te.Component=D,Te.Fragment=c,Te.Profiler=d,Te.PureComponent=Z,Te.StrictMode=f,Te.Suspense=v,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Te.act=G,Te.cloneElement=function(T,K,me){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ge=Q({},T.props),Se=T.key,Ne=T.ref,ee=T._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,ee=W.current),K.key!==void 0&&(Se=""+K.key),T.type&&T.type.defaultProps)var ye=T.type.defaultProps;for(Ce in K)q.call(K,Ce)&&!h.hasOwnProperty(Ce)&&(ge[Ce]=K[Ce]===void 0&&ye!==void 0?ye[Ce]:K[Ce])}var Ce=arguments.length-2;if(Ce===1)ge.children=me;else if(1<Ce){ye=Array(Ce);for(var Ae=0;Ae<Ce;Ae++)ye[Ae]=arguments[Ae+2];ge.children=ye}return{$$typeof:l,type:T.type,key:Se,ref:Ne,props:ge,_owner:ee}},Te.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:y,_context:T},T.Consumer=T},Te.createElement=x,Te.createFactory=function(T){var K=x.bind(null,T);return K.type=T,K},Te.createRef=function(){return{current:null}},Te.forwardRef=function(T){return{$$typeof:E,render:T}},Te.isValidElement=F,Te.lazy=function(T){return{$$typeof:U,_payload:{_status:-1,_result:T},_init:b}},Te.memo=function(T,K){return{$$typeof:j,type:T,compare:K===void 0?null:K}},Te.startTransition=function(T){var K=A.transition;A.transition={};try{T()}finally{A.transition=K}},Te.unstable_act=G,Te.useCallback=function(T,K){return _.current.useCallback(T,K)},Te.useContext=function(T){return _.current.useContext(T)},Te.useDebugValue=function(){},Te.useDeferredValue=function(T){return _.current.useDeferredValue(T)},Te.useEffect=function(T,K){return _.current.useEffect(T,K)},Te.useId=function(){return _.current.useId()},Te.useImperativeHandle=function(T,K,me){return _.current.useImperativeHandle(T,K,me)},Te.useInsertionEffect=function(T,K){return _.current.useInsertionEffect(T,K)},Te.useLayoutEffect=function(T,K){return _.current.useLayoutEffect(T,K)},Te.useMemo=function(T,K){return _.current.useMemo(T,K)},Te.useReducer=function(T,K,me){return _.current.useReducer(T,K,me)},Te.useRef=function(T){return _.current.useRef(T)},Te.useState=function(T){return _.current.useState(T)},Te.useSyncExternalStore=function(T,K,me){return _.current.useSyncExternalStore(T,K,me)},Te.useTransition=function(){return _.current.useTransition()},Te.version="18.3.1",Te}var Xa;function os(){return Xa||(Xa=1,Qo.exports=ef()),Qo.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha;function tf(){if(Ha)return Yr;Ha=1;var l=os(),s=Symbol.for("react.element"),c=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,d=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function m(E,v,j){var U,C={},k=null,R=null;j!==void 0&&(k=""+j),v.key!==void 0&&(k=""+v.key),v.ref!==void 0&&(R=v.ref);for(U in v)f.call(v,U)&&!y.hasOwnProperty(U)&&(C[U]=v[U]);if(E&&E.defaultProps)for(U in v=E.defaultProps,v)C[U]===void 0&&(C[U]=v[U]);return{$$typeof:s,type:E,key:k,ref:R,props:C,_owner:d.current}}return Yr.Fragment=c,Yr.jsx=m,Yr.jsxs=m,Yr}var Qa;function nf(){return Qa||(Qa=1,Ho.exports=tf()),Ho.exports}var a=nf(),g=os();const rr=bd(g);var ti={},Jo={exports:{}},pt={},Go={exports:{}},Ko={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja;function rf(){return Ja||(Ja=1,function(l){function s(A,J){var G=A.length;A.push(J);e:for(;0<G;){var T=G-1>>>1,K=A[T];if(0<d(K,J))A[T]=J,A[G]=K,G=T;else break e}}function c(A){return A.length===0?null:A[0]}function f(A){if(A.length===0)return null;var J=A[0],G=A.pop();if(G!==J){A[0]=G;e:for(var T=0,K=A.length,me=K>>>1;T<me;){var ge=2*(T+1)-1,Se=A[ge],Ne=ge+1,ee=A[Ne];if(0>d(Se,G))Ne<K&&0>d(ee,Se)?(A[T]=ee,A[Ne]=G,T=Ne):(A[T]=Se,A[ge]=G,T=ge);else if(Ne<K&&0>d(ee,G))A[T]=ee,A[Ne]=G,T=Ne;else break e}}return J}function d(A,J){var G=A.sortIndex-J.sortIndex;return G!==0?G:A.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;l.unstable_now=function(){return y.now()}}else{var m=Date,E=m.now();l.unstable_now=function(){return m.now()-E}}var v=[],j=[],U=1,C=null,k=3,R=!1,Q=!1,S=!1,D=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(A){for(var J=c(j);J!==null;){if(J.callback===null)f(j);else if(J.startTime<=A)f(j),J.sortIndex=J.expirationTime,s(v,J);else break;J=c(j)}}function M(A){if(S=!1,V(A),!Q)if(c(v)!==null)Q=!0,b(q);else{var J=c(j);J!==null&&_(M,J.startTime-A)}}function q(A,J){Q=!1,S&&(S=!1,$(x),x=-1),R=!0;var G=k;try{for(V(J),C=c(v);C!==null&&(!(C.expirationTime>J)||A&&!z());){var T=C.callback;if(typeof T=="function"){C.callback=null,k=C.priorityLevel;var K=T(C.expirationTime<=J);J=l.unstable_now(),typeof K=="function"?C.callback=K:C===c(v)&&f(v),V(J)}else f(v);C=c(v)}if(C!==null)var me=!0;else{var ge=c(j);ge!==null&&_(M,ge.startTime-J),me=!1}return me}finally{C=null,k=G,R=!1}}var W=!1,h=null,x=-1,O=5,F=-1;function z(){return!(l.unstable_now()-F<O)}function I(){if(h!==null){var A=l.unstable_now();F=A;var J=!0;try{J=h(!0,A)}finally{J?H():(W=!1,h=null)}}else W=!1}var H;if(typeof Z=="function")H=function(){Z(I)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Y=w.port2;w.port1.onmessage=I,H=function(){Y.postMessage(null)}}else H=function(){D(I,0)};function b(A){h=A,W||(W=!0,H())}function _(A,J){x=D(function(){A(l.unstable_now())},J)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(A){A.callback=null},l.unstable_continueExecution=function(){Q||R||(Q=!0,b(q))},l.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_getFirstCallbackNode=function(){return c(v)},l.unstable_next=function(A){switch(k){case 1:case 2:case 3:var J=3;break;default:J=k}var G=k;k=J;try{return A()}finally{k=G}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(A,J){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var G=k;k=A;try{return J()}finally{k=G}},l.unstable_scheduleCallback=function(A,J,G){var T=l.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,A){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,A={id:U++,callback:J,priorityLevel:A,startTime:G,expirationTime:K,sortIndex:-1},G>T?(A.sortIndex=G,s(j,A),c(v)===null&&A===c(j)&&(S?($(x),x=-1):S=!0,_(M,G-T))):(A.sortIndex=K,s(v,A),Q||R||(Q=!0,b(q))),A},l.unstable_shouldYield=z,l.unstable_wrapCallback=function(A){var J=k;return function(){var G=k;k=J;try{return A.apply(this,arguments)}finally{k=G}}}}(Ko)),Ko}var Ga;function lf(){return Ga||(Ga=1,Go.exports=rf()),Go.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka;function of(){if(Ka)return pt;Ka=1;var l=os(),s=lf();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,d={};function y(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(d[e]=t,e=0;e<t.length;e++)f.add(t[e])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U={},C={};function k(e){return v.call(C,e)?!0:v.call(U,e)?!1:j.test(e)?C[e]=!0:(U[e]=!0,!1)}function R(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q(e,t,n,r){if(t===null||typeof t>"u"||R(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function S(e,t,n,r,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){D[e]=new S(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];D[t]=new S(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){D[e]=new S(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){D[e]=new S(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){D[e]=new S(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){D[e]=new S(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){D[e]=new S(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){D[e]=new S(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){D[e]=new S(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($,Z);D[t]=new S(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($,Z);D[t]=new S(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($,Z);D[t]=new S(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){D[e]=new S(e,1,!1,e.toLowerCase(),null,!1,!1)}),D.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){D[e]=new S(e,1,!1,e.toLowerCase(),null,!0,!0)});function V(e,t,n,r){var i=D.hasOwnProperty(t)?D[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q(t,n,i,r)&&(n=null),r||i===null?k(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var M=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),W=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),A=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,T;function K(e){if(T===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||""}return`
`+T+e}var me=!1;function ge(e,t){if(!e||me)return"";me=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(X){var r=X}Reflect.construct(e,[],t)}else{try{t.call()}catch(X){r=X}e.call(t.prototype)}else{try{throw Error()}catch(X){r=X}e()}}catch(X){if(X&&r&&typeof X.stack=="string"){for(var i=X.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,p=o.length-1;1<=u&&0<=p&&i[u]!==o[p];)p--;for(;1<=u&&0<=p;u--,p--)if(i[u]!==o[p]){if(u!==1||p!==1)do if(u--,p--,0>p||i[u]!==o[p]){var N=`
`+i[u].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=u&&0<=p);break}}}finally{me=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function Se(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=ge(e.type,!1),e;case 11:return e=ge(e.type.render,!1),e;case 1:return e=ge(e.type,!0),e;default:return""}}function Ne(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case h:return"Fragment";case W:return"Portal";case O:return"Profiler";case x:return"StrictMode";case H:return"Suspense";case w:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:Ne(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return Ne(e(t))}catch{}}return null}function ee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=Ce(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qe(e){e._valueTracker||(e._valueTracker=Ae(e))}function st(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ce(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Be(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oe(e,t){var n=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ye(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ue(e,t){t=t.checked,t!=null&&V(e,"checked",t,!1)}function Ee(e,t){ue(e,t);var n=ye(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ve(e,t.type,n):t.hasOwnProperty("defaultValue")&&ve(e,t.type,ye(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ve(e,t,n){(t!=="number"||Be(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $e=Array.isArray;function Oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ft(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function In(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if($e(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function pn(e,t){var n=ye(t.value),r=ye(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _n,Xr=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_n=_n||document.createElement("div"),_n.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_n.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oi=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(e){oi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]})});function Hr(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function Qr(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hr(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var si=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(e,t){if(t){if(si[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function or(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sr=null;function de(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Re=null,ut=null,at=null;function ss(e){if(e=Ar(e)){if(typeof Re!="function")throw Error(c(280));var t=e.stateNode;t&&(t=yl(t),Re(e.stateNode,e.type,t))}}function us(e){ut?at?at.push(e):at=[e]:ut=e}function as(){if(ut){var e=ut,t=at;if(at=ut=null,ss(e),t)for(e=0;e<t.length;e++)ss(t[e])}}function cs(e,t){return e(t)}function ds(){}var ui=!1;function fs(e,t,n){if(ui)return e(t,n);ui=!0;try{return cs(e,t,n)}finally{ui=!1,(ut!==null||at!==null)&&(ds(),as())}}function ur(e,t){var n=e.stateNode;if(n===null)return null;var r=yl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var ai=!1;if(E)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){ai=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{ai=!1}function lc(e,t,n,r,i,o,u,p,N){var X=Array.prototype.slice.call(arguments,3);try{t.apply(n,X)}catch(ne){this.onError(ne)}}var cr=!1,Jr=null,Gr=!1,ci=null,ic={onError:function(e){cr=!0,Jr=e}};function oc(e,t,n,r,i,o,u,p,N){cr=!1,Jr=null,lc.apply(ic,arguments)}function sc(e,t,n,r,i,o,u,p,N){if(oc.apply(this,arguments),cr){if(cr){var X=Jr;cr=!1,Jr=null}else throw Error(c(198));Gr||(Gr=!0,ci=X)}}function wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hs(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ms(e){if(wn(e)!==e)throw Error(c(188))}function uc(e){var t=e.alternate;if(!t){if(t=wn(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ms(i),e;if(o===r)return ms(i),t;o=o.sibling}throw Error(c(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,p=i.child;p;){if(p===n){u=!0,n=i,r=o;break}if(p===r){u=!0,r=i,n=o;break}p=p.sibling}if(!u){for(p=o.child;p;){if(p===n){u=!0,n=o,r=i;break}if(p===r){u=!0,r=o,n=i;break}p=p.sibling}if(!u)throw Error(c(189))}}if(n.alternate!==r)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function ps(e){return e=uc(e),e!==null?ys(e):null}function ys(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ys(e);if(t!==null)return t;e=e.sibling}return null}var gs=s.unstable_scheduleCallback,xs=s.unstable_cancelCallback,ac=s.unstable_shouldYield,cc=s.unstable_requestPaint,Pe=s.unstable_now,dc=s.unstable_getCurrentPriorityLevel,di=s.unstable_ImmediatePriority,ws=s.unstable_UserBlockingPriority,Kr=s.unstable_NormalPriority,fc=s.unstable_LowPriority,vs=s.unstable_IdlePriority,Zr=null,It=null;function hc(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Zr,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:yc,mc=Math.log,pc=Math.LN2;function yc(e){return e>>>=0,e===0?32:31-(mc(e)/pc|0)|0}var qr=64,br=4194304;function dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function el(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,u=n&268435455;if(u!==0){var p=u&~i;p!==0?r=dr(p):(o&=u,o!==0&&(r=dr(o)))}else u=n&~i,u!==0?r=dr(u):o!==0&&(r=dr(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tt(t),i=1<<n,r|=e[n],t&=~i;return r}function gc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Tt(o),p=1<<u,N=i[u];N===-1?((p&n)===0||(p&r)!==0)&&(i[u]=gc(p,t)):N<=t&&(e.expiredLanes|=p),o&=~p}}function fi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ks(){var e=qr;return qr<<=1,(qr&4194240)===0&&(qr=64),e}function hi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=n}function wc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Tt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function mi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Le=0;function Ss(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Es,pi,Cs,Ns,Ts,yi=!1,tl=[],Jt=null,Gt=null,Kt=null,hr=new Map,mr=new Map,Zt=[],vc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function js(e,t){switch(e){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":hr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(t.pointerId)}}function pr(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ar(t),t!==null&&pi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function kc(e,t,n,r,i){switch(t){case"focusin":return Jt=pr(Jt,e,t,n,r,i),!0;case"dragenter":return Gt=pr(Gt,e,t,n,r,i),!0;case"mouseover":return Kt=pr(Kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return hr.set(o,pr(hr.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,mr.set(o,pr(mr.get(o)||null,e,t,n,r,i)),!0}return!1}function Ms(e){var t=vn(e.target);if(t!==null){var n=wn(t);if(n!==null){if(t=n.tag,t===13){if(t=hs(n),t!==null){e.blockedOn=t,Ts(e.priority,function(){Cs(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);sr=r,n.target.dispatchEvent(r),sr=null}else return t=Ar(n),t!==null&&pi(t),e.blockedOn=n,!1;t.shift()}return!0}function As(e,t,n){nl(e)&&n.delete(t)}function Sc(){yi=!1,Jt!==null&&nl(Jt)&&(Jt=null),Gt!==null&&nl(Gt)&&(Gt=null),Kt!==null&&nl(Kt)&&(Kt=null),hr.forEach(As),mr.forEach(As)}function yr(e,t){e.blockedOn===t&&(e.blockedOn=null,yi||(yi=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Sc)))}function gr(e){function t(i){return yr(i,e)}if(0<tl.length){yr(tl[0],e);for(var n=1;n<tl.length;n++){var r=tl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jt!==null&&yr(Jt,e),Gt!==null&&yr(Gt,e),Kt!==null&&yr(Kt,e),hr.forEach(t),mr.forEach(t),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Ms(n),n.blockedOn===null&&Zt.shift()}var zn=M.ReactCurrentBatchConfig,rl=!0;function Ec(e,t,n,r){var i=Le,o=zn.transition;zn.transition=null;try{Le=1,gi(e,t,n,r)}finally{Le=i,zn.transition=o}}function Cc(e,t,n,r){var i=Le,o=zn.transition;zn.transition=null;try{Le=4,gi(e,t,n,r)}finally{Le=i,zn.transition=o}}function gi(e,t,n,r){if(rl){var i=xi(e,t,n,r);if(i===null)zi(e,t,r,ll,n),js(e,r);else if(kc(i,e,t,n,r))r.stopPropagation();else if(js(e,r),t&4&&-1<vc.indexOf(e)){for(;i!==null;){var o=Ar(i);if(o!==null&&Es(o),o=xi(e,t,n,r),o===null&&zi(e,t,r,ll,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else zi(e,t,r,null,n)}}var ll=null;function xi(e,t,n,r){if(ll=null,e=de(r),e=vn(e),e!==null)if(t=wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hs(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ll=e,null}function Rs(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dc()){case di:return 1;case ws:return 4;case Kr:case fc:return 16;case vs:return 536870912;default:return 16}default:return 16}}var qt=null,wi=null,il=null;function Ls(){if(il)return il;var e,t=wi,n=t.length,r,i="value"in qt?qt.value:qt.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===i[o-r];r++);return il=i.slice(e,1<r?1-r:void 0)}function ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function Os(){return!1}function yt(e){function t(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sl:Os,this.isPropagationStopped=Os,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vi=yt(Dn),xr=G({},Dn,{view:0,detail:0}),Nc=yt(xr),ki,Si,wr,ul=G({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(ki=e.screenX-wr.screenX,Si=e.screenY-wr.screenY):Si=ki=0,wr=e),ki)},movementY:function(e){return"movementY"in e?e.movementY:Si}}),Is=yt(ul),Tc=G({},ul,{dataTransfer:0}),jc=yt(Tc),Mc=G({},xr,{relatedTarget:0}),Ei=yt(Mc),Ac=G({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rc=yt(Ac),Lc=G({},Dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Oc=yt(Lc),Ic=G({},Dn,{data:0}),_s=yt(Ic),_c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dc[e])?!!t[e]:!1}function Ci(){return $c}var Fc=G({},xr,{key:function(e){if(e.key){var t=_c[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uc=yt(Fc),Bc=G({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zs=yt(Bc),Vc=G({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),Pc=yt(Vc),Wc=G({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yc=yt(Wc),Xc=G({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hc=yt(Xc),Qc=[9,13,27,32],Ni=E&&"CompositionEvent"in window,vr=null;E&&"documentMode"in document&&(vr=document.documentMode);var Jc=E&&"TextEvent"in window&&!vr,Ds=E&&(!Ni||vr&&8<vr&&11>=vr),$s=" ",Fs=!1;function Us(e,t){switch(e){case"keyup":return Qc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function Gc(e,t){switch(e){case"compositionend":return Bs(t);case"keypress":return t.which!==32?null:(Fs=!0,$s);case"textInput":return e=t.data,e===$s&&Fs?null:e;default:return null}}function Kc(e,t){if($n)return e==="compositionend"||!Ni&&Us(e,t)?(e=Ls(),il=wi=qt=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ds&&t.locale!=="ko"?null:t.data;default:return null}}var Zc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zc[e.type]:t==="textarea"}function Ps(e,t,n,r){us(r),t=hl(t,"onChange"),0<t.length&&(n=new vi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var kr=null,Sr=null;function qc(e){ou(e,0)}function al(e){var t=Pn(e);if(st(t))return e}function bc(e,t){if(e==="change")return t}var Ws=!1;if(E){var Ti;if(E){var ji="oninput"in document;if(!ji){var Ys=document.createElement("div");Ys.setAttribute("oninput","return;"),ji=typeof Ys.oninput=="function"}Ti=ji}else Ti=!1;Ws=Ti&&(!document.documentMode||9<document.documentMode)}function Xs(){kr&&(kr.detachEvent("onpropertychange",Hs),Sr=kr=null)}function Hs(e){if(e.propertyName==="value"&&al(Sr)){var t=[];Ps(t,Sr,e,de(e)),fs(qc,t)}}function ed(e,t,n){e==="focusin"?(Xs(),kr=t,Sr=n,kr.attachEvent("onpropertychange",Hs)):e==="focusout"&&Xs()}function td(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return al(Sr)}function nd(e,t){if(e==="click")return al(t)}function rd(e,t){if(e==="input"||e==="change")return al(t)}function ld(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:ld;function Er(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v.call(t,i)||!jt(e[i],t[i]))return!1}return!0}function Qs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Js(e,t){var n=Qs(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qs(n)}}function Gs(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gs(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ks(){for(var e=window,t=Be();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Be(e.document)}return t}function Mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function id(e){var t=Ks(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Gs(n.ownerDocument.documentElement,n)){if(r!==null&&Mi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Js(n,o);var u=Js(n,r);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var od=E&&"documentMode"in document&&11>=document.documentMode,Fn=null,Ai=null,Cr=null,Ri=!1;function Zs(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ri||Fn==null||Fn!==Be(r)||(r=Fn,"selectionStart"in r&&Mi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cr&&Er(Cr,r)||(Cr=r,r=hl(Ai,"onSelect"),0<r.length&&(t=new vi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fn)))}function cl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Un={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},Li={},qs={};E&&(qs=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function dl(e){if(Li[e])return Li[e];if(!Un[e])return e;var t=Un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qs)return Li[e]=t[n];return e}var bs=dl("animationend"),eu=dl("animationiteration"),tu=dl("animationstart"),nu=dl("transitionend"),ru=new Map,lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bt(e,t){ru.set(e,t),y(t,[e])}for(var Oi=0;Oi<lu.length;Oi++){var Ii=lu[Oi],sd=Ii.toLowerCase(),ud=Ii[0].toUpperCase()+Ii.slice(1);bt(sd,"on"+ud)}bt(bs,"onAnimationEnd"),bt(eu,"onAnimationIteration"),bt(tu,"onAnimationStart"),bt("dblclick","onDoubleClick"),bt("focusin","onFocus"),bt("focusout","onBlur"),bt(nu,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ad=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function iu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sc(r,t,void 0,e),e.currentTarget=null}function ou(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var p=r[u],N=p.instance,X=p.currentTarget;if(p=p.listener,N!==o&&i.isPropagationStopped())break e;iu(i,p,X),o=N}else for(u=0;u<r.length;u++){if(p=r[u],N=p.instance,X=p.currentTarget,p=p.listener,N!==o&&i.isPropagationStopped())break e;iu(i,p,X),o=N}}}if(Gr)throw e=ci,Gr=!1,ci=null,e}function _e(e,t){var n=t[Vi];n===void 0&&(n=t[Vi]=new Set);var r=e+"__bubble";n.has(r)||(su(t,e,2,!1),n.add(r))}function _i(e,t,n){var r=0;t&&(r|=4),su(n,e,r,t)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Tr(e){if(!e[fl]){e[fl]=!0,f.forEach(function(n){n!=="selectionchange"&&(ad.has(n)||_i(n,!1,e),_i(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fl]||(t[fl]=!0,_i("selectionchange",!1,t))}}function su(e,t,n,r){switch(Rs(t)){case 1:var i=Ec;break;case 4:i=Cc;break;default:i=gi}n=i.bind(null,t,n,e),i=void 0,!ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zi(e,t,n,r,i){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var p=r.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var N=u.tag;if((N===3||N===4)&&(N=u.stateNode.containerInfo,N===i||N.nodeType===8&&N.parentNode===i))return;u=u.return}for(;p!==null;){if(u=vn(p),u===null)return;if(N=u.tag,N===5||N===6){r=o=u;continue e}p=p.parentNode}}r=r.return}fs(function(){var X=o,ne=de(n),le=[];e:{var te=ru.get(e);if(te!==void 0){var ae=vi,fe=e;switch(e){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":ae=Uc;break;case"focusin":fe="focus",ae=Ei;break;case"focusout":fe="blur",ae=Ei;break;case"beforeblur":case"afterblur":ae=Ei;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Pc;break;case bs:case eu:case tu:ae=Rc;break;case nu:ae=Yc;break;case"scroll":ae=Nc;break;case"wheel":ae=Hc;break;case"copy":case"cut":case"paste":ae=Oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=zs}var he=(t&4)!==0,We=!he&&e==="scroll",B=he?te!==null?te+"Capture":null:te;he=[];for(var L=X,P;L!==null;){P=L;var se=P.stateNode;if(P.tag===5&&se!==null&&(P=se,B!==null&&(se=ur(L,B),se!=null&&he.push(jr(L,se,P)))),We)break;L=L.return}0<he.length&&(te=new ae(te,fe,null,n,ne),le.push({event:te,listeners:he}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",te&&n!==sr&&(fe=n.relatedTarget||n.fromElement)&&(vn(fe)||fe[Ut]))break e;if((ae||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(fe=n.relatedTarget||n.toElement,ae=X,fe=fe?vn(fe):null,fe!==null&&(We=wn(fe),fe!==We||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=X),ae!==fe)){if(he=Is,se="onMouseLeave",B="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(he=zs,se="onPointerLeave",B="onPointerEnter",L="pointer"),We=ae==null?te:Pn(ae),P=fe==null?te:Pn(fe),te=new he(se,L+"leave",ae,n,ne),te.target=We,te.relatedTarget=P,se=null,vn(ne)===X&&(he=new he(B,L+"enter",fe,n,ne),he.target=P,he.relatedTarget=We,se=he),We=se,ae&&fe)t:{for(he=ae,B=fe,L=0,P=he;P;P=Bn(P))L++;for(P=0,se=B;se;se=Bn(se))P++;for(;0<L-P;)he=Bn(he),L--;for(;0<P-L;)B=Bn(B),P--;for(;L--;){if(he===B||B!==null&&he===B.alternate)break t;he=Bn(he),B=Bn(B)}he=null}else he=null;ae!==null&&uu(le,te,ae,he,!1),fe!==null&&We!==null&&uu(le,We,fe,he,!0)}}e:{if(te=X?Pn(X):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var pe=bc;else if(Vs(te))if(Ws)pe=rd;else{pe=td;var xe=ed}else(ae=te.nodeName)&&ae.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(pe=nd);if(pe&&(pe=pe(e,X))){Ps(le,pe,n,ne);break e}xe&&xe(e,te,X),e==="focusout"&&(xe=te._wrapperState)&&xe.controlled&&te.type==="number"&&ve(te,"number",te.value)}switch(xe=X?Pn(X):window,e){case"focusin":(Vs(xe)||xe.contentEditable==="true")&&(Fn=xe,Ai=X,Cr=null);break;case"focusout":Cr=Ai=Fn=null;break;case"mousedown":Ri=!0;break;case"contextmenu":case"mouseup":case"dragend":Ri=!1,Zs(le,n,ne);break;case"selectionchange":if(od)break;case"keydown":case"keyup":Zs(le,n,ne)}var we;if(Ni)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else $n?Us(e,n)&&(ke="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ke="onCompositionStart");ke&&(Ds&&n.locale!=="ko"&&($n||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&$n&&(we=Ls()):(qt=ne,wi="value"in qt?qt.value:qt.textContent,$n=!0)),xe=hl(X,ke),0<xe.length&&(ke=new _s(ke,e,null,n,ne),le.push({event:ke,listeners:xe}),we?ke.data=we:(we=Bs(n),we!==null&&(ke.data=we)))),(we=Jc?Gc(e,n):Kc(e,n))&&(X=hl(X,"onBeforeInput"),0<X.length&&(ne=new _s("onBeforeInput","beforeinput",null,n,ne),le.push({event:ne,listeners:X}),ne.data=we))}ou(le,t)})}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ur(e,n),o!=null&&r.unshift(jr(e,o,i)),o=ur(e,t),o!=null&&r.push(jr(e,o,i))),e=e.return}return r}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uu(e,t,n,r,i){for(var o=t._reactName,u=[];n!==null&&n!==r;){var p=n,N=p.alternate,X=p.stateNode;if(N!==null&&N===r)break;p.tag===5&&X!==null&&(p=X,i?(N=ur(n,o),N!=null&&u.unshift(jr(n,N,p))):i||(N=ur(n,o),N!=null&&u.push(jr(n,N,p)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var cd=/\r\n?/g,dd=/\u0000|\uFFFD/g;function au(e){return(typeof e=="string"?e:""+e).replace(cd,`
`).replace(dd,"")}function ml(e,t,n){if(t=au(t),au(e)!==t&&n)throw Error(c(425))}function pl(){}var Di=null,$i=null;function Fi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ui=typeof setTimeout=="function"?setTimeout:void 0,fd=typeof clearTimeout=="function"?clearTimeout:void 0,cu=typeof Promise=="function"?Promise:void 0,hd=typeof queueMicrotask=="function"?queueMicrotask:typeof cu<"u"?function(e){return cu.resolve(null).then(e).catch(md)}:Ui;function md(e){setTimeout(function(){throw e})}function Bi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),gr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gr(t)}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),_t="__reactFiber$"+Vn,Mr="__reactProps$"+Vn,Ut="__reactContainer$"+Vn,Vi="__reactEvents$"+Vn,pd="__reactListeners$"+Vn,yd="__reactHandles$"+Vn;function vn(e){var t=e[_t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ut]||n[_t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=du(e);e!==null;){if(n=e[_t])return n;e=du(e)}return t}e=n,n=e.parentNode}return null}function Ar(e){return e=e[_t]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function yl(e){return e[Mr]||null}var Pi=[],Wn=-1;function tn(e){return{current:e}}function ze(e){0>Wn||(e.current=Pi[Wn],Pi[Wn]=null,Wn--)}function Ie(e,t){Wn++,Pi[Wn]=e.current,e.current=t}var nn={},tt=tn(nn),ct=tn(!1),kn=nn;function Yn(e,t){var n=e.type.contextTypes;if(!n)return nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function dt(e){return e=e.childContextTypes,e!=null}function gl(){ze(ct),ze(tt)}function fu(e,t,n){if(tt.current!==nn)throw Error(c(168));Ie(tt,t),Ie(ct,n)}function hu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(c(108,ee(e)||"Unknown",i));return G({},n,r)}function xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,kn=tt.current,Ie(tt,e),Ie(ct,ct.current),!0}function mu(e,t,n){var r=e.stateNode;if(!r)throw Error(c(169));n?(e=hu(e,t,kn),r.__reactInternalMemoizedMergedChildContext=e,ze(ct),ze(tt),Ie(tt,e)):ze(ct),Ie(ct,n)}var Bt=null,wl=!1,Wi=!1;function pu(e){Bt===null?Bt=[e]:Bt.push(e)}function gd(e){wl=!0,pu(e)}function rn(){if(!Wi&&Bt!==null){Wi=!0;var e=0,t=Le;try{var n=Bt;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Bt=null,wl=!1}catch(i){throw Bt!==null&&(Bt=Bt.slice(e+1)),gs(di,rn),i}finally{Le=t,Wi=!1}}return null}var Xn=[],Hn=0,vl=null,kl=0,vt=[],kt=0,Sn=null,Vt=1,Pt="";function En(e,t){Xn[Hn++]=kl,Xn[Hn++]=vl,vl=e,kl=t}function yu(e,t,n){vt[kt++]=Vt,vt[kt++]=Pt,vt[kt++]=Sn,Sn=e;var r=Vt;e=Pt;var i=32-Tt(r)-1;r&=~(1<<i),n+=1;var o=32-Tt(t)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Vt=1<<32-Tt(t)+i|n<<i|r,Pt=o+e}else Vt=1<<o|n<<i|r,Pt=e}function Yi(e){e.return!==null&&(En(e,1),yu(e,1,0))}function Xi(e){for(;e===vl;)vl=Xn[--Hn],Xn[Hn]=null,kl=Xn[--Hn],Xn[Hn]=null;for(;e===Sn;)Sn=vt[--kt],vt[kt]=null,Pt=vt[--kt],vt[kt]=null,Vt=vt[--kt],vt[kt]=null}var gt=null,xt=null,De=!1,Mt=null;function gu(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,xt=en(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sn!==null?{id:Vt,overflow:Pt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,xt=null,!0):!1;default:return!1}}function Hi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qi(e){if(De){var t=xt;if(t){var n=t;if(!xu(e,t)){if(Hi(e))throw Error(c(418));t=en(n.nextSibling);var r=gt;t&&xu(e,t)?gu(r,n):(e.flags=e.flags&-4097|2,De=!1,gt=e)}}else{if(Hi(e))throw Error(c(418));e.flags=e.flags&-4097|2,De=!1,gt=e}}}function wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Sl(e){if(e!==gt)return!1;if(!De)return wu(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fi(e.type,e.memoizedProps)),t&&(t=xt)){if(Hi(e))throw vu(),Error(c(418));for(;t;)gu(e,t),t=en(t.nextSibling)}if(wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=en(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=gt?en(e.stateNode.nextSibling):null;return!0}function vu(){for(var e=xt;e;)e=en(e.nextSibling)}function Qn(){xt=gt=null,De=!1}function Ji(e){Mt===null?Mt=[e]:Mt.push(e)}var xd=M.ReactCurrentBatchConfig;function Rr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var r=n.stateNode}if(!r)throw Error(c(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var p=i.refs;u===null?delete p[o]:p[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function El(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ku(e){var t=e._init;return t(e._payload)}function Su(e){function t(B,L){if(e){var P=B.deletions;P===null?(B.deletions=[L],B.flags|=16):P.push(L)}}function n(B,L){if(!e)return null;for(;L!==null;)t(B,L),L=L.sibling;return null}function r(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function i(B,L){return B=fn(B,L),B.index=0,B.sibling=null,B}function o(B,L,P){return B.index=P,e?(P=B.alternate,P!==null?(P=P.index,P<L?(B.flags|=2,L):P):(B.flags|=2,L)):(B.flags|=1048576,L)}function u(B){return e&&B.alternate===null&&(B.flags|=2),B}function p(B,L,P,se){return L===null||L.tag!==6?(L=Bo(P,B.mode,se),L.return=B,L):(L=i(L,P),L.return=B,L)}function N(B,L,P,se){var pe=P.type;return pe===h?ne(B,L,P.props.children,se,P.key):L!==null&&(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===b&&ku(pe)===L.type)?(se=i(L,P.props),se.ref=Rr(B,L,P),se.return=B,se):(se=Ql(P.type,P.key,P.props,null,B.mode,se),se.ref=Rr(B,L,P),se.return=B,se)}function X(B,L,P,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==P.containerInfo||L.stateNode.implementation!==P.implementation?(L=Vo(P,B.mode,se),L.return=B,L):(L=i(L,P.children||[]),L.return=B,L)}function ne(B,L,P,se,pe){return L===null||L.tag!==7?(L=Ln(P,B.mode,se,pe),L.return=B,L):(L=i(L,P),L.return=B,L)}function le(B,L,P){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Bo(""+L,B.mode,P),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case q:return P=Ql(L.type,L.key,L.props,null,B.mode,P),P.ref=Rr(B,null,L),P.return=B,P;case W:return L=Vo(L,B.mode,P),L.return=B,L;case b:var se=L._init;return le(B,se(L._payload),P)}if($e(L)||J(L))return L=Ln(L,B.mode,P,null),L.return=B,L;El(B,L)}return null}function te(B,L,P,se){var pe=L!==null?L.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return pe!==null?null:p(B,L,""+P,se);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case q:return P.key===pe?N(B,L,P,se):null;case W:return P.key===pe?X(B,L,P,se):null;case b:return pe=P._init,te(B,L,pe(P._payload),se)}if($e(P)||J(P))return pe!==null?null:ne(B,L,P,se,null);El(B,P)}return null}function ae(B,L,P,se,pe){if(typeof se=="string"&&se!==""||typeof se=="number")return B=B.get(P)||null,p(L,B,""+se,pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case q:return B=B.get(se.key===null?P:se.key)||null,N(L,B,se,pe);case W:return B=B.get(se.key===null?P:se.key)||null,X(L,B,se,pe);case b:var xe=se._init;return ae(B,L,P,xe(se._payload),pe)}if($e(se)||J(se))return B=B.get(P)||null,ne(L,B,se,pe,null);El(L,se)}return null}function fe(B,L,P,se){for(var pe=null,xe=null,we=L,ke=L=0,Ke=null;we!==null&&ke<P.length;ke++){we.index>ke?(Ke=we,we=null):Ke=we.sibling;var Me=te(B,we,P[ke],se);if(Me===null){we===null&&(we=Ke);break}e&&we&&Me.alternate===null&&t(B,we),L=o(Me,L,ke),xe===null?pe=Me:xe.sibling=Me,xe=Me,we=Ke}if(ke===P.length)return n(B,we),De&&En(B,ke),pe;if(we===null){for(;ke<P.length;ke++)we=le(B,P[ke],se),we!==null&&(L=o(we,L,ke),xe===null?pe=we:xe.sibling=we,xe=we);return De&&En(B,ke),pe}for(we=r(B,we);ke<P.length;ke++)Ke=ae(we,B,ke,P[ke],se),Ke!==null&&(e&&Ke.alternate!==null&&we.delete(Ke.key===null?ke:Ke.key),L=o(Ke,L,ke),xe===null?pe=Ke:xe.sibling=Ke,xe=Ke);return e&&we.forEach(function(hn){return t(B,hn)}),De&&En(B,ke),pe}function he(B,L,P,se){var pe=J(P);if(typeof pe!="function")throw Error(c(150));if(P=pe.call(P),P==null)throw Error(c(151));for(var xe=pe=null,we=L,ke=L=0,Ke=null,Me=P.next();we!==null&&!Me.done;ke++,Me=P.next()){we.index>ke?(Ke=we,we=null):Ke=we.sibling;var hn=te(B,we,Me.value,se);if(hn===null){we===null&&(we=Ke);break}e&&we&&hn.alternate===null&&t(B,we),L=o(hn,L,ke),xe===null?pe=hn:xe.sibling=hn,xe=hn,we=Ke}if(Me.done)return n(B,we),De&&En(B,ke),pe;if(we===null){for(;!Me.done;ke++,Me=P.next())Me=le(B,Me.value,se),Me!==null&&(L=o(Me,L,ke),xe===null?pe=Me:xe.sibling=Me,xe=Me);return De&&En(B,ke),pe}for(we=r(B,we);!Me.done;ke++,Me=P.next())Me=ae(we,B,ke,Me.value,se),Me!==null&&(e&&Me.alternate!==null&&we.delete(Me.key===null?ke:Me.key),L=o(Me,L,ke),xe===null?pe=Me:xe.sibling=Me,xe=Me);return e&&we.forEach(function(Kd){return t(B,Kd)}),De&&En(B,ke),pe}function We(B,L,P,se){if(typeof P=="object"&&P!==null&&P.type===h&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case q:e:{for(var pe=P.key,xe=L;xe!==null;){if(xe.key===pe){if(pe=P.type,pe===h){if(xe.tag===7){n(B,xe.sibling),L=i(xe,P.props.children),L.return=B,B=L;break e}}else if(xe.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===b&&ku(pe)===xe.type){n(B,xe.sibling),L=i(xe,P.props),L.ref=Rr(B,xe,P),L.return=B,B=L;break e}n(B,xe);break}else t(B,xe);xe=xe.sibling}P.type===h?(L=Ln(P.props.children,B.mode,se,P.key),L.return=B,B=L):(se=Ql(P.type,P.key,P.props,null,B.mode,se),se.ref=Rr(B,L,P),se.return=B,B=se)}return u(B);case W:e:{for(xe=P.key;L!==null;){if(L.key===xe)if(L.tag===4&&L.stateNode.containerInfo===P.containerInfo&&L.stateNode.implementation===P.implementation){n(B,L.sibling),L=i(L,P.children||[]),L.return=B,B=L;break e}else{n(B,L);break}else t(B,L);L=L.sibling}L=Vo(P,B.mode,se),L.return=B,B=L}return u(B);case b:return xe=P._init,We(B,L,xe(P._payload),se)}if($e(P))return fe(B,L,P,se);if(J(P))return he(B,L,P,se);El(B,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,L!==null&&L.tag===6?(n(B,L.sibling),L=i(L,P),L.return=B,B=L):(n(B,L),L=Bo(P,B.mode,se),L.return=B,B=L),u(B)):n(B,L)}return We}var Jn=Su(!0),Eu=Su(!1),Cl=tn(null),Nl=null,Gn=null,Gi=null;function Ki(){Gi=Gn=Nl=null}function Zi(e){var t=Cl.current;ze(Cl),e._currentValue=t}function qi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kn(e,t){Nl=e,Gi=Gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ft=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},Gn===null){if(Nl===null)throw Error(c(308));Gn=e,Nl.dependencies={lanes:0,firstContext:e}}else Gn=Gn.next=e;return t}var Cn=null;function bi(e){Cn===null?Cn=[e]:Cn.push(e)}function Cu(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,bi(t)):(n.next=i.next,i.next=n),t.interleaved=n,Wt(e,r)}function Wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ln=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(je&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Wt(e,n)}return i=r.interleaved,i===null?(t.next=t,bi(r)):(t.next=i.next,i.next=t),r.interleaved=t,Wt(e,n)}function Tl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mi(e,n)}}function Tu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jl(e,t,n,r){var i=e.updateQueue;ln=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var N=p,X=N.next;N.next=null,u===null?o=X:u.next=X,u=N;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,p=ne.lastBaseUpdate,p!==u&&(p===null?ne.firstBaseUpdate=X:p.next=X,ne.lastBaseUpdate=N))}if(o!==null){var le=i.baseState;u=0,ne=X=N=null,p=o;do{var te=p.lane,ae=p.eventTime;if((r&te)===te){ne!==null&&(ne=ne.next={eventTime:ae,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var fe=e,he=p;switch(te=t,ae=n,he.tag){case 1:if(fe=he.payload,typeof fe=="function"){le=fe.call(ae,le,te);break e}le=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=he.payload,te=typeof fe=="function"?fe.call(ae,le,te):fe,te==null)break e;le=G({},le,te);break e;case 2:ln=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,te=i.effects,te===null?i.effects=[p]:te.push(p))}else ae={eventTime:ae,lane:te,tag:p.tag,payload:p.payload,callback:p.callback,next:null},ne===null?(X=ne=ae,N=le):ne=ne.next=ae,u|=te;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;te=p,p=te.next,te.next=null,i.lastBaseUpdate=te,i.shared.pending=null}}while(!0);if(ne===null&&(N=le),i.baseState=N,i.firstBaseUpdate=X,i.lastBaseUpdate=ne,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);jn|=u,e.lanes=u,e.memoizedState=le}}function ju(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(c(191,i));i.call(r)}}}var Lr={},zt=tn(Lr),Or=tn(Lr),Ir=tn(Lr);function Nn(e){if(e===Lr)throw Error(c(174));return e}function to(e,t){switch(Ie(Ir,t),Ie(Or,e),Ie(zt,Lr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lr(t,e)}ze(zt),Ie(zt,t)}function Zn(){ze(zt),ze(Or),ze(Ir)}function Mu(e){Nn(Ir.current);var t=Nn(zt.current),n=lr(t,e.type);t!==n&&(Ie(Or,e),Ie(zt,n))}function no(e){Or.current===e&&(ze(zt),ze(Or))}var Fe=tn(0);function Ml(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function lo(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var Al=M.ReactCurrentDispatcher,io=M.ReactCurrentBatchConfig,Tn=0,Ue=null,Xe=null,Je=null,Rl=!1,_r=!1,zr=0,wd=0;function nt(){throw Error(c(321))}function oo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,o){if(Tn=o,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Al.current=e===null||e.memoizedState===null?Ed:Cd,e=n(r,i),_r){o=0;do{if(_r=!1,zr=0,25<=o)throw Error(c(301));o+=1,Je=Xe=null,t.updateQueue=null,Al.current=Nd,e=n(r,i)}while(_r)}if(Al.current=Il,t=Xe!==null&&Xe.next!==null,Tn=0,Je=Xe=Ue=null,Rl=!1,t)throw Error(c(300));return e}function uo(){var e=zr!==0;return zr=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ue.memoizedState=Je=e:Je=Je.next=e,Je}function Et(){if(Xe===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Je===null?Ue.memoizedState:Je.next;if(t!==null)Je=t,Xe=e;else{if(e===null)throw Error(c(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Je===null?Ue.memoizedState=Je=e:Je=Je.next=e}return Je}function Dr(e,t){return typeof t=="function"?t(e):t}function ao(e){var t=Et(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=Xe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var p=u=null,N=null,X=o;do{var ne=X.lane;if((Tn&ne)===ne)N!==null&&(N=N.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),r=X.hasEagerState?X.eagerState:e(r,X.action);else{var le={lane:ne,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};N===null?(p=N=le,u=r):N=N.next=le,Ue.lanes|=ne,jn|=ne}X=X.next}while(X!==null&&X!==o);N===null?u=r:N.next=p,jt(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=N,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ue.lanes|=o,jn|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function co(e){var t=Et(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);jt(o,t.memoizedState)||(ft=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Au(){}function Ru(e,t){var n=Ue,r=Et(),i=t(),o=!jt(r.memoizedState,i);if(o&&(r.memoizedState=i,ft=!0),r=r.queue,fo(Iu.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,$r(9,Ou.bind(null,n,r,i,t),void 0,null),Ge===null)throw Error(c(349));(Tn&30)!==0||Lu(n,t,i)}return i}function Lu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ou(e,t,n,r){t.value=n,t.getSnapshot=r,_u(t)&&zu(e)}function Iu(e,t,n){return n(function(){_u(t)&&zu(e)})}function _u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function zu(e){var t=Wt(e,1);t!==null&&Ot(t,e,1,-1)}function Du(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:e},t.queue=e,e=e.dispatch=Sd.bind(null,Ue,e),[t.memoizedState,e]}function $r(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function $u(){return Et().memoizedState}function Ll(e,t,n,r){var i=Dt();Ue.flags|=e,i.memoizedState=$r(1|t,n,void 0,r===void 0?null:r)}function Ol(e,t,n,r){var i=Et();r=r===void 0?null:r;var o=void 0;if(Xe!==null){var u=Xe.memoizedState;if(o=u.destroy,r!==null&&oo(r,u.deps)){i.memoizedState=$r(t,n,o,r);return}}Ue.flags|=e,i.memoizedState=$r(1|t,n,o,r)}function Fu(e,t){return Ll(8390656,8,e,t)}function fo(e,t){return Ol(2048,8,e,t)}function Uu(e,t){return Ol(4,2,e,t)}function Bu(e,t){return Ol(4,4,e,t)}function Vu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pu(e,t,n){return n=n!=null?n.concat([e]):null,Ol(4,4,Vu.bind(null,t,e),n)}function ho(){}function Wu(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yu(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xu(e,t,n){return(Tn&21)===0?(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n):(jt(n,t)||(n=ks(),Ue.lanes|=n,jn|=n,e.baseState=!0),t)}function vd(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{Le=n,io.transition=r}}function Hu(){return Et().memoizedState}function kd(e,t,n){var r=cn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qu(e))Ju(t,n);else if(n=Cu(e,t,n,r),n!==null){var i=ot();Ot(n,e,r,i),Gu(n,t,r)}}function Sd(e,t,n){var r=cn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qu(e))Ju(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,p=o(u,n);if(i.hasEagerState=!0,i.eagerState=p,jt(p,u)){var N=t.interleaved;N===null?(i.next=i,bi(t)):(i.next=N.next,N.next=i),t.interleaved=i;return}}catch{}finally{}n=Cu(e,t,i,r),n!==null&&(i=ot(),Ot(n,e,r,i),Gu(n,t,r))}}function Qu(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function Ju(e,t){_r=Rl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gu(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mi(e,n)}}var Il={readContext:St,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Ed={readContext:St,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Fu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ll(4194308,4,Vu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ll(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kd.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Du,useDebugValue:ho,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Du(!1),t=e[0];return e=vd.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,i=Dt();if(De){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Ge===null)throw Error(c(349));(Tn&30)!==0||Lu(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Fu(Iu.bind(null,r,o,e),[e]),r.flags|=2048,$r(9,Ou.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Ge.identifierPrefix;if(De){var n=Pt,r=Vt;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cd={readContext:St,useCallback:Wu,useContext:St,useEffect:fo,useImperativeHandle:Pu,useInsertionEffect:Uu,useLayoutEffect:Bu,useMemo:Yu,useReducer:ao,useRef:$u,useState:function(){return ao(Dr)},useDebugValue:ho,useDeferredValue:function(e){var t=Et();return Xu(t,Xe.memoizedState,e)},useTransition:function(){var e=ao(Dr)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Au,useSyncExternalStore:Ru,useId:Hu,unstable_isNewReconciler:!1},Nd={readContext:St,useCallback:Wu,useContext:St,useEffect:fo,useImperativeHandle:Pu,useInsertionEffect:Uu,useLayoutEffect:Bu,useMemo:Yu,useReducer:co,useRef:$u,useState:function(){return co(Dr)},useDebugValue:ho,useDeferredValue:function(e){var t=Et();return Xe===null?t.memoizedState=e:Xu(t,Xe.memoizedState,e)},useTransition:function(){var e=co(Dr)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Au,useSyncExternalStore:Ru,useId:Hu,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=G({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function mo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:G({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _l={isMounted:function(e){return(e=e._reactInternals)?wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ot(),i=cn(e),o=Yt(r,i);o.payload=t,n!=null&&(o.callback=n),t=on(e,o,i),t!==null&&(Ot(t,e,i,r),Tl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ot(),i=cn(e),o=Yt(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=on(e,o,i),t!==null&&(Ot(t,e,i,r),Tl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),r=cn(e),i=Yt(n,r);i.tag=2,t!=null&&(i.callback=t),t=on(e,i,r),t!==null&&(Ot(t,e,r,n),Tl(t,e,r))}};function Ku(e,t,n,r,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!Er(n,r)||!Er(i,o):!0}function Zu(e,t,n){var r=!1,i=nn,o=t.contextType;return typeof o=="object"&&o!==null?o=St(o):(i=dt(t)?kn:tt.current,r=t.contextTypes,o=(r=r!=null)?Yn(e,i):nn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_l,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_l.enqueueReplaceState(t,t.state,null)}function po(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},eo(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=St(o):(o=dt(t)?kn:tt.current,i.context=Yn(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(mo(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_l.enqueueReplaceState(i,i.state,null),jl(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qn(e,t){try{var n="",r=t;do n+=Se(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function yo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function go(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Td=typeof WeakMap=="function"?WeakMap:Map;function bu(e,t,n){n=Yt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Oo=r),go(e,t)},n}function ea(e,t,n){n=Yt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){go(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){go(e,t),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function ta(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Td;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Bd.bind(null,e,t,n),t.then(e,e))}function na(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ra(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yt(-1,1),t.tag=2,on(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var jd=M.ReactCurrentOwner,ft=!1;function it(e,t,n,r){t.child=e===null?Eu(t,null,n,r):Jn(t,e.child,n,r)}function la(e,t,n,r,i){n=n.render;var o=t.ref;return Kn(t,i),r=so(e,t,n,r,o,i),n=uo(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(De&&n&&Yi(t),t.flags|=1,it(e,t,r,i),t.child)}function ia(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Uo(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,oa(e,t,o,r,i)):(e=Ql(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&i)===0){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:Er,n(u,r)&&e.ref===t.ref)return Xt(e,t,i)}return t.flags|=1,e=fn(o,r),e.ref=t.ref,e.return=t,t.child=e}function oa(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Er(o,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=o,(e.lanes&i)!==0)(e.flags&131072)!==0&&(ft=!0);else return t.lanes=e.lanes,Xt(e,t,i)}return xo(e,t,n,r,i)}function sa(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(er,wt),wt|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(er,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ie(er,wt),wt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ie(er,wt),wt|=r;return it(e,t,i,n),t.child}function ua(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xo(e,t,n,r,i){var o=dt(n)?kn:tt.current;return o=Yn(t,o),Kn(t,i),n=so(e,t,n,r,o,i),r=uo(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(De&&r&&Yi(t),t.flags|=1,it(e,t,n,i),t.child)}function aa(e,t,n,r,i){if(dt(n)){var o=!0;xl(t)}else o=!1;if(Kn(t,i),t.stateNode===null)Dl(e,t),Zu(t,n,r),po(t,n,r,i),r=!0;else if(e===null){var u=t.stateNode,p=t.memoizedProps;u.props=p;var N=u.context,X=n.contextType;typeof X=="object"&&X!==null?X=St(X):(X=dt(n)?kn:tt.current,X=Yn(t,X));var ne=n.getDerivedStateFromProps,le=typeof ne=="function"||typeof u.getSnapshotBeforeUpdate=="function";le||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==r||N!==X)&&qu(t,u,r,X),ln=!1;var te=t.memoizedState;u.state=te,jl(t,r,u,i),N=t.memoizedState,p!==r||te!==N||ct.current||ln?(typeof ne=="function"&&(mo(t,n,ne,r),N=t.memoizedState),(p=ln||Ku(t,n,p,r,te,N,X))?(le||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=N),u.props=r,u.state=N,u.context=X,r=p):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Nu(e,t),p=t.memoizedProps,X=t.type===t.elementType?p:At(t.type,p),u.props=X,le=t.pendingProps,te=u.context,N=n.contextType,typeof N=="object"&&N!==null?N=St(N):(N=dt(n)?kn:tt.current,N=Yn(t,N));var ae=n.getDerivedStateFromProps;(ne=typeof ae=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==le||te!==N)&&qu(t,u,r,N),ln=!1,te=t.memoizedState,u.state=te,jl(t,r,u,i);var fe=t.memoizedState;p!==le||te!==fe||ct.current||ln?(typeof ae=="function"&&(mo(t,n,ae,r),fe=t.memoizedState),(X=ln||Ku(t,n,X,r,te,fe,N)||!1)?(ne||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,fe,N),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,fe,N)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=fe),u.props=r,u.state=fe,u.context=N,r=X):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),r=!1)}return wo(e,t,n,r,o,i)}function wo(e,t,n,r,i,o){ua(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return i&&mu(t,n,!1),Xt(e,t,o);r=t.stateNode,jd.current=t;var p=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Jn(t,e.child,null,o),t.child=Jn(t,null,p,o)):it(e,t,p,o),t.memoizedState=r.state,i&&mu(t,n,!0),t.child}function ca(e){var t=e.stateNode;t.pendingContext?fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fu(e,t.context,!1),to(e,t.containerInfo)}function da(e,t,n,r,i){return Qn(),Ji(i),t.flags|=256,it(e,t,n,r),t.child}var vo={dehydrated:null,treeContext:null,retryLane:0};function ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function fa(e,t,n){var r=t.pendingProps,i=Fe.current,o=!1,u=(t.flags&128)!==0,p;if((p=u)||(p=e!==null&&e.memoizedState===null?!1:(i&2)!==0),p?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ie(Fe,i&1),e===null)return Qi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=u):o=Jl(u,r,0,null),e=Ln(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ko(n),t.memoizedState=vo,e):So(t,u));if(i=e.memoizedState,i!==null&&(p=i.dehydrated,p!==null))return Md(e,t,u,r,p,i,n);if(o){o=r.fallback,u=t.mode,i=e.child,p=i.sibling;var N={mode:"hidden",children:r.children};return(u&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=N,t.deletions=null):(r=fn(i,N),r.subtreeFlags=i.subtreeFlags&14680064),p!==null?o=fn(p,o):(o=Ln(o,u,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?ko(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=vo,r}return o=e.child,e=o.sibling,r=fn(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function So(e,t){return t=Jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zl(e,t,n,r){return r!==null&&Ji(r),Jn(t,e.child,null,n),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Md(e,t,n,r,i,o,u){if(n)return t.flags&256?(t.flags&=-257,r=yo(Error(c(422))),zl(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Jl({mode:"visible",children:r.children},i,0,null),o=Ln(o,i,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&Jn(t,e.child,null,u),t.child.memoizedState=ko(u),t.memoizedState=vo,o);if((t.mode&1)===0)return zl(e,t,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var p=r.dgst;return r=p,o=Error(c(419)),r=yo(o,r,void 0),zl(e,t,u,r)}if(p=(u&e.childLanes)!==0,ft||p){if(r=Ge,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|u))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Wt(e,i),Ot(r,e,i,-1))}return Fo(),r=yo(Error(c(421))),zl(e,t,u,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vd.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,xt=en(i.nextSibling),gt=t,De=!0,Mt=null,e!==null&&(vt[kt++]=Vt,vt[kt++]=Pt,vt[kt++]=Sn,Vt=e.id,Pt=e.overflow,Sn=t),t=So(t,r.children),t.flags|=4096,t)}function ha(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qi(e.return,t,n)}function Eo(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ma(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(it(e,t,r.children,n),r=Fe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ha(e,n,t);else if(e.tag===19)ha(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(Fe,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ml(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Eo(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ml(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Eo(t,!0,n,null,o);break;case"together":Eo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dl(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ad(e,t,n){switch(t.tag){case 3:ca(t),Qn();break;case 5:Mu(t);break;case 1:dt(t.type)&&xl(t);break;case 4:to(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ie(Cl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Fe,Fe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?fa(e,t,n):(Ie(Fe,Fe.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);Ie(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return ma(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,sa(e,t,n)}return Xt(e,t,n)}var pa,Co,ya,ga;pa=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Co=function(){},ya=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Nn(zt.current);var o=null;switch(n){case"input":i=oe(e,i),r=oe(e,r),o=[];break;case"select":i=G({},i,{value:void 0}),r=G({},r,{value:void 0}),o=[];break;case"textarea":i=Ft(e,i),r=Ft(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pl)}ir(n,r);var u;n=null;for(X in i)if(!r.hasOwnProperty(X)&&i.hasOwnProperty(X)&&i[X]!=null)if(X==="style"){var p=i[X];for(u in p)p.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(d.hasOwnProperty(X)?o||(o=[]):(o=o||[]).push(X,null));for(X in r){var N=r[X];if(p=i!=null?i[X]:void 0,r.hasOwnProperty(X)&&N!==p&&(N!=null||p!=null))if(X==="style")if(p){for(u in p)!p.hasOwnProperty(u)||N&&N.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in N)N.hasOwnProperty(u)&&p[u]!==N[u]&&(n||(n={}),n[u]=N[u])}else n||(o||(o=[]),o.push(X,n)),n=N;else X==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,p=p?p.__html:void 0,N!=null&&p!==N&&(o=o||[]).push(X,N)):X==="children"?typeof N!="string"&&typeof N!="number"||(o=o||[]).push(X,""+N):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(d.hasOwnProperty(X)?(N!=null&&X==="onScroll"&&_e("scroll",e),o||p===N||(o=[])):(o=o||[]).push(X,N))}n&&(o=o||[]).push("style",n);var X=o;(t.updateQueue=X)&&(t.flags|=4)}},ga=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fr(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rd(e,t,n){var r=t.pendingProps;switch(Xi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return dt(t.type)&&gl(),rt(t),null;case 3:return r=t.stateNode,Zn(),ze(ct),ze(tt),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Mt!==null&&(zo(Mt),Mt=null))),Co(e,t),rt(t),null;case 5:no(t);var i=Nn(Ir.current);if(n=t.type,e!==null&&t.stateNode!=null)ya(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(c(166));return rt(t),null}if(e=Nn(zt.current),Sl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[_t]=t,r[Mr]=o,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)_e(Nr[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":ie(r,o),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_e("invalid",r);break;case"textarea":In(r,o),_e("invalid",r)}ir(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var p=o[u];u==="children"?typeof p=="string"?r.textContent!==p&&(o.suppressHydrationWarning!==!0&&ml(r.textContent,p,e),i=["children",p]):typeof p=="number"&&r.textContent!==""+p&&(o.suppressHydrationWarning!==!0&&ml(r.textContent,p,e),i=["children",""+p]):d.hasOwnProperty(u)&&p!=null&&u==="onScroll"&&_e("scroll",r)}switch(n){case"input":Qe(r),re(r,o,!0);break;case"textarea":Qe(r),yn(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=pl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qt(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[_t]=t,e[Mr]=r,pa(e,t,!1,!1),t.stateNode=e;e:{switch(u=or(n,r),n){case"dialog":_e("cancel",e),_e("close",e),i=r;break;case"iframe":case"object":case"embed":_e("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)_e(Nr[i],e);i=r;break;case"source":_e("error",e),i=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),i=r;break;case"details":_e("toggle",e),i=r;break;case"input":ie(e,r),i=oe(e,r),_e("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=G({},r,{value:void 0}),_e("invalid",e);break;case"textarea":In(e,r),i=Ft(e,r),_e("invalid",e);break;default:i=r}ir(n,i),p=i;for(o in p)if(p.hasOwnProperty(o)){var N=p[o];o==="style"?Qr(e,N):o==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Xr(e,N)):o==="children"?typeof N=="string"?(n!=="textarea"||N!=="")&&gn(e,N):typeof N=="number"&&gn(e,""+N):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(d.hasOwnProperty(o)?N!=null&&o==="onScroll"&&_e("scroll",e):N!=null&&V(e,o,N,u))}switch(n){case"input":Qe(e),re(e,r,!1);break;case"textarea":Qe(e),yn(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Oe(e,!!r.multiple,o,!1):r.defaultValue!=null&&Oe(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)ga(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(c(166));if(n=Nn(Ir.current),Nn(zt.current),Sl(t)){if(r=t.stateNode,n=t.memoizedProps,r[_t]=t,(o=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:ml(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=t,t.stateNode=r}return rt(t),null;case 13:if(ze(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&xt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)vu(),Qn(),t.flags|=98560,o=!1;else if(o=Sl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[_t]=t}else Qn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),o=!1}else Mt!==null&&(zo(Mt),Mt=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Fe.current&1)!==0?He===0&&(He=3):Fo())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Zn(),Co(e,t),e===null&&Tr(t.stateNode.containerInfo),rt(t),null;case 10:return Zi(t.type._context),rt(t),null;case 17:return dt(t.type)&&gl(),rt(t),null;case 19:if(ze(Fe),o=t.memoizedState,o===null)return rt(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)Fr(o,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ml(e),u!==null){for(t.flags|=128,Fr(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(Fe,Fe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pe()>tr&&(t.flags|=128,r=!0,Fr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ml(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!De)return rt(t),null}else 2*Pe()-o.renderingStartTime>tr&&n!==1073741824&&(t.flags|=128,r=!0,Fr(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(n=o.last,n!==null?n.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pe(),t.sibling=null,n=Fe.current,Ie(Fe,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return $o(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(wt&1073741824)!==0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function Ld(e,t){switch(Xi(t),t.tag){case 1:return dt(t.type)&&gl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(),ze(ct),ze(tt),lo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return no(t),null;case 13:if(ze(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Fe),null;case 4:return Zn(),null;case 10:return Zi(t.type._context),null;case 22:case 23:return $o(),null;case 24:return null;default:return null}}var $l=!1,lt=!1,Od=typeof WeakSet=="function"?WeakSet:Set,ce=null;function bn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(e,t,r)}else n.current=null}function No(e,t,n){try{n()}catch(r){Ve(e,t,r)}}var xa=!1;function Id(e,t){if(Di=rl,e=Ks(),Mi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,p=-1,N=-1,X=0,ne=0,le=e,te=null;t:for(;;){for(var ae;le!==n||i!==0&&le.nodeType!==3||(p=u+i),le!==o||r!==0&&le.nodeType!==3||(N=u+r),le.nodeType===3&&(u+=le.nodeValue.length),(ae=le.firstChild)!==null;)te=le,le=ae;for(;;){if(le===e)break t;if(te===n&&++X===i&&(p=u),te===o&&++ne===r&&(N=u),(ae=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=ae}n=p===-1||N===-1?null:{start:p,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for($i={focusedElem:e,selectionRange:n},rl=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var fe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var he=fe.memoizedProps,We=fe.memoizedState,B=t.stateNode,L=B.getSnapshotBeforeUpdate(t.elementType===t.type?he:At(t.type,he),We);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(se){Ve(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return fe=xa,xa=!1,fe}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&No(t,n,o)}i=i.next}while(i!==r)}}function Fl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function To(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wa(e){var t=e.alternate;t!==null&&(e.alternate=null,wa(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_t],delete t[Mr],delete t[Vi],delete t[pd],delete t[yd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function va(e){return e.tag===5||e.tag===3||e.tag===4}function ka(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||va(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pl));else if(r!==4&&(e=e.child,e!==null))for(jo(e,t,n),e=e.sibling;e!==null;)jo(e,t,n),e=e.sibling}function Mo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mo(e,t,n),e=e.sibling;e!==null;)Mo(e,t,n),e=e.sibling}var qe=null,Rt=!1;function sn(e,t,n){for(n=n.child;n!==null;)Sa(e,t,n),n=n.sibling}function Sa(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 5:lt||bn(n,t);case 6:var r=qe,i=Rt;qe=null,sn(e,t,n),qe=r,Rt=i,qe!==null&&(Rt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Rt?(e=qe,n=n.stateNode,e.nodeType===8?Bi(e.parentNode,n):e.nodeType===1&&Bi(e,n),gr(e)):Bi(qe,n.stateNode));break;case 4:r=qe,i=Rt,qe=n.stateNode.containerInfo,Rt=!0,sn(e,t,n),qe=r,Rt=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&((o&2)!==0||(o&4)!==0)&&No(n,t,u),i=i.next}while(i!==r)}sn(e,t,n);break;case 1:if(!lt&&(bn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(p){Ve(n,t,p)}sn(e,t,n);break;case 21:sn(e,t,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,sn(e,t,n),lt=r):sn(e,t,n);break;default:sn(e,t,n)}}function Ea(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Od),t.forEach(function(r){var i=Pd.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,p=u;e:for(;p!==null;){switch(p.tag){case 5:qe=p.stateNode,Rt=!1;break e;case 3:qe=p.stateNode.containerInfo,Rt=!0;break e;case 4:qe=p.stateNode.containerInfo,Rt=!0;break e}p=p.return}if(qe===null)throw Error(c(160));Sa(o,u,i),qe=null,Rt=!1;var N=i.alternate;N!==null&&(N.return=null),i.return=null}catch(X){Ve(i,t,X)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ca(t,e),t=t.sibling}function Ca(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),$t(e),r&4){try{Ur(3,e,e.return),Fl(3,e)}catch(he){Ve(e,e.return,he)}try{Ur(5,e,e.return)}catch(he){Ve(e,e.return,he)}}break;case 1:Lt(t,e),$t(e),r&512&&n!==null&&bn(n,n.return);break;case 5:if(Lt(t,e),$t(e),r&512&&n!==null&&bn(n,n.return),e.flags&32){var i=e.stateNode;try{gn(i,"")}catch(he){Ve(e,e.return,he)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=n!==null?n.memoizedProps:o,p=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{p==="input"&&o.type==="radio"&&o.name!=null&&ue(i,o),or(p,u);var X=or(p,o);for(u=0;u<N.length;u+=2){var ne=N[u],le=N[u+1];ne==="style"?Qr(i,le):ne==="dangerouslySetInnerHTML"?Xr(i,le):ne==="children"?gn(i,le):V(i,ne,le,X)}switch(p){case"input":Ee(i,o);break;case"textarea":pn(i,o);break;case"select":var te=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var ae=o.value;ae!=null?Oe(i,!!o.multiple,ae,!1):te!==!!o.multiple&&(o.defaultValue!=null?Oe(i,!!o.multiple,o.defaultValue,!0):Oe(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mr]=o}catch(he){Ve(e,e.return,he)}}break;case 6:if(Lt(t,e),$t(e),r&4){if(e.stateNode===null)throw Error(c(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(he){Ve(e,e.return,he)}}break;case 3:if(Lt(t,e),$t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gr(t.containerInfo)}catch(he){Ve(e,e.return,he)}break;case 4:Lt(t,e),$t(e);break;case 13:Lt(t,e),$t(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Lo=Pe())),r&4&&Ea(e);break;case 22:if(ne=n!==null&&n.memoizedState!==null,e.mode&1?(lt=(X=lt)||ne,Lt(t,e),lt=X):Lt(t,e),$t(e),r&8192){if(X=e.memoizedState!==null,(e.stateNode.isHidden=X)&&!ne&&(e.mode&1)!==0)for(ce=e,ne=e.child;ne!==null;){for(le=ce=ne;ce!==null;){switch(te=ce,ae=te.child,te.tag){case 0:case 11:case 14:case 15:Ur(4,te,te.return);break;case 1:bn(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){r=te,n=te.return;try{t=r,fe.props=t.memoizedProps,fe.state=t.memoizedState,fe.componentWillUnmount()}catch(he){Ve(r,n,he)}}break;case 5:bn(te,te.return);break;case 22:if(te.memoizedState!==null){ja(le);continue}}ae!==null?(ae.return=te,ce=ae):ja(le)}ne=ne.sibling}e:for(ne=null,le=e;;){if(le.tag===5){if(ne===null){ne=le;try{i=le.stateNode,X?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(p=le.stateNode,N=le.memoizedProps.style,u=N!=null&&N.hasOwnProperty("display")?N.display:null,p.style.display=Hr("display",u))}catch(he){Ve(e,e.return,he)}}}else if(le.tag===6){if(ne===null)try{le.stateNode.nodeValue=X?"":le.memoizedProps}catch(he){Ve(e,e.return,he)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ne===le&&(ne=null),le=le.return}ne===le&&(ne=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Lt(t,e),$t(e),r&4&&Ea(e);break;case 21:break;default:Lt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(va(n)){var r=n;break e}n=n.return}throw Error(c(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gn(i,""),r.flags&=-33);var o=ka(e);Mo(e,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,p=ka(e);jo(e,p,u);break;default:throw Error(c(161))}}catch(N){Ve(e,e.return,N)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _d(e,t,n){ce=e,Na(e)}function Na(e,t,n){for(var r=(e.mode&1)!==0;ce!==null;){var i=ce,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||$l;if(!u){var p=i.alternate,N=p!==null&&p.memoizedState!==null||lt;p=$l;var X=lt;if($l=u,(lt=N)&&!X)for(ce=i;ce!==null;)u=ce,N=u.child,u.tag===22&&u.memoizedState!==null?Ma(i):N!==null?(N.return=u,ce=N):Ma(i);for(;o!==null;)ce=o,Na(o),o=o.sibling;ce=i,$l=p,lt=X}Ta(e)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,ce=o):Ta(e)}}function Ta(e){for(;ce!==null;){var t=ce;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:lt||Fl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:At(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ju(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ju(t,u,n)}break;case 5:var p=t.stateNode;if(n===null&&t.flags&4){n=p;var N=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&n.focus();break;case"img":N.src&&(n.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var X=t.alternate;if(X!==null){var ne=X.memoizedState;if(ne!==null){var le=ne.dehydrated;le!==null&&gr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}lt||t.flags&512&&To(t)}catch(te){Ve(t,t.return,te)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function ja(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Ma(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fl(4,t)}catch(N){Ve(t,n,N)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(N){Ve(t,i,N)}}var o=t.return;try{To(t)}catch(N){Ve(t,o,N)}break;case 5:var u=t.return;try{To(t)}catch(N){Ve(t,u,N)}}}catch(N){Ve(t,t.return,N)}if(t===e){ce=null;break}var p=t.sibling;if(p!==null){p.return=t.return,ce=p;break}ce=t.return}}var zd=Math.ceil,Ul=M.ReactCurrentDispatcher,Ao=M.ReactCurrentOwner,Ct=M.ReactCurrentBatchConfig,je=0,Ge=null,Ye=null,be=0,wt=0,er=tn(0),He=0,Br=null,jn=0,Bl=0,Ro=0,Vr=null,ht=null,Lo=0,tr=1/0,Ht=null,Vl=!1,Oo=null,un=null,Pl=!1,an=null,Wl=0,Pr=0,Io=null,Yl=-1,Xl=0;function ot(){return(je&6)!==0?Pe():Yl!==-1?Yl:Yl=Pe()}function cn(e){return(e.mode&1)===0?1:(je&2)!==0&&be!==0?be&-be:xd.transition!==null?(Xl===0&&(Xl=ks()),Xl):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Rs(e.type)),e)}function Ot(e,t,n,r){if(50<Pr)throw Pr=0,Io=null,Error(c(185));fr(e,n,r),((je&2)===0||e!==Ge)&&(e===Ge&&((je&2)===0&&(Bl|=n),He===4&&dn(e,be)),mt(e,r),n===1&&je===0&&(t.mode&1)===0&&(tr=Pe()+500,wl&&rn()))}function mt(e,t){var n=e.callbackNode;xc(e,t);var r=el(e,e===Ge?be:0);if(r===0)n!==null&&xs(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xs(n),t===1)e.tag===0?gd(Ra.bind(null,e)):pu(Ra.bind(null,e)),hd(function(){(je&6)===0&&rn()}),n=null;else{switch(Ss(r)){case 1:n=di;break;case 4:n=ws;break;case 16:n=Kr;break;case 536870912:n=vs;break;default:n=Kr}n=Fa(n,Aa.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Aa(e,t){if(Yl=-1,Xl=0,(je&6)!==0)throw Error(c(327));var n=e.callbackNode;if(nr()&&e.callbackNode!==n)return null;var r=el(e,e===Ge?be:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Hl(e,r);else{t=r;var i=je;je|=2;var o=Oa();(Ge!==e||be!==t)&&(Ht=null,tr=Pe()+500,An(e,t));do try{Fd();break}catch(p){La(e,p)}while(!0);Ki(),Ul.current=o,je=i,Ye!==null?t=0:(Ge=null,be=0,t=He)}if(t!==0){if(t===2&&(i=fi(e),i!==0&&(r=i,t=_o(e,i))),t===1)throw n=Br,An(e,0),dn(e,r),mt(e,Pe()),n;if(t===6)dn(e,r);else{if(i=e.current.alternate,(r&30)===0&&!Dd(i)&&(t=Hl(e,r),t===2&&(o=fi(e),o!==0&&(r=o,t=_o(e,o))),t===1))throw n=Br,An(e,0),dn(e,r),mt(e,Pe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(c(345));case 2:Rn(e,ht,Ht);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=Lo+500-Pe(),10<t)){if(el(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ot(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ui(Rn.bind(null,e,ht,Ht),t);break}Rn(e,ht,Ht);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-Tt(r);o=1<<u,u=t[u],u>i&&(i=u),r&=~o}if(r=i,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zd(r/1960))-r,10<r){e.timeoutHandle=Ui(Rn.bind(null,e,ht,Ht),r);break}Rn(e,ht,Ht);break;case 5:Rn(e,ht,Ht);break;default:throw Error(c(329))}}}return mt(e,Pe()),e.callbackNode===n?Aa.bind(null,e):null}function _o(e,t){var n=Vr;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=Hl(e,t),e!==2&&(t=ht,ht=n,t!==null&&zo(t)),e}function zo(e){ht===null?ht=e:ht.push.apply(ht,e)}function Dd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!jt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~Ro,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tt(t),r=1<<n;e[n]=-1,t&=~r}}function Ra(e){if((je&6)!==0)throw Error(c(327));nr();var t=el(e,0);if((t&1)===0)return mt(e,Pe()),null;var n=Hl(e,t);if(e.tag!==0&&n===2){var r=fi(e);r!==0&&(t=r,n=_o(e,r))}if(n===1)throw n=Br,An(e,0),dn(e,t),mt(e,Pe()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,ht,Ht),mt(e,Pe()),null}function Do(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(tr=Pe()+500,wl&&rn())}}function Mn(e){an!==null&&an.tag===0&&(je&6)===0&&nr();var t=je;je|=1;var n=Ct.transition,r=Le;try{if(Ct.transition=null,Le=1,e)return e()}finally{Le=r,Ct.transition=n,je=t,(je&6)===0&&rn()}}function $o(){wt=er.current,ze(er)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fd(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Xi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gl();break;case 3:Zn(),ze(ct),ze(tt),lo();break;case 5:no(r);break;case 4:Zn();break;case 13:ze(Fe);break;case 19:ze(Fe);break;case 10:Zi(r.type._context);break;case 22:case 23:$o()}n=n.return}if(Ge=e,Ye=e=fn(e.current,null),be=wt=t,He=0,Br=null,Ro=Bl=jn=0,ht=Vr=null,Cn!==null){for(t=0;t<Cn.length;t++)if(n=Cn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}Cn=null}return e}function La(e,t){do{var n=Ye;try{if(Ki(),Al.current=Il,Rl){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rl=!1}if(Tn=0,Je=Xe=Ue=null,_r=!1,zr=0,Ao.current=null,n===null||n.return===null){He=1,Br=t,Ye=null;break}e:{var o=e,u=n.return,p=n,N=t;if(t=be,p.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=N,ne=p,le=ne.tag;if((ne.mode&1)===0&&(le===0||le===11||le===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ae=na(u);if(ae!==null){ae.flags&=-257,ra(ae,u,p,o,t),ae.mode&1&&ta(o,X,t),t=ae,N=X;var fe=t.updateQueue;if(fe===null){var he=new Set;he.add(N),t.updateQueue=he}else fe.add(N);break e}else{if((t&1)===0){ta(o,X,t),Fo();break e}N=Error(c(426))}}else if(De&&p.mode&1){var We=na(u);if(We!==null){(We.flags&65536)===0&&(We.flags|=256),ra(We,u,p,o,t),Ji(qn(N,p));break e}}o=N=qn(N,p),He!==4&&(He=2),Vr===null?Vr=[o]:Vr.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var B=bu(o,N,t);Tu(o,B);break e;case 1:p=N;var L=o.type,P=o.stateNode;if((o.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(un===null||!un.has(P)))){o.flags|=65536,t&=-t,o.lanes|=t;var se=ea(o,p,t);Tu(o,se);break e}}o=o.return}while(o!==null)}_a(n)}catch(pe){t=pe,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function Oa(){var e=Ul.current;return Ul.current=Il,e===null?Il:e}function Fo(){(He===0||He===3||He===2)&&(He=4),Ge===null||(jn&268435455)===0&&(Bl&268435455)===0||dn(Ge,be)}function Hl(e,t){var n=je;je|=2;var r=Oa();(Ge!==e||be!==t)&&(Ht=null,An(e,t));do try{$d();break}catch(i){La(e,i)}while(!0);if(Ki(),je=n,Ul.current=r,Ye!==null)throw Error(c(261));return Ge=null,be=0,He}function $d(){for(;Ye!==null;)Ia(Ye)}function Fd(){for(;Ye!==null&&!ac();)Ia(Ye)}function Ia(e){var t=$a(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?_a(e):Ye=t,Ao.current=null}function _a(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Rd(n,t,wt),n!==null){Ye=n;return}}else{if(n=Ld(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,Ye=null;return}}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);He===0&&(He=5)}function Rn(e,t,n){var r=Le,i=Ct.transition;try{Ct.transition=null,Le=1,Ud(e,t,n,r)}finally{Ct.transition=i,Le=r}return null}function Ud(e,t,n,r){do nr();while(an!==null);if((je&6)!==0)throw Error(c(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(wc(e,o),e===Ge&&(Ye=Ge=null,be=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Pl||(Pl=!0,Fa(Kr,function(){return nr(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Ct.transition,Ct.transition=null;var u=Le;Le=1;var p=je;je|=4,Ao.current=null,Id(e,n),Ca(n,e),id($i),rl=!!Di,$i=Di=null,e.current=n,_d(n),cc(),je=p,Le=u,Ct.transition=o}else e.current=n;if(Pl&&(Pl=!1,an=e,Wl=i),o=e.pendingLanes,o===0&&(un=null),hc(n.stateNode),mt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Oo,Oo=null,e;return(Wl&1)!==0&&e.tag!==0&&nr(),o=e.pendingLanes,(o&1)!==0?e===Io?Pr++:(Pr=0,Io=e):Pr=0,rn(),null}function nr(){if(an!==null){var e=Ss(Wl),t=Ct.transition,n=Le;try{if(Ct.transition=null,Le=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,Wl=0,(je&6)!==0)throw Error(c(331));var i=je;for(je|=4,ce=e.current;ce!==null;){var o=ce,u=o.child;if((ce.flags&16)!==0){var p=o.deletions;if(p!==null){for(var N=0;N<p.length;N++){var X=p[N];for(ce=X;ce!==null;){var ne=ce;switch(ne.tag){case 0:case 11:case 15:Ur(8,ne,o)}var le=ne.child;if(le!==null)le.return=ne,ce=le;else for(;ce!==null;){ne=ce;var te=ne.sibling,ae=ne.return;if(wa(ne),ne===X){ce=null;break}if(te!==null){te.return=ae,ce=te;break}ce=ae}}}var fe=o.alternate;if(fe!==null){var he=fe.child;if(he!==null){fe.child=null;do{var We=he.sibling;he.sibling=null,he=We}while(he!==null)}}ce=o}}if((o.subtreeFlags&2064)!==0&&u!==null)u.return=o,ce=u;else e:for(;ce!==null;){if(o=ce,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Ur(9,o,o.return)}var B=o.sibling;if(B!==null){B.return=o.return,ce=B;break e}ce=o.return}}var L=e.current;for(ce=L;ce!==null;){u=ce;var P=u.child;if((u.subtreeFlags&2064)!==0&&P!==null)P.return=u,ce=P;else e:for(u=L;ce!==null;){if(p=ce,(p.flags&2048)!==0)try{switch(p.tag){case 0:case 11:case 15:Fl(9,p)}}catch(pe){Ve(p,p.return,pe)}if(p===u){ce=null;break e}var se=p.sibling;if(se!==null){se.return=p.return,ce=se;break e}ce=p.return}}if(je=i,rn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Zr,e)}catch{}r=!0}return r}finally{Le=n,Ct.transition=t}}return!1}function za(e,t,n){t=qn(n,t),t=bu(e,t,1),e=on(e,t,1),t=ot(),e!==null&&(fr(e,1,t),mt(e,t))}function Ve(e,t,n){if(e.tag===3)za(e,e,n);else for(;t!==null;){if(t.tag===3){za(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){e=qn(n,e),e=ea(t,e,1),t=on(t,e,1),e=ot(),t!==null&&(fr(t,1,e),mt(t,e));break}}t=t.return}}function Bd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(be&n)===n&&(He===4||He===3&&(be&130023424)===be&&500>Pe()-Lo?An(e,0):Ro|=n),mt(e,t)}function Da(e,t){t===0&&((e.mode&1)===0?t=1:(t=br,br<<=1,(br&130023424)===0&&(br=4194304)));var n=ot();e=Wt(e,t),e!==null&&(fr(e,t,n),mt(e,n))}function Vd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Da(e,n)}function Pd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(c(314))}r!==null&&r.delete(t),Da(e,n)}var $a;$a=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ft=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ft=!1,Ad(e,t,n);ft=(e.flags&131072)!==0}else ft=!1,De&&(t.flags&1048576)!==0&&yu(t,kl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Dl(e,t),e=t.pendingProps;var i=Yn(t,tt.current);Kn(t,n),i=so(null,t,r,e,i,n);var o=uo();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(r)?(o=!0,xl(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eo(t),i.updater=_l,t.stateNode=i,i._reactInternals=t,po(t,r,e,n),t=wo(null,t,r,!0,o,n)):(t.tag=0,De&&o&&Yi(t),it(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Dl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Yd(r),e=At(r,e),i){case 0:t=xo(null,t,r,e,n);break e;case 1:t=aa(null,t,r,e,n);break e;case 11:t=la(null,t,r,e,n);break e;case 14:t=ia(null,t,r,At(r.type,e),n);break e}throw Error(c(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:At(r,i),xo(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:At(r,i),aa(e,t,r,i,n);case 3:e:{if(ca(t),e===null)throw Error(c(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Nu(e,t),jl(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=qn(Error(c(423)),t),t=da(e,t,r,n,i);break e}else if(r!==i){i=qn(Error(c(424)),t),t=da(e,t,r,n,i);break e}else for(xt=en(t.stateNode.containerInfo.firstChild),gt=t,De=!0,Mt=null,n=Eu(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===i){t=Xt(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return Mu(t),e===null&&Qi(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,Fi(r,i)?u=null:o!==null&&Fi(r,o)&&(t.flags|=32),ua(e,t),it(e,t,u,n),t.child;case 6:return e===null&&Qi(t),null;case 13:return fa(e,t,n);case 4:return to(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Jn(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:At(r,i),la(e,t,r,i,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ie(Cl,r._currentValue),r._currentValue=u,o!==null)if(jt(o.value,u)){if(o.children===i.children&&!ct.current){t=Xt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var p=o.dependencies;if(p!==null){u=o.child;for(var N=p.firstContext;N!==null;){if(N.context===r){if(o.tag===1){N=Yt(-1,n&-n),N.tag=2;var X=o.updateQueue;if(X!==null){X=X.shared;var ne=X.pending;ne===null?N.next=N:(N.next=ne.next,ne.next=N),X.pending=N}}o.lanes|=n,N=o.alternate,N!==null&&(N.lanes|=n),qi(o.return,n,t),p.lanes|=n;break}N=N.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(c(341));u.lanes|=n,p=u.alternate,p!==null&&(p.lanes|=n),qi(u,n,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}it(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Kn(t,n),i=St(i),r=r(i),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,i=At(r,t.pendingProps),i=At(r.type,i),ia(e,t,r,i,n);case 15:return oa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:At(r,i),Dl(e,t),t.tag=1,dt(r)?(e=!0,xl(t)):e=!1,Kn(t,n),Zu(t,r,i),po(t,r,i,n),wo(null,t,r,!0,e,n);case 19:return ma(e,t,n);case 22:return sa(e,t,n)}throw Error(c(156,t.tag))};function Fa(e,t){return gs(e,t)}function Wd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,r){return new Wd(e,t,n,r)}function Uo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yd(e){if(typeof e=="function")return Uo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I)return 11;if(e===Y)return 14}return 2}function fn(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ql(e,t,n,r,i,o){var u=2;if(r=e,typeof e=="function")Uo(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case h:return Ln(n.children,i,o,t);case x:u=8,i|=8;break;case O:return e=Nt(12,n,t,i|2),e.elementType=O,e.lanes=o,e;case H:return e=Nt(13,n,t,i),e.elementType=H,e.lanes=o,e;case w:return e=Nt(19,n,t,i),e.elementType=w,e.lanes=o,e;case _:return Jl(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:u=10;break e;case z:u=9;break e;case I:u=11;break e;case Y:u=14;break e;case b:u=16,r=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=Nt(u,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Ln(e,t,n,r){return e=Nt(7,e,r,t),e.lanes=n,e}function Jl(e,t,n,r){return e=Nt(22,e,r,t),e.elementType=_,e.lanes=n,e.stateNode={isHidden:!1},e}function Bo(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function Vo(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xd(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Po(e,t,n,r,i,o,u,p,N){return e=new Xd(e,t,n,p,N),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Nt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eo(o),e}function Hd(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ua(e){if(!e)return nn;e=e._reactInternals;e:{if(wn(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(dt(n))return hu(e,n,t)}return t}function Ba(e,t,n,r,i,o,u,p,N){return e=Po(n,r,!0,e,i,o,u,p,N),e.context=Ua(null),n=e.current,r=ot(),i=cn(n),o=Yt(r,i),o.callback=t??null,on(n,o,i),e.current.lanes=i,fr(e,i,r),mt(e,r),e}function Gl(e,t,n,r){var i=t.current,o=ot(),u=cn(i);return n=Ua(n),t.context===null?t.context=n:t.pendingContext=n,t=Yt(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=on(i,t,u),e!==null&&(Ot(e,i,u,o),Tl(e,i,u)),u}function Kl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Va(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wo(e,t){Va(e,t),(e=e.alternate)&&Va(e,t)}var Pa=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yo(e){this._internalRoot=e}Zl.prototype.render=Yo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));Gl(e,t,null,null)},Zl.prototype.unmount=Yo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mn(function(){Gl(null,e,null,null)}),t[Ut]=null}};function Zl(e){this._internalRoot=e}Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ns();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zt.length&&t!==0&&t<Zt[n].priority;n++);Zt.splice(n,0,e),n===0&&Ms(e)}};function Xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wa(){}function Qd(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var X=Kl(u);o.call(X)}}var u=Ba(t,r,e,0,null,!1,!1,"",Wa);return e._reactRootContainer=u,e[Ut]=u.current,Tr(e.nodeType===8?e.parentNode:e),Mn(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var p=r;r=function(){var X=Kl(N);p.call(X)}}var N=Po(e,0,!1,null,null,!1,!1,"",Wa);return e._reactRootContainer=N,e[Ut]=N.current,Tr(e.nodeType===8?e.parentNode:e),Mn(function(){Gl(t,N,n,r)}),N}function bl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var p=i;i=function(){var N=Kl(u);p.call(N)}}Gl(t,u,e,i)}else u=Qd(n,t,e,i,r);return Kl(u)}Es=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dr(t.pendingLanes);n!==0&&(mi(t,n|1),mt(t,Pe()),(je&6)===0&&(tr=Pe()+500,rn()))}break;case 13:Mn(function(){var r=Wt(e,1);if(r!==null){var i=ot();Ot(r,e,1,i)}}),Wo(e,1)}},pi=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var n=ot();Ot(t,e,134217728,n)}Wo(e,134217728)}},Cs=function(e){if(e.tag===13){var t=cn(e),n=Wt(e,t);if(n!==null){var r=ot();Ot(n,e,t,r)}Wo(e,t)}},Ns=function(){return Le},Ts=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}},Re=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=yl(r);if(!i)throw Error(c(90));st(r),Ee(r,i)}}}break;case"textarea":pn(e,n);break;case"select":t=n.value,t!=null&&Oe(e,!!n.multiple,t,!1)}},cs=Do,ds=Mn;var Jd={usingClientEntryPoint:!1,Events:[Ar,Pn,yl,us,as,Do]},Wr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gd={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ps(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ei.isDisabled&&ei.supportsFiber)try{Zr=ei.inject(Gd),It=ei}catch{}}return pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jd,pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xo(t))throw Error(c(200));return Hd(e,t,null,n)},pt.createRoot=function(e,t){if(!Xo(e))throw Error(c(299));var n=!1,r="",i=Pa;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Po(e,1,!1,null,null,n,!1,r,i),e[Ut]=t.current,Tr(e.nodeType===8?e.parentNode:e),new Yo(t)},pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=ps(t),e=e===null?null:e.stateNode,e},pt.flushSync=function(e){return Mn(e)},pt.hydrate=function(e,t,n){if(!ql(t))throw Error(c(200));return bl(null,e,t,!0,n)},pt.hydrateRoot=function(e,t,n){if(!Xo(e))throw Error(c(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=Pa;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=Ba(t,null,e,1,n??null,i,!1,o,u),e[Ut]=t.current,Tr(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zl(t)},pt.render=function(e,t,n){if(!ql(t))throw Error(c(200));return bl(null,e,t,!1,n)},pt.unmountComponentAtNode=function(e){if(!ql(e))throw Error(c(40));return e._reactRootContainer?(Mn(function(){bl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1},pt.unstable_batchedUpdates=Do,pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ql(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return bl(e,t,n,!1,r)},pt.version="18.3.1-next-f1338f8080-20240426",pt}var Za;function sf(){if(Za)return Jo.exports;Za=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),Jo.exports=of(),Jo.exports}var qa;function uf(){if(qa)return ti;qa=1;var l=sf();return ti.createRoot=l.createRoot,ti.hydrateRoot=l.hydrateRoot,ti}var af=uf();const cf=l=>{const s=g.useRef(null),[c,f]=g.useState(null),[d,y]=g.useState(!1),[m,E]=g.useState({dx:0,dy:0}),[v,j]=g.useState(!1),[U,C]=g.useState(l.tokens),[k,R]=g.useState(l.tokens.toString()),[Q,S]=g.useState(!1),[D,$]=g.useState(!1),[Z,V]=g.useState(l.name||""),[M,q]=g.useState(!1),[W,h]=g.useState(l.capacity!==null?String(l.capacity):""),x={x:l.x,y:l.y};g.useEffect(()=>{C(l.tokens),R(l.tokens.toString())},[l.tokens]),g.useEffect(()=>{V(l.name||"")},[l.name]),g.useEffect(()=>{s.current&&(s.current.visualPosition=x)},[x]),g.useEffect(()=>{M||h(l.capacity!==null?String(l.capacity):"")},[l.capacity,M]),g.useEffect(()=>{const ee=Ce=>{var ie;if(!c||!s.current)return;const Ae=s.current.ownerSVGElement;if(!Ae)return;const Qe=Ae.createSVGPoint();Qe.x=Ce.clientX,Qe.y=Ce.clientY;const st=(ie=s.current.getScreenCTM())==null?void 0:ie.inverse();if(!st)return;const Be=Qe.matrixTransform(st);let oe=l.radius;switch(c){case"top":oe=Math.max(Math.abs(Be.y),10);break;case"bottom":oe=Math.max(Math.abs(Be.y),10);break;case"left":oe=Math.max(Math.abs(Be.x),10);break;case"right":oe=Math.max(Math.abs(Be.x),10);break;case"top-left":case"top-right":case"bottom-left":case"bottom-right":oe=Math.max(Math.sqrt(Be.x*Be.x+Be.y*Be.y),10);break}l.onUpdateSize(l.id,oe,"resizing")},ye=()=>{f(null),window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ye)};return c&&(window.addEventListener("mousemove",ee),window.addEventListener("mouseup",ye)),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ye)}},[c,l.id,l.onUpdateSize,l.radius]);const O=g.useCallback(ee=>{var Be,oe;if(l.arcMode||c)return;ee.stopPropagation();const ye=(Be=s.current)==null?void 0:Be.ownerSVGElement;if(!ye||!s.current)return;const Ce=ye.createSVGPoint();Ce.x=ee.clientX,Ce.y=ee.clientY;const Ae=Ce.matrixTransform((oe=ye.getScreenCTM())==null?void 0:oe.inverse()),Qe=Ae.x-l.x,st=Ae.y-l.y;E({dx:Qe,dy:st}),y(!0),l.onUpdatePosition(l.id,l.x,l.y,"start")},[c,l.arcMode,l.id,l.onUpdatePosition,l.x,l.y]);g.useEffect(()=>{if(!d)return;const ee=Ce=>{var ie;if(!s.current)return;const Ae=s.current.ownerSVGElement;if(!Ae)return;const Qe=Ae.createSVGPoint();Qe.x=Ce.clientX,Qe.y=Ce.clientY;const st=Qe.matrixTransform((ie=Ae.getScreenCTM())==null?void 0:ie.inverse()),Be=st.x-m.dx,oe=st.y-m.dy;l.onUpdatePosition(l.id,Be,oe,"dragging")},ye=()=>{l.onUpdatePosition(l.id,l.x,l.y,"end"),y(!1)};return window.addEventListener("mousemove",ee),window.addEventListener("mouseup",ye),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ye)}},[d,m,l]),g.useEffect(()=>{l.isSelected||S(!1)},[l.isSelected]);const F=ee=>{ee.stopPropagation(),l.onTypingChange(!0)},z=ee=>{ee.stopPropagation(),H()},I=ee=>{ee.stopPropagation(),ee.key==="Enter"?H():ee.key==="Escape"&&w()},H=()=>{let ee=parseInt(k,10);(isNaN(ee)||ee<0)&&(ee=l.tokens),C(ee),ee!==l.tokens&&l.onUpdateTokens(l.id,ee),S(!1),l.onTypingChange(!1)},w=()=>{R(l.tokens.toString()),S(!1),l.onTypingChange(!1)},Y=ee=>{ee.stopPropagation(),R(ee.target.value)},b=ee=>{ee.stopPropagation()},_=ee=>{l.arcMode||(ee.stopPropagation(),$(!0),l.onTypingChange(!0))},A=ee=>{V(ee.target.value)},J=ee=>{ee.key==="Enter"?G():ee.key==="Escape"&&T()},G=()=>{$(!1),l.onTypingChange(!1),l.onUpdateName&&l.onUpdateName(l.id,Z)},T=()=>{$(!1),l.onTypingChange(!1),V(l.name||"")},K=ee=>{ee.stopPropagation(),l.onSelect(l.id),q(!0),h(l.capacity!==null?String(l.capacity):""),l.onTypingChange(!0)},me=ee=>{h(ee.target.value)},ge=ee=>{ee.key==="Enter"?Ne():ee.key==="Escape"&&Se()},Se=()=>{q(!1),l.onTypingChange(!1),h(l.capacity!==null?String(l.capacity):"")},Ne=()=>{q(!1),l.onTypingChange(!1);const ee=W.trim();if(ee==="")l.onUpdatePlaceCapacity&&l.onUpdatePlaceCapacity(l.id,null);else{const ye=parseInt(ee,10);!isNaN(ye)&&ye>=0?l.onUpdatePlaceCapacity&&l.onUpdatePlaceCapacity(l.id,ye):Se()}};return a.jsxs("g",{ref:s,"data-id":l.id,transform:`translate(${x.x},${x.y})`,className:"petri-element place",onClick:ee=>{var Ae;ee.stopPropagation();const Ce=(Ae=ee.target.classList)==null?void 0:Ae.contains("place-circle");l.arcMode&&v&&Ce?l.onArcPortClick(l.id):l.arcMode||l.onSelect(l.id)},onDoubleClick:_,onMouseDown:O,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),style:l.arcMode&&v?{cursor:"pointer"}:void 0,children:[l.arcMode&&v&&a.jsx("circle",{r:l.radius+6,className:"place-arc-highlight"}),a.jsx("circle",{r:l.radius,className:`place-circle ${l.bounded?"bounded":""}`}),!Q&&a.jsx("text",{x:"0",y:l.showCapacityEditorMode?-10:0,className:"place-token-count",dominantBaseline:"central",onClick:ee=>{ee.stopPropagation(),l.arcMode||l.onSelect(l.id)},onDoubleClick:ee=>{ee.stopPropagation(),l.arcMode||S(!0)},style:l.arcMode?{pointerEvents:"none"}:void 0,children:U}),Q&&!l.arcMode&&a.jsx("g",{transform:`translate(0, ${l.showCapacityEditorMode?-10:0})`,children:a.jsx("foreignObject",{x:"-20",y:"-12",width:"40",height:"24",children:a.jsx("div",{onClick:b,onDoubleClick:ee=>ee.stopPropagation(),style:{width:"100%",height:"100%"},children:a.jsx("input",{type:"number",value:k,onChange:Y,className:"place-token-input",min:"0",onFocus:F,onBlur:z,onKeyDown:I,onClick:ee=>ee.stopPropagation(),autoFocus:!0,style:{width:"100%",height:"100%",boxSizing:"border-box",textAlign:"center"}})})})}),!D&&l.name&&a.jsx("text",{x:l.radius+6,y:-l.radius+10,className:"place-label",onDoubleClick:ee=>{ee.stopPropagation(),_(ee)},style:l.arcMode?{pointerEvents:"none"}:void 0,children:l.name}),l.showCapacityEditorMode&&!M&&a.jsxs("text",{x:"0",y:"30",className:"place-capacity-label",fill:"#fff",onDoubleClick:K,onClick:ee=>{ee.stopPropagation()},textAnchor:"middle",style:l.arcMode?{pointerEvents:"none"}:void 0,children:[a.jsx("title",{children:"Max Tokens (Double-click to edit, empty=unbounded)"}),`<= ${l.capacity!==null?l.capacity:"n"}`]}),l.showCapacityEditorMode&&M&&a.jsx("g",{transform:"translate(0, 25)",children:a.jsx("foreignObject",{x:"-20",y:"-12",width:"40",height:"20",children:a.jsx("input",{type:"number",value:W,onChange:me,onKeyDown:ge,onBlur:Ne,className:"place-capacity-input",autoFocus:!0,placeholder:"n",min:"0",style:{width:"100%",height:"100%",boxSizing:"border-box"}})})}),D&&a.jsx("foreignObject",{x:l.radius+6,y:-l.radius+6,width:"150",height:"25",children:a.jsx("input",{type:"text",value:Z,onChange:A,className:"place-name-input",autoFocus:!0,onBlur:G,onKeyDown:J})}),l.isSelected&&!l.arcMode&&a.jsxs(a.Fragment,{children:[a.jsx("rect",{x:-l.radius,y:-l.radius,width:2*l.radius,height:2*l.radius,className:"place-bounding-box"}),a.jsx("circle",{cx:-l.radius,cy:-l.radius,r:"8",className:"place-resize-handle top-left",onMouseDown:ee=>{ee.stopPropagation(),f("top-left")}}),a.jsx("circle",{cx:l.radius,cy:-l.radius,r:"8",className:"place-resize-handle top-right",onMouseDown:ee=>{ee.stopPropagation(),f("top-right")}}),a.jsx("circle",{cx:-l.radius,cy:l.radius,r:"8",className:"place-resize-handle bottom-left",onMouseDown:ee=>{ee.stopPropagation(),f("bottom-left")}}),a.jsx("circle",{cx:l.radius,cy:l.radius,r:"8",className:"place-resize-handle bottom-right",onMouseDown:ee=>{ee.stopPropagation(),f("bottom-right")}})]})]})},df=l=>{const s=g.useRef(null),[c,f]=g.useState(null),[d,y]=g.useState(!1),[m,E]=g.useState({dx:0,dy:0}),[v,j]=g.useState(!1),[U,C]=g.useState(l.width),[k,R]=g.useState(l.height),[Q,S]=g.useState(l.height===0?1:l.width/l.height),[D,$]=g.useState(!1),[Z,V]=g.useState(l.name||""),M={x:l.x,y:l.y},q=H=>{l.arcMode||l.conflictResolutionMode||(H.stopPropagation(),$(!0),l.onTypingChange&&l.onTypingChange(!0))},W=H=>{V(H.target.value)},h=H=>{H.key==="Enter"?x():H.key==="Escape"&&O()},x=()=>{$(!1),l.onTypingChange&&l.onTypingChange(!1),l.onUpdateName&&l.onUpdateName(l.id,Z)},O=()=>{$(!1),l.onTypingChange&&l.onTypingChange(!1),V(l.name||"")},F=g.useCallback(H=>{var J,G;if(l.arcMode||c)return;H.stopPropagation();const w=(J=s.current)==null?void 0:J.ownerSVGElement;if(!w||!s.current)return;const Y=w.createSVGPoint();Y.x=H.clientX,Y.y=H.clientY;const b=Y.matrixTransform((G=w.getScreenCTM())==null?void 0:G.inverse()),_=b.x-l.x,A=b.y-l.y;E({dx:_,dy:A}),y(!0),l.onUpdatePosition(l.id,l.x,l.y,"start")},[c,l.arcMode,l.id,l.onUpdatePosition,l.x,l.y]),z=(H,w)=>{w.stopPropagation(),f(H),C(l.width),R(l.height),S(l.height===0?1:l.width/l.height)},I=H=>{H.stopPropagation(),l.isConflicting&&l.onConflictingTransitionSelect&&l.onConflictingTransitionSelect(l.id)};return g.useEffect(()=>{V(l.name||"")},[l.name]),g.useEffect(()=>{if(!d)return;const H=Y=>{var T;if(!s.current)return;const b=s.current.ownerSVGElement;if(!b)return;const _=b.createSVGPoint();_.x=Y.clientX,_.y=Y.clientY;const A=_.matrixTransform((T=b.getScreenCTM())==null?void 0:T.inverse()),J=A.x-m.dx,G=A.y-m.dy;l.onUpdatePosition(l.id,J,G,"dragging")},w=()=>{l.onUpdatePosition(l.id,l.x,l.y,"end"),y(!1)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",w)}},[d,m,l]),g.useEffect(()=>{const H=Y=>{var Ce;if(!c||!s.current)return;const b=s.current.ownerSVGElement;if(!b)return;const _=b.createSVGPoint();_.x=Y.clientX,_.y=Y.clientY;const A=(Ce=s.current.getScreenCTM())==null?void 0:Ce.inverse();if(!A)return;const J=_.matrixTransform(A);let G=U,T=k;const K=J.x,me=J.y;let ge=1,Se=1;c==="top-left"?(ge=-K/(U/2),Se=-me/(k/2)):c==="top-right"?(ge=K/(U/2),Se=-me/(k/2)):c==="bottom-left"?(ge=-K/(U/2),Se=me/(k/2)):c==="bottom-right"&&(ge=K/(U/2),Se=me/(k/2));const Ne=Math.abs(ge),ee=Math.abs(Se);let ye;Ne>ee?ye=ge:ye=Se,G=U*Math.abs(ye),T=G/Q,G<20&&(G=20,T=20/Q),T<20&&(T=20,G=20*Q),l.onUpdateSize(l.id,G,T,"resizing")},w=()=>{f(null),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",w)};return c&&(window.addEventListener("mousemove",H),window.addEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",w)}},[c,l,U,k,Q]),g.useEffect(()=>{s.current&&(s.current.visualPosition=M)},[M]),a.jsxs("g",{ref:s,"data-id":l.id,transform:`translate(${M.x},${M.y})`,className:"petri-element transition",onClick:H=>{if(H.stopPropagation(),l.conflictResolutionMode&&l.isConflicting){I(H);return}l.arcMode&&v?l.onArcPortClick(l.id):l.onSelect(l.id)},onDoubleClick:q,onMouseDown:F,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),style:l.isConflicting?{cursor:"pointer"}:l.arcMode&&v?{cursor:"pointer"}:void 0,children:[l.arcMode&&v&&a.jsx("rect",{x:-l.width/2-6,y:-l.height/2-6,width:l.width+12,height:l.height+12,rx:10,className:"transition-arc-highlight"}),a.jsx("rect",{x:-l.width/2,y:-l.height/2,width:l.width,height:l.height,rx:"8",className:`transition-rectangle ${l.isSelected?"selected":l.conflictResolutionMode&&l.isConflicting?"conflicting":l.enabled&&!l.conflictResolutionMode?"enabled":""} ${l.isFired?"transition-fired":""}`}),!D&&a.jsx("text",{x:"0",y:"0",className:"transition-label",children:l.name}),D&&a.jsx("foreignObject",{x:-54,y:-13,width:"120",height:"30",children:a.jsx("input",{type:"text",value:Z,onChange:W,className:"transition-name-input",autoFocus:!0,onBlur:x,onKeyDown:h})}),l.isSelected&&!l.arcMode&&a.jsxs(a.Fragment,{children:[a.jsx("rect",{x:-l.width/2,y:-l.height/2,width:l.width,height:l.height,className:"transition-bounding-box"}),a.jsx("circle",{cx:-l.width/2,cy:-l.height/2,r:8,className:"transition-resize-handle top-left",onMouseDown:H=>z("top-left",H)}),a.jsx("circle",{cx:l.width/2,cy:-l.height/2,r:8,className:"transition-resize-handle top-right",onMouseDown:H=>z("top-right",H)}),a.jsx("circle",{cx:-l.width/2,cy:l.height/2,r:8,className:"transition-resize-handle bottom-left",onMouseDown:H=>z("bottom-left",H)}),a.jsx("circle",{cx:l.width/2,cy:l.height/2,r:8,className:"transition-resize-handle bottom-right",onMouseDown:H=>z("bottom-right",H)})]})]})};function li(l,s){const c={x:l.x,y:l.y};return"radius"in l?ff(c,l.radius,s):"width"in l?hf(c,l.width,l.height,s):(console.warn("Could not determine element type for anchor point calculation:",l),c)}function ff(l,s,c){const f=c.x-l.x,d=c.y-l.y,y=Math.atan2(d,f);return{x:l.x+s*Math.cos(y),y:l.y+s*Math.sin(y)}}function hf(l,s,c,f){const d=f.x-l.x,y=f.y-l.y,m=s/2,E=c/2;if(d===0&&y===0)return l;const v=m/Math.abs(d),j=E/Math.abs(y),U=Math.min(v,j);return{x:l.x+d*U,y:l.y+y*U}}const mf=l=>{const s=g.useMemo(()=>{const I=l.allArcs.filter(G=>{const T=[G.incomingId,G.outgoingId].sort().join("-"),K=[l.incomingId,l.outgoingId].sort().join("-");return T===K}),H=I.length;if(H<=1)return 0;I.sort((G,T)=>G.id.localeCompare(T.id));const w=I.findIndex(G=>G.id===l.id);if(w===-1)return 0;let _=(-(H-1)/2+w)*18;const J=[l.incomingId,l.outgoingId].sort()[0];return l.incomingId!==J&&(_*=-1),_},[l.allArcs,l.id,l.incomingId,l.outgoingId]),c={x:l.source.x,y:l.source.y},f={x:l.target.x,y:l.target.y},d=li(l.source,f),y=li(l.target,c),m=y.x-d.x,E=y.y-d.y,v=Math.sqrt(m*m+E*E),j=v>0?m/v:0,C=-(v>0?E/v:0),k=j;s!==0&&v>0&&(d.x+=C*s,d.y+=k*s,y.x+=C*s,y.y+=k*s);let R=d.x,Q=d.y,S=y.x,D=y.y;const $=S-R,Z=D-Q,V=Math.sqrt($*$+Z*Z),M=V>0?$/V:0,q=V>0?Z/V:0,W="url(#arrow)";l.type==="BIDIRECTIONAL"?(R=d.x+M*6,Q=d.y+q*6,S=y.x-M*6,D=y.y-q*6):l.type==="REGULAR"?(S=y.x-M*6,D=y.y-q*6):l.type==="INHIBITOR"&&(S=y.x-M*16,D=y.y-q*16);let h=null,x=null;if(s!==0&&v>0){const z=(d.x+y.x)/2,I=(d.y+y.y)/2;h=z+C*s*.4,x=I+k*s*.4}const O=h!==null&&x!==null?`M ${R},${Q} Q ${h},${x} ${S},${D}`:`M ${R},${Q} L ${S},${D}`,F=h!==null&&x!==null?`M ${d.x},${d.y} Q ${h},${x} ${y.x},${y.y}`:`M ${d.x},${d.y} L ${y.x},${y.y}`;return a.jsxs("g",{onClick:z=>{z.stopPropagation(),l.onSelect(l.id)},children:[a.jsx("path",{d:F,fill:"none",stroke:"transparent",strokeWidth:"20",pointerEvents:"stroke"}),a.jsx("path",{d:O,fill:"none",stroke:"#fff",strokeWidth:"3",markerEnd:l.type==="INHIBITOR"?void 0:W,markerStart:l.type==="BIDIRECTIONAL"?W:void 0}),l.type==="INHIBITOR"?a.jsx("circle",{cx:S,cy:D,r:8,fill:"#ff3333",stroke:"#fff",strokeWidth:"2"}):null,l.isSelected&&a.jsx("path",{d:O,fill:"none",stroke:"#007bff",strokeWidth:"2",strokeDasharray:"8,8"})]})},Ze=50,pf=(l,s)=>({id:l,title:s,places:[],transitions:[],arcs:[],deterministicMode:!1,conflictResolutionMode:!1,conflictingTransitions:[],selectedElements:[],history:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:1,panOffset:{x:0,y:0}}),yf=({viewBox:l})=>{const s=[],f={minX:-800,maxX:800,minY:-900,maxY:900};s.push(a.jsx("rect",{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY,fill:"#141414",pointerEvents:"none"},"grid-background"));const d=Math.max(f.minX,Math.floor((l.x-300)/Ze)*Ze),y=Math.min(f.maxX,Math.ceil((l.x+l.w+300)/Ze)*Ze),m=Math.max(f.minY,Math.floor((l.y-300)/Ze)*Ze),E=Math.min(f.maxY,Math.ceil((l.y+l.h+300)/Ze)*Ze);for(let v=d;v<=y;v+=Ze)s.push(a.jsx("line",{x1:v,y1:Math.max(l.y-300,f.minY),x2:v,y2:Math.min(l.y+l.h+300,f.maxY),stroke:"#222222",strokeWidth:"1",vectorEffect:"non-scaling-stroke"},`v-${v}`));for(let v=m;v<=E;v+=Ze)s.push(a.jsx("line",{x1:Math.max(l.x-300,f.minX),y1:v,x2:Math.min(l.x+l.w+300,f.maxX),y2:v,stroke:"#222222",strokeWidth:"1",vectorEffect:"non-scaling-stroke"},`h-${v}`));return s.push(a.jsx("rect",{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY,fill:"none",stroke:"#666666",strokeWidth:"2",opacity:"0.5"},"boundary")),a.jsx("g",{className:"grid-layer",children:s})},gf=({selectedTool:l,selectedElements:s,places:c,transitions:f,arcType:d,mousePosition:y})=>{if(l!=="ARC"||s.length!==1||y===null)return null;const m=s[0],E=c.find(h=>h.id===m)||f.find(h=>h.id===m);if(!E)return null;const v=y,j=c.find(h=>Math.sqrt(Math.pow(h.x-v.x,2)+Math.pow(h.y-v.y,2))<=h.radius&&h.id!==m)||f.find(h=>{const x=h.width/2,O=h.height/2;return v.x>=h.x-x&&v.x<=h.x+x&&v.y>=h.y-O&&v.y<=h.y+O&&h.id!==m}),U=j?{x:j.x,y:j.y}:v,C=li(E,U),k=j?li(j,E):U,R=k.x-C.x,Q=k.y-C.y,S=Math.sqrt(R*R+Q*Q);if(S===0)return null;const D=R/S,$=Q/S;let Z=C.x,V=C.y,M=k.x,q=k.y;const W=d==="INHIBITOR"?void 0:"url(#arrow)";return d==="BIDIRECTIONAL"?(Z=C.x+D*6,V=C.y+$*6,M=k.x-D*6,q=k.y-$*6):d==="REGULAR"?(M=k.x-D*6,q=k.y-$*6):d==="INHIBITOR"&&(M=k.x-D*15,q=k.y-$*15),a.jsxs("g",{className:"arc-preview",pointerEvents:"none",children:[a.jsx("line",{x1:Z,y1:V,x2:M,y2:q,stroke:"#fff",strokeWidth:"3",markerEnd:W,markerStart:d==="BIDIRECTIONAL"?"url(#arrow)":void 0}),d==="INHIBITOR"&&a.jsx("circle",{cx:M,cy:q,r:8,fill:"#ff3333",stroke:"#007bff",strokeWidth:"1"})]})},xf=()=>a.jsxs("defs",{children:[a.jsx("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:a.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fff"})}),a.jsx("marker",{id:"bidirectional",viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:a.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fff"})})]});function On(l,s,c){if(!c)return console.error("No SVG element found"),{x:0,y:0};const f=c.createSVGPoint();f.x=l,f.y=s;const d=c.getScreenCTM();if(!d)return{x:0,y:0};if(!d)return console.error("No CTM found"),{x:0,y:0};const y=f.matrixTransform(d.inverse());return{x:y.x,y:y.y}}function ba(l,s){const c=Math.round(l/Ze)*Ze,f=Math.round(s/Ze)*Ze;return{x:c,y:f}}const wf=(l,s)=>({zoomLevel:s>0&&l.w>0?s/l.w:1,panOffset:{x:l.x,y:l.y}}),ec=(l,s,c,f)=>{const d=Math.max(l,1e-4),y=c/d,m=f>0?y/f:y;return{x:s.x,y:s.y,w:y,h:m}};function vf(l,s){const{minZoomFactor:c=.5,maxZoomFactor:f=4,zoomSensitivity:d=.04,initialZoomLevel:y=1,initialPanOffset:m={x:0,y:0},onViewChange:E,baseWidth:v=1500}=s,j=v?v/(v*9/16):16/9,U=ec(y,m,v,j),[C,k]=g.useState(U),[R,Q]=g.useState(!1),[S,D]=g.useState(0),[$,Z]=g.useState(0);g.useEffect(()=>{const x=ec(y,m,v,j);(x.x!==C.x||x.y!==C.y||x.w!==C.w||x.h!==C.h)&&k(x)},[y,m,v,j]);const V=g.useCallback(x=>{x.target===x.currentTarget&&(x.stopPropagation(),Q(!0),D(x.clientX),Z(x.clientY))},[]),M=g.useCallback(()=>{Q(!1)},[]),q=g.useCallback(()=>{Q(!1)},[]),W=g.useCallback(x=>{if(!R||!l.current)return;const O=x.clientX-S,F=x.clientY-$,z=l.current.getBoundingClientRect(),I=z.width>0?C.w/z.width:1,H=z.height>0?C.h/z.height:1,w=O*I,Y=F*H,b={...C,x:C.x-w,y:C.y-Y};k(b),E&&E(wf(b,v)),D(x.clientX),Z(x.clientY)},[R,S,$,C,l,E,v]),h=g.useCallback(()=>{},[]);return g.useEffect(()=>{const x=l.current;if(!x)return;const O=F=>{F.preventDefault();const z=l.current;if(!z)return;const I=F.deltaY<0?-1:1,H=v>0&&C.w>0?v/C.w:1;let w=H*(1-I*d);if(w=Math.max(c,Math.min(f,w)),w===H)return;const Y=On(F.clientX,F.clientY,z),b=C.h>0?C.w/C.h:j,_=v/w,A=b>0?_/b:_,J=C.w!==0?(Y.x-C.x)/C.w:0,G=C.h!==0?(Y.y-C.y)/C.h:0,T=Y.x-J*_,K=Y.y-G*A;k({x:T,y:K,w:_,h:A}),E&&E({zoomLevel:w,panOffset:{x:T,y:K}})};return x.addEventListener("wheel",O),()=>{x.removeEventListener("wheel",O)}},[l,C,v,d,c,f,j,E,k]),{viewBox:C,setViewBox:k,isPanning:R,handleMouseDown:V,handleMouseUp:M,handleMouseLeave:q,handlePan:W,handleZoom:h}}function kf(l,s){const{enabled:c}=s,[f,d]=g.useState(null),y=g.useCallback((E,v)=>{if(!l.current)return;const j=On(E,v,l.current);d(j)},[l]);g.useEffect(()=>{if(!c||!l.current)return;const E=v=>{y(v.clientX,v.clientY)};return window.addEventListener("mousemove",E),()=>{window.removeEventListener("mousemove",E)}},[c,l,y]);const m=g.useCallback(E=>{d(E)},[]);return{mousePosition:f,setMousePosition:m,updateMousePosition:y}}const Sf=({svgRef:l,places:s,transitions:c,onSelectionChange:f})=>{const[d,y]=g.useState({startX:0,startY:0,currentX:0,currentY:0,active:!1}),[m,E]=g.useState(!1),[v,j]=g.useState(!1),U=g.useCallback((Q,S)=>l.current?On(Q,S,l.current):{x:0,y:0},[l]),C=g.useCallback(Q=>{if(j(!1),!Q.shiftKey||!l.current||Q.button!==0)return;Q.stopPropagation();const{x:S,y:D}=U(Q.clientX,Q.clientY);E(!0),y({startX:S,startY:D,currentX:S,currentY:D,active:!0})},[l,U]),k=g.useCallback(Q=>{if(!m||!l.current)return;const{x:S,y:D}=U(Q.clientX,Q.clientY);y($=>({...$,currentX:S,currentY:D}))},[m,l,U]),R=g.useCallback(Q=>{if(!m||!l.current)return;Q==null||Q.stopPropagation(),j(!0);const S=d;E(!1),y(q=>({...q,active:!1}));const D=Math.min(S.startX,S.currentX),$=Math.min(S.startY,S.currentY),Z=Math.abs(S.startX-S.currentX),V=Math.abs(S.startY-S.currentY),M=[...s.filter(q=>q.x>=D&&q.x<=D+Z&&q.y>=$&&q.y<=$+V).map(q=>q.id),...c.filter(q=>q.x+q.width/2>=D&&q.x+q.width/2<=D+Z&&q.y+q.height/2>=$&&q.y+q.height/2<=$+V).map(q=>q.id)];f(M)},[m,l,s,c,f,d]);return g.useEffect(()=>{if(v){const Q=setTimeout(()=>{j(!1)},0);return()=>clearTimeout(Q)}},[v]),g.useEffect(()=>{const Q=l.current;if(!Q)return;const S=Z=>C(Z),D=Z=>k(Z),$=Z=>R(Z);return Q.addEventListener("mousedown",S),window.addEventListener("mousemove",D),window.addEventListener("mouseup",$),()=>{Q.removeEventListener("mousedown",S),window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",$)}},[l,C,k,R]),{selectionRect:d.active?{x:Math.min(d.startX,d.currentX),y:Math.min(d.startY,d.currentY),width:Math.abs(d.startX-d.currentX),height:Math.abs(d.startY-d.currentY)}:null,isSelecting:m,didJustSelect:v}};function Ef(l){const{snapDistance:s=8,enabled:c=!0}=l,[f,d]=g.useState([]),y=g.useCallback(j=>{if("radius"in j){const U=j.radius;return{id:j.id,left:j.x-U,right:j.x+U,top:j.y-U,bottom:j.y+U,centerX:j.x,centerY:j.y}}else{const U=j.width/2,C=j.height/2;return{id:j.id,left:j.x-U,right:j.x+U,top:j.y-C,bottom:j.y+C,centerX:j.x,centerY:j.y}}},[]),m=g.useCallback((j,U,C)=>{if(!c)return{snapPosition:null,activeGuides:[],isSnapping:!1};const k={...j,x:C.x,y:C.y},R=y(k),S=U.filter(M=>M.id!==j.id).map(y),D=[];let $=null,Z=null;for(const M of S)Math.abs(R.top-M.top)<=s&&(Z=M.top+(R.centerY-R.top),D.push({id:`horizontal-top-${M.id}`,type:"horizontal",position:M.top,startExtent:Math.min(R.left,M.left)-20,endExtent:Math.max(R.right,M.right)+20,alignmentType:"edge-top"})),Math.abs(R.bottom-M.bottom)<=s&&(Z=M.bottom-(R.bottom-R.centerY),D.push({id:`horizontal-bottom-${M.id}`,type:"horizontal",position:M.bottom,startExtent:Math.min(R.left,M.left)-20,endExtent:Math.max(R.right,M.right)+20,alignmentType:"edge-bottom"})),Math.abs(R.centerY-M.centerY)<=s&&(Z=M.centerY,D.push({id:`horizontal-center-${M.id}`,type:"horizontal",position:M.centerY,startExtent:Math.min(R.left,M.left)-20,endExtent:Math.max(R.right,M.right)+20,alignmentType:"center-y"}));for(const M of S)Math.abs(R.left-M.left)<=s&&($=M.left+(R.centerX-R.left),D.push({id:`vertical-left-${M.id}`,type:"vertical",position:M.left,startExtent:Math.min(R.top,M.top)-20,endExtent:Math.max(R.bottom,M.bottom)+20,alignmentType:"edge-left"})),Math.abs(R.right-M.right)<=s&&($=M.right-(R.right-R.centerX),D.push({id:`vertical-right-${M.id}`,type:"vertical",position:M.right,startExtent:Math.min(R.top,M.top)-20,endExtent:Math.max(R.bottom,M.bottom)+20,alignmentType:"edge-right"})),Math.abs(R.centerX-M.centerX)<=s&&($=M.centerX,D.push({id:`vertical-center-${M.id}`,type:"vertical",position:M.centerX,startExtent:Math.min(R.top,M.top)-20,endExtent:Math.max(R.bottom,M.bottom)+20,alignmentType:"center-x"}));const V=$!==null||Z!==null?{x:$??C.x,y:Z??C.y}:null;return{snapPosition:V,activeGuides:D,isSnapping:V!==null}},[c,s,y]),E=g.useCallback((j,U,C)=>{if(!j||!C)return d([]),{snapPosition:null,activeGuides:[],isSnapping:!1};const k=m(j,U,C);return d(k.activeGuides),k},[m]),v=g.useCallback(()=>{d([])},[]);return{activeGuides:f,updateAlignments:E,clearGuides:v,findAlignments:m}}const Cf=({guides:l,viewBox:s})=>l.length===0?null:a.jsx("g",{className:"alignment-guides-layer",style:{pointerEvents:"none"},children:l.map(c=>{const f=c.type==="horizontal",d=c.alignmentType.includes("center"),y=f?Math.min(c.startExtent,s.x-50):Math.min(c.startExtent,s.y-50),m=f?Math.max(c.endExtent,s.x+s.w+50):Math.max(c.endExtent,s.y+s.h+50);return a.jsx("line",{x1:f?y:c.position,y1:f?c.position:y,x2:f?m:c.position,y2:f?c.position:m,stroke:"#0074D9",strokeWidth:"1",strokeDasharray:d?"5,3":"none",opacity:"0.8",className:`alignment-guide ${c.type} ${c.alignmentType}`},c.id)})}),Zo=({arcPath:l,progress:s,type:c,isBackground:f})=>{var m,E;const d=rr.useRef(null),y=()=>{if(!d.current)return null;try{const v=d.current.getTotalLength();if(isNaN(v)||v===0)return null;const j=d.current.getPointAtLength(v*s);return{x:j.x,y:j.y}}catch(v){return console.error("Error calculating token position:",v),null}};return c==="produce"&&s===0?null:a.jsxs("g",{children:[a.jsx("path",{ref:d,d:l,style:{visibility:"hidden"}}),d.current&&a.jsx("circle",{cx:(m=y())==null?void 0:m.x,cy:(E=y())==null?void 0:E.y,r:10,fill:f?"#f0f0f0":"#ffffff",stroke:f?"#f0f0f0":"#ffffff",strokeWidth:1.5})]})},ni={SOURCE_MASK_THRESHOLD:.4,MAIN_PATH_START:0,MAIN_PATH_END:.89,TARGET_MASK_THRESHOLD:.6},Nf=({places:l,transitions:s,tokenAnimator:c})=>{const[,f]=rr.useReducer(m=>m+1,0),d=m=>"radius"in m;rr.useEffect(()=>{const m=()=>{f(),requestAnimationFrame(m)},E=requestAnimationFrame(m);return()=>cancelAnimationFrame(E)},[]);const y=c.getAnimationState();return a.jsxs(a.Fragment,{children:[a.jsxs("defs",{children:[l.map(m=>a.jsxs("mask",{id:`node-mask-${m.id}`,children:[a.jsx("rect",{x:"-5000",y:"-5000",width:"10000",height:"10000",fill:"white"}),a.jsx("circle",{cx:m.x,cy:m.y,r:m.radius+2,fill:"black"})]},`mask-${m.id}`)),s.map(m=>a.jsxs("mask",{id:`node-mask-${m.id}`,children:[a.jsx("rect",{x:"-5000",y:"-5000",width:"10000",height:"10000",fill:"white"}),a.jsx("rect",{x:m.x-m.width/2-2,y:m.y-m.height/2-2,width:m.width+4,height:m.height+4,rx:"8",fill:"black"})]},`mask-${m.id}`))]}),y.map((m,E)=>{const v=[...l,...s].find(R=>R.id===m.sourceId),j=[...l,...s].find(R=>R.id===m.targetId);if(!v||!j)return null;const U=m.progress<ni.SOURCE_MASK_THRESHOLD,C=m.progress>=ni.MAIN_PATH_START&&m.progress<=ni.MAIN_PATH_END,k=m.progress>ni.TARGET_MASK_THRESHOLD;return a.jsxs("g",{children:[U&&a.jsx("g",{mask:`url(#node-mask-${v.id})`,children:a.jsx(Zo,{arcPath:m.arcPath,progress:m.progress,type:m.type,isBackground:!0})}),a.jsxs("g",{children:[a.jsx("defs",{children:a.jsxs("mask",{id:`path-mask-${E}`,children:[a.jsx("rect",{x:"-5000",y:"-5000",width:"10000",height:"10000",fill:"white"}),U&&(d(v)?a.jsx("circle",{cx:v.x,cy:v.y,r:v.radius+2,fill:"black"}):a.jsx("rect",{x:v.x-v.width/2-2,y:v.y-v.height/2-2,width:v.width+4,height:v.height+4,rx:"8",fill:"black"})),k&&(d(j)?a.jsx("circle",{cx:j.x,cy:j.y,r:j.radius+2,fill:"black"}):a.jsx("rect",{x:j.x-j.width/2-2,y:j.y-j.height/2-2,width:j.width+4,height:j.height+4,rx:"8",fill:"black"}))]})}),C&&a.jsx("g",{mask:`url(#path-mask-${E})`,children:a.jsx(Zo,{arcPath:m.arcPath,progress:m.progress,type:m.type,isBackground:!1})})]}),k&&a.jsx("g",{mask:`url(#node-mask-${j.id})`,children:a.jsx(Zo,{arcPath:m.arcPath,progress:m.progress,type:m.type,isBackground:!0})})]},`${m.sourceId}-${m.targetId}-${E}`)})]})},Tf=({onChange:l})=>a.jsxs("div",{style:{position:"absolute",top:"740px",left:"10px",display:"flex",alignItems:"center",gap:"10px",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",fontWeight:500},children:[a.jsx("span",{children:"Slow"}),a.jsx("input",{type:"range",min:"0.2",max:"3",step:"0.01",defaultValue:"1.5",onChange:s=>{const f=3-parseFloat(s.target.value);l(f)},className:"speed-slider"}),a.jsx("span",{children:"Fast"})]}),jf=l=>{const s=g.useRef(null),[c,f]=g.useState(!1),[d,y]=g.useState({width:1100,height:900}),[m,E]=g.useState(null),[v,j]=g.useState(null),U=1500,C=16/9,k=g.useMemo(()=>{const w=Math.max(l.zoomLevel,1e-4),Y=U/w,b=Y/C;return{x:l.panOffset.x,y:l.panOffset.y,w:Y,h:b}},[l.zoomLevel,l.panOffset.x,l.panOffset.y]),R=vf(s,{initialZoomLevel:l.zoomLevel,initialPanOffset:l.panOffset,onViewChange:l.onViewChange}),Q=kf(s,{enabled:l.selectedTool==="ARC"&&l.selectedElements.length>0}),[S,D]=g.useState({}),{selectionRect:$,isSelecting:Z,didJustSelect:V}=Sf({svgRef:s,places:l.places,transitions:l.transitions,onSelectionChange:l.onMultiSelectElement}),M=Ef({snapDistance:24,enabled:!0}),q=g.useMemo(()=>{const w=new Map;return l.places.forEach(Y=>w.set(Y.id,Y)),w},[l.places]),W=g.useMemo(()=>{const w=new Map;return l.transitions.forEach(Y=>w.set(Y.id,Y)),w},[l.transitions]);g.useEffect(()=>{const w=()=>{const Y=document.querySelector(".canvas-container");if(Y){const{width:b,height:_}=Y.getBoundingClientRect();y({width:b,height:_})}};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),g.useEffect(()=>{const w=Y=>{window.lastMousePosition={clientX:Y.clientX,clientY:Y.clientY}};return window.addEventListener("mousemove",w),()=>{window.removeEventListener("mousemove",w)}},[]),g.useEffect(()=>{if(l.selectedTool==="ARC"&&l.selectedElements.length===1&&window.lastMousePosition&&s.current){const w=On(window.lastMousePosition.clientX,window.lastMousePosition.clientY,s.current);Q.setMousePosition(w)}},[l.selectedTool,l.selectedElements.length,Q.setMousePosition,s]),g.useEffect(()=>{const w=b=>{b.key==="Shift"&&f(!0)},Y=b=>{b.key==="Shift"&&f(!1)};return window.addEventListener("keydown",w),window.addEventListener("keyup",Y),()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",Y)}},[]);const h=g.useCallback(w=>{if(w.preventDefault(),!V&&(!w.shiftKey&&w.target===w.currentTarget&&l.selectedElements.length>0&&l.onSelectElement(""),!w.shiftKey&&w.target===w.currentTarget&&(l.selectedTool==="PLACE"||l.selectedTool==="TRANSITION"||l.selectedTool==="ARC"))){if(!s.current)return;const Y=On(w.clientX,w.clientY,s.current),b=ba(Y.x,Y.y);l.onCanvasClick(b.x,b.y)}},[l.selectedElements,l.onSelectElement,l.onCanvasClick,l.selectedTool,V]),x=w=>{w.preventDefault(),w.dataTransfer.dropEffect="move";let Y=w.dataTransfer.getData("application/petri-item");if(!Y&&v?Y=v:!Y&&window.currentToolbarDragType&&(Y=window.currentToolbarDragType),!Y||Y!=="PLACE"&&Y!=="TRANSITION"||!s.current)return;const b=On(w.clientX,w.clientY,s.current),_=Y==="PLACE"?{id:"temp-preview",x:b.x,y:b.y,radius:46,tokens:0,name:"",capacity:null,type:"place",bounded:!1}:{id:"temp-preview",x:b.x,y:b.y,width:120,height:54,name:"",type:"transition",enabled:!0,arcIds:[]},A=[...l.places,...l.transitions],G=M.updateAlignments(_,A,{x:b.x,y:b.y}).snapPosition||{x:b.x,y:b.y};E({type:Y,position:b,snappedPosition:G})},O=g.useCallback(w=>{w.preventDefault(),w.dataTransfer.dropEffect="move";const Y=w.dataTransfer.getData("application/petri-item")||window.currentToolbarDragType;(Y==="PLACE"||Y==="TRANSITION")&&j(Y)},[]),F=g.useCallback(w=>{w.preventDefault();const Y=w.dataTransfer.getData("application/petri-item")||v||window.currentToolbarDragType;if(!Y||!s.current)return;let b;m?b=m.snappedPosition:(b=On(w.clientX,w.clientY,s.current),b=ba(b.x,b.y)),E(null),j(null),M.clearGuides(),Y==="PLACE"?l.onSelectTool("PLACE"):Y==="TRANSITION"&&l.onSelectTool("TRANSITION"),l.onCanvasClick(b.x,b.y)},[l.onSelectTool,l.onCanvasClick,m,v,M]),z=g.useCallback(w=>{w.currentTarget.contains(w.relatedTarget)||(E(null),j(null),M.clearGuides())},[M]),I=w=>{var Y;(Y=l.tokenAnimator)==null||Y.setSpeedMultiplier(w)},H=g.useCallback((w,Y,b,_)=>{const A=[...l.places,...l.transitions],J=A.find(T=>T.id===w),G=l.selectedElements.length>1;if(_==="start")M.clearGuides(),l.onUpdateElementPosition(w,Y,b,_);else if(_==="dragging"&&J&&!G){const K=M.updateAlignments(J,A,{x:Y,y:b}).snapPosition||{x:Y,y:b};l.onUpdateElementPosition(w,K.x,K.y,_)}else M.clearGuides(),l.onUpdateElementPosition(w,Y,b,_)},[l.places,l.transitions,l.selectedElements.length,l.onUpdateElementPosition,M]);return a.jsxs("div",{className:"canvas-container",style:{width:"100%",height:"100%",overflow:"hidden",margin:0,padding:0,display:"flex",position:"relative"},children:[a.jsx("button",{onClick:l.onCenterView,style:{position:"absolute",top:"10px",left:"10px",zIndex:10,padding:"5px",backgroundColor:"rgba(42, 42, 42, 0.85)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseOver:w=>{w.currentTarget.style.backgroundColor="rgba(60, 60, 60, 0.9)",w.currentTarget.style.borderColor="rgba(255, 255, 255, 0.4)"},onMouseOut:w=>{w.currentTarget.style.backgroundColor="rgba(42, 42, 42, 0.85)",w.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},title:"Center Canvas",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"white",children:[a.jsx("circle",{cx:"8",cy:"8",r:"2"}),a.jsx("path",{d:"M3.5 3.5 L 7.5 7.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("polyline",{points:"7.5,6.0 7.5,7.5 6.0,7.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("path",{d:"M12.5 3.5 L 8.5 7.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("polyline",{points:"8.5,6.0 8.5,7.5 10.0,7.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("path",{d:"M3.5 12.5 L 7.5 8.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("polyline",{points:"6.0,8.5 7.5,8.5 7.5,10.0",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("path",{d:"M12.5 12.5 L 8.5 8.5",stroke:"white",strokeWidth:"1.5",fill:"none"}),a.jsx("polyline",{points:"10.0,8.5 8.5,8.5 8.5,10.0",stroke:"white",strokeWidth:"1.5",fill:"none"})]})}),a.jsxs("svg",{ref:s,className:"petri-canvas",width:d.width,height:d.height,viewBox:`${k.x} ${k.y} ${k.w} ${k.h}`,onClick:h,onDragEnter:O,onDragOver:x,onDragLeave:z,onDrop:F,onMouseDown:w=>{c||R.handleMouseDown(w)},onMouseMove:w=>{Q.updateMousePosition(w.clientX,w.clientY),Z||R.handlePan(w)},onMouseUp:()=>{Z||R.handleMouseUp()},onMouseLeave:()=>{R.handleMouseLeave()},style:{backgroundColor:"#1A1A1A",display:"block",width:"100%",height:"100%"},children:[a.jsx("rect",{x:k.x-2e3,y:k.y-2e3,width:k.w+4e3,height:k.h+4e3,fill:"#1A1A1A",pointerEvents:"none"}),a.jsx(yf,{viewBox:k}),a.jsx(Cf,{guides:M.activeGuides,viewBox:k}),$&&a.jsx("rect",{x:$.x,y:$.y,width:$.width,height:$.height,fill:"rgba(0, 116, 217, 0.3)",stroke:"#0074D9",strokeWidth:"1",pointerEvents:"none"}),a.jsx("g",{className:"arcs-layer",children:l.arcs.map(w=>{const Y=q.get(w.incomingId)||W.get(w.incomingId),b=q.get(w.outgoingId)||W.get(w.outgoingId);return Y&&b?a.jsx(mf,{...w,source:Y,target:b,allArcs:l.arcs,isSelected:l.selectedElements.includes(w.id),onSelect:_=>l.onSelectElement(_)},w.id):null})}),a.jsx(xf,{}),a.jsx(gf,{selectedTool:l.selectedTool,selectedElements:l.selectedElements,places:l.places,transitions:l.transitions,arcType:l.arcType,mousePosition:Q.mousePosition}),m&&a.jsx("g",{className:"toolbar-drag-preview",style:{opacity:.7},children:m.type==="PLACE"?a.jsxs("g",{transform:`translate(${m.snappedPosition.x},${m.snappedPosition.y})`,children:[a.jsx("circle",{r:46,fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2",pointerEvents:"none"}),a.jsx("text",{x:"0",y:"0",textAnchor:"middle",dominantBaseline:"central",fill:"white",fontSize:"24",fontWeight:"bold",pointerEvents:"none",children:"0"})]}):a.jsx("g",{transform:`translate(${m.snappedPosition.x},${m.snappedPosition.y})`,children:a.jsx("rect",{x:-60,y:-27,width:120,height:54,rx:8,fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2",pointerEvents:"none"})})}),a.jsxs("g",{className:"elements-layer",children:[l.places.map(w=>(S[w.id]||D(Y=>({...Y,[w.id]:rr.createRef()})),a.jsx(cf,{id:w.id,name:w.name,x:w.x,y:w.y,tokens:w.tokens,radius:w.radius,bounded:w.bounded,capacity:w.capacity,isSelected:l.selectedElements.includes(w.id),onSelect:Y=>l.onSelectElement(Y),onUpdateSize:l.onUpdatePlaceSize,onUpdatePosition:H,arcMode:l.selectedTool==="ARC",arcType:l.arcType,onArcPortClick:l.onArcPortClick,onUpdateTokens:l.onUpdateToken,onTypingChange:l.onTypingChange,onUpdateName:l.onUpdateName,onUpdatePlaceCapacity:l.onUpdatePlaceCapacity,showCapacityEditorMode:l.showCapacityEditorMode??!1},w.id))),l.transitions.map(w=>{var Y,b;return S[w.id]||D(_=>({..._,[w.id]:rr.createRef()})),a.jsx(df,{id:w.id,name:w.name,arcIds:w.arcIds,x:w.x,y:w.y,width:w.width,height:w.height,enabled:w.enabled,isSelected:l.selectedElements.includes(w.id),onSelect:_=>l.onSelectElement(_),onUpdateSize:l.onUpdateTransitionSize,onUpdatePosition:H,arcMode:l.selectedTool==="ARC",arcType:l.arcType,onArcPortClick:l.onArcPortClick,onUpdateName:l.onUpdateName,onTypingChange:l.onTypingChange,isConflicting:l.conflictResolutionMode&&((Y=l.conflictingTransitions)==null?void 0:Y.includes(w.id)),onConflictingTransitionSelect:l.onConflictingTransitionSelect,conflictResolutionMode:l.conflictResolutionMode,isFired:(b=l.firedTransitions)==null?void 0:b.includes(w.id)},w.id)})]}),l.tokenAnimator&&a.jsx(Nf,{places:l.places,transitions:l.transitions,arcs:l.arcs,tokenAnimator:l.tokenAnimator})]}),a.jsx(Tf,{onChange:I})]})},Mf=({selectedTool:l,setSelectedTool:s,arcType:c,setArcType:f})=>{const[d,y]=g.useState(null),[m,E]=g.useState(null),v=g.useRef(null),j=g.useRef(null);g.useEffect(()=>{const C=k=>{if(m){k.preventDefault();const R=document.querySelector(".canvas-container");let Q=!1;if(R){const S=R.getBoundingClientRect();Q=k.clientX>=S.left&&k.clientX<=S.right&&k.clientY>=S.top&&k.clientY<=S.bottom}E(S=>S?{...S,x:k.clientX,y:k.clientY,visible:!Q}:null)}};if(m)return document.addEventListener("dragover",C,!0),()=>document.removeEventListener("dragover",C,!0)},[m]),g.useEffect(()=>{const C=()=>{E(null),y(null)},k=()=>{E(null),y(null)};return document.addEventListener("dragend",C,!0),document.addEventListener("drop",k,!0),()=>{document.removeEventListener("dragend",C,!0),document.removeEventListener("drop",k,!0)}},[]);const U=C=>{s(C),(C==="PLACE"||C==="TRANSITION")&&f("REGULAR")};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"toolbar-elements",children:a.jsxs("div",{className:"tools-container",children:[a.jsx("div",{className:"elements-label",children:"Node Elements:"}),a.jsxs("div",{className:`toolbar-item toolbar-place ${l==="PLACE"||d==="PLACE"?"active":""}`,onClick:()=>U("PLACE"),draggable:!0,onDragStart:C=>{C.dataTransfer.setData("application/petri-item","PLACE"),C.dataTransfer.effectAllowed="move",window.currentToolbarDragType="PLACE",s("PLACE"),y("PLACE");const k=document.createElement("div");k.innerHTML='<svg width="1" height="1"><rect width="1" height="1" fill="transparent"/></svg>',k.style.position="absolute",k.style.top="-1000px",k.style.opacity="0",document.body.appendChild(k),C.dataTransfer.setDragImage(k,0,0),setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},0),E({type:"PLACE",x:C.clientX,y:C.clientY,visible:!0})},onDragEnd:()=>{y(null),E(null),window.currentToolbarDragType=void 0},title:"Add a Place (container for tokens)",children:[a.jsx("div",{className:"toolbar-icon-container",children:a.jsx("svg",{ref:v,viewBox:"0 0 80 80",children:a.jsx("circle",{cx:"40",cy:"40",r:"30",fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2"})})}),a.jsx("span",{className:"toolbar-item-label",children:"Place"})]}),a.jsxs("div",{className:`toolbar-item toolbar-transition ${l==="TRANSITION"||d==="TRANSITION"?"active":""}`,onClick:()=>U("TRANSITION"),draggable:!0,onDragStart:C=>{C.dataTransfer.setData("application/petri-item","TRANSITION"),C.dataTransfer.effectAllowed="move",window.currentToolbarDragType="TRANSITION",s("TRANSITION"),y("TRANSITION");const k=document.createElement("div");k.innerHTML='<svg width="1" height="1"><rect width="1" height="1" fill="transparent"/></svg>',k.style.position="absolute",k.style.top="-1000px",k.style.opacity="0",document.body.appendChild(k),C.dataTransfer.setDragImage(k,0,0),setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},0),E({type:"TRANSITION",x:C.clientX,y:C.clientY,visible:!0})},onDragEnd:()=>{y(null),E(null),window.currentToolbarDragType=void 0},title:"Add a Transition (action that consumes and produces tokens)",children:[a.jsx("div",{className:"toolbar-icon-container",children:a.jsx("svg",{ref:j,viewBox:"0 0 80 80",children:a.jsx("rect",{x:"10",y:"25",width:"60",height:"30",rx:"8",fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2"})})}),a.jsx("span",{className:"toolbar-item-label",children:"Transition"})]}),a.jsx("div",{className:"arcs-label",children:"Arcs:"}),a.jsxs("div",{className:"arcs-row",children:[a.jsxs("button",{className:`arc-button ${l==="ARC"&&c==="REGULAR"?"active":""}`,onClick:()=>{s("ARC"),f("REGULAR")},title:"Regular Arc: Connects places and transitions",children:[a.jsxs("svg",{viewBox:"0 0 100 50",children:[a.jsx("defs",{children:a.jsx("marker",{id:"arrowhead-regular",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#fff"})})}),a.jsx("line",{x1:"20",y1:"25",x2:"70",y2:"25",stroke:"#fff",strokeWidth:"3",markerEnd:"url(#arrowhead-regular)"})]}),a.jsx("span",{className:"arc-button-label",children:"Regular"})]}),a.jsxs("button",{className:`arc-button ${l==="ARC"&&c==="INHIBITOR"?"active":""}`,onClick:()=>{s("ARC"),f("INHIBITOR")},title:"Inhibitor Arc: Prevents transition from firing when place has tokens",children:[a.jsxs("svg",{viewBox:"0 0 100 50",children:[a.jsx("line",{x1:"20",y1:"25",x2:"65",y2:"25",stroke:"#fff",strokeWidth:"3"}),a.jsx("circle",{cx:"75",cy:"25",r:"8",fill:"#ff3333",stroke:"#fff",strokeWidth:"2"})]}),a.jsx("span",{className:"arc-button-label",children:"Inhibitor"})]}),a.jsxs("button",{className:`arc-button ${l==="ARC"&&c==="BIDIRECTIONAL"?"active":""}`,onClick:()=>{s("ARC"),f("BIDIRECTIONAL")},title:"Bidirectional Arc: Two-way connection",children:[a.jsxs("svg",{viewBox:"0 0 120 60",children:[a.jsxs("defs",{children:[a.jsx("marker",{id:"arrowhead-bi1",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#fff"})}),a.jsx("marker",{id:"arrowhead-bi2",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"10 0, 0 3.5, 10 7",fill:"#fff"})})]}),a.jsx("line",{x1:"30",y1:"30",x2:"90",y2:"30",stroke:"#fff",strokeWidth:"3",markerStart:"url(#arrowhead-bi2)",markerEnd:"url(#arrowhead-bi1)"})]}),a.jsx("span",{className:"arc-button-label",children:"Bi-direct"})]})]}),l==="ARC"&&a.jsxs("div",{className:"arc-description",children:[c==="REGULAR"&&a.jsxs("div",{children:[a.jsx("div",{className:"arc-type-label",children:"Regular Arc"}),a.jsxs("div",{className:"arc-pattern",children:[a.jsx("span",{className:"arc-text-small",children:"place"}),a.jsxs("svg",{className:"arc-arrow-svg",viewBox:"0 0 30 15",children:[a.jsx("defs",{children:a.jsx("marker",{id:"desc-arrow-regular",markerWidth:"4",markerHeight:"3",refX:"0",refY:"1.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 4 1.5, 0 3",fill:"#e0e0e0"})})}),a.jsx("line",{x1:"4",y1:"7.5",x2:"22",y2:"7.5",stroke:"#e0e0e0",strokeWidth:"1.5",markerEnd:"url(#desc-arrow-regular)"})]}),a.jsx("span",{className:"arc-text-small",children:"transition"})]}),a.jsx("div",{className:"arc-text",children:"Connects places and transitions and vice versa"})]}),c==="INHIBITOR"&&a.jsxs("div",{children:[a.jsx("div",{className:"arc-type-label",children:"Inhibitor Arc"}),a.jsxs("div",{className:"arc-pattern",children:[a.jsx("span",{className:"arc-text-small",children:"place"}),a.jsxs("svg",{className:"arc-arrow-svg",viewBox:"0 0 30 15",children:[a.jsx("line",{x1:"4",y1:"7.5",x2:"20",y2:"7.5",stroke:"#e0e0e0",strokeWidth:"1.5"}),a.jsx("circle",{cx:"24",cy:"7.5",r:"2.5",fill:"#ff3333",stroke:"#e0e0e0",strokeWidth:"1"})]}),a.jsx("span",{className:"arc-text-small",children:"transition"})]}),a.jsx("div",{className:"arc-text",children:"Prevents firing when place has tokens"})]}),c==="BIDIRECTIONAL"&&a.jsxs("div",{children:[a.jsx("div",{className:"arc-type-label",children:"Bidirectional Arc"}),a.jsxs("div",{className:"arc-pattern",children:[a.jsx("span",{className:"arc-text-small",children:"place"}),a.jsxs("svg",{className:"arc-arrow-svg bidirectional",viewBox:"0 0 30 15",children:[a.jsxs("defs",{children:[a.jsx("marker",{id:"desc-arrow-bi1",markerWidth:"4",markerHeight:"3",refX:"0",refY:"1.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 4 1.5, 0 3",fill:"#e0e0e0"})}),a.jsx("marker",{id:"desc-arrow-bi2",markerWidth:"4",markerHeight:"3",refX:"4",refY:"1.5",orient:"auto",children:a.jsx("polygon",{points:"4 0, 0 1.5, 4 3",fill:"#e0e0e0"})})]}),a.jsx("line",{x1:"6",y1:"7.5",x2:"24",y2:"7.5",stroke:"#e0e0e0",strokeWidth:"1.5",markerStart:"url(#desc-arrow-bi2)",markerEnd:"url(#desc-arrow-bi1)"})]}),a.jsx("span",{className:"arc-text-small",children:"transition"})]}),a.jsx("div",{className:"arc-text",children:"Two-way connection between elements"})]})]})]})}),m&&m.visible&&a.jsx("div",{style:{position:"fixed",left:m.x-40,top:m.y-40,pointerEvents:"none",zIndex:1e4,opacity:.8},children:m.type==="PLACE"?a.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",children:[a.jsx("circle",{cx:"40",cy:"40",r:"30",fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2"}),a.jsx("text",{x:"40",y:"40",textAnchor:"middle",dominantBaseline:"central",fill:"white",fontSize:"18",fontWeight:"bold",fontFamily:"sans-serif",children:"0"})]}):a.jsx("svg",{width:"80",height:"80",viewBox:"0 0 80 80",children:a.jsx("rect",{x:"10",y:"25",width:"60",height:"30",rx:"8",fill:"#0f0f0f",stroke:"#ffffff",strokeWidth:"2"})})})]})};function Af({projectData:l,onImport:s,onOpenProject:c,onSaveProject:f,onSaveProjectAs:d,onImportPages:y,onExportActivePage:m,onExportProject:E,onCreatePage:v,projectHasUnsavedChanges:j,onNewProject:U,onSaveSnapshot:C,onRestoreSnapshot:k,hasSnapshot:R,activePageTitle:Q,showSavedIndicator:S}){const[D,$]=g.useState(!1),[Z,V]=g.useState(!1),M=g.useRef(null),q=g.useRef(null),W=g.useRef(null),h=g.useRef(null),x=g.useRef(null),O=()=>$(!D),F=I=>{I.stopPropagation(),V(!Z)},z=I=>{var w;const H=(w=I.target.files)==null?void 0:w[0];if(H){const Y=new FileReader;Y.onload=b=>{var _;try{const A=JSON.parse((_=b.target)==null?void 0:_.result);s(A)}catch(A){console.error("Error parsing imported file:",A),alert("Failed to parse file. Please ensure it's a valid Petri net JSON.")}},Y.readAsText(H)}$(!1),I.target&&(I.target.value="")};return g.useEffect(()=>{function I(H){M.current&&!M.current.contains(H.target)&&($(!1),V(!1))}return document.addEventListener("mousedown",I,!0),()=>{document.removeEventListener("mousedown",I,!0)}},[M,$,V]),a.jsxs("div",{className:"menu-bar",children:[a.jsxs("div",{ref:M,style:{position:"relative"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},className:"menu-item",onClick:O,children:[a.jsx("span",{children:"File"}),a.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:j?"#FF1744":"#76FF03",marginLeft:"8px",display:"inline-block",boxShadow:"0 0 3px 1px rgba(0,0,0,0.2)"},title:j?"Unsaved changes":"All changes saved"})]}),D&&a.jsxs("div",{className:"dropdown-menu",children:[a.jsx("div",{className:"menu-item",onClick:()=>{U(),$(!1)},children:"New Project"}),a.jsx("div",{className:"menu-item",onClick:()=>{var I;"showOpenFilePicker"in window?(c(),$(!1)):(I=W.current)==null||I.click()},children:"Open Project..."}),a.jsx("input",{type:"file",ref:W,style:{display:"none"},accept:".petri,.pats,.json",onChange:I=>{c(I),$(!1)}}),a.jsx("div",{className:"menu-item",onClick:()=>{f(),$(!1)},children:"Save Project"}),a.jsx("div",{className:"menu-item",onClick:()=>{d(),$(!1)},children:"Save Project As..."}),a.jsx("div",{className:"menu-item",onClick:()=>{var I;return(I=h.current)==null?void 0:I.click()},children:"Import Page(s)..."}),a.jsx("input",{type:"file",ref:h,style:{display:"none"},accept:".page.json,.json",multiple:!0,onChange:I=>{y(I),$(!1)}}),a.jsxs("div",{className:"menu-item",onClick:I=>F(I),ref:q,children:["Export",Z&&a.jsxs("div",{className:"dropdown-menu submenu",children:[a.jsx("div",{className:"menu-item",onClick:()=>{m(),V(!1),$(!1)},children:"Export Active Page..."}),a.jsx("div",{className:"menu-item",onClick:()=>{E(),V(!1),$(!1)},children:"Export Project..."})]})]}),a.jsx("div",{className:"menu-item-separator"}),a.jsx("div",{className:"menu-item",onClick:()=>{v(),$(!1)},children:"Create New Page"}),a.jsx("div",{className:"menu-item-separator"}),a.jsx("div",{className:"menu-item",onClick:()=>{var I;return(I=x.current)==null?void 0:I.click()},children:"Import Legacy Petri File"}),a.jsx("input",{type:"file",ref:x,style:{display:"none"},accept:".json,.pats",onChange:z})]})]}),a.jsxs("div",{className:"controls",children:[a.jsx("button",{className:"menu-button save-button",onClick:C,title:`Save snapshot of ${Q}`,children:a.jsx("span",{className:"icon",children:""})}),a.jsx("button",{className:"menu-button",onClick:k,disabled:!R,title:R?`Restore snapshot of ${Q}`:`No snapshot available for ${Q}`,children:""}),S&&a.jsx("span",{className:"saved-indicator",children:" Saved"})]})]})}const Rf="data:image/svg+xml,%3csvg%20fill='none'%20height='92'%20viewBox='0%200%2092%2092'%20width='92'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20clip-rule='evenodd'%20d='m45.6097%2021.0479c-14.2184%200-25.7347%2011.4704-25.7347%2025.6323%200%2011.3423%207.3666%2020.9224%2017.5961%2024.3187%201.2867.2243%201.7693-.5447%201.7693-1.2176%200-.6087-.0322-2.6273-.0322-4.774-6.4658%201.1855-8.1386-1.57-8.6533-3.0118-.2895-.7369-1.5441-3.0118-2.6378-3.6205-.9007-.4807-2.1875-1.6661-.0322-1.6982%202.0266-.032%203.4742%201.8584%203.9567%202.6273%202.3162%203.8769%206.0155%202.7875%207.4953%202.1147.2251-1.6661.9007-2.7875%201.6406-3.4283-5.726-.6408-11.7093-2.8516-11.7093-12.656%200-2.7875.9972-5.0944%202.6378-6.8887-.2574-.6408-1.1581-3.2681.2573-6.7926%200%200%202.1553-.6728%207.0771%202.6274%202.0587-.5768%204.2462-.8651%206.4336-.8651%202.1875%200%204.3749.2883%206.4337.8651%204.9218-3.3323%207.0771-2.6274%207.0771-2.6274%201.4154%203.5245.5146%206.1518.2573%206.7926%201.6406%201.7943%202.6378%204.0691%202.6378%206.8887%200%209.8364-6.0155%2012.0152-11.7414%2012.656.9328.801%201.737%202.3389%201.737%204.742%200%203.4283-.0321%206.1838-.0321%207.0488%200%20.6729.4825%201.4739%201.7692%201.2176%2010.1652-3.3963%2017.5318-13.0084%2017.5318-24.3187%200-14.1619-11.5163-25.6323-25.7347-25.6323z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3c/svg%3e",Lf=g.forwardRef(({title:l,onTitleChange:s},c)=>{const[f,d]=g.useState(!1),[y,m]=g.useState(l),[E,v]=g.useState(!1),j=g.useRef(null),U="Untitled Petri Net",C=g.useRef(null);g.useEffect(()=>{m(l)},[l]),g.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);const k=()=>{d(!0),m(l),l===U&&(v(!0),C.current&&clearTimeout(C.current),C.current=window.setTimeout(()=>{v(!1)},3e3)),setTimeout(()=>{j.current&&(j.current.focus(),j.current.select())},10)};g.useImperativeHandle(c,()=>({startEditing:k}));const R=()=>{d(!1);const S=y.trim()===""?U:y;s(S),m(S),v(!1)},Q=S=>{S.key==="Enter"?R():S.key==="Escape"&&(d(!1),m(l),v(!1))};return a.jsxs("div",{className:"title-container",children:[a.jsx("div",{className:`title-content ${f?"editing":""}`,onClick:f?void 0:k,title:f?void 0:"Click to edit the title",children:f?a.jsx("input",{ref:j,type:"text",value:y,onChange:S=>m(S.target.value),onBlur:R,onKeyDown:Q,className:"title-input",placeholder:U}):a.jsx("h2",{className:"title-text",children:l})}),a.jsx("a",{href:"https://github.com/Joseph-Vanliew/PATS",target:"_blank",rel:"noopener noreferrer",className:"github-link",title:"View Project on GitHub",children:a.jsx("img",{src:Rf,alt:"GitHub Icon",className:"github-link-icon"})}),E&&a.jsx("div",{className:"title-notification",children:"Please name your file before saving!"})]})}),qo=(l,s=[])=>{let c=JSON.stringify(l,(f,d)=>typeof d=="number"?Math.round(d):d,2);if(c=c.replace(/"places":/g,'"<strong>places</strong>":'),c=c.replace(/"transitions":/g,'"<strong>transitions</strong>":'),c=c.replace(/"arcs":/g,'"<strong>arcs</strong>":'),c=c.replace(/"([^"]+)":/g,'"<strong>$1</strong>":'),s.length>0){const f=c.split(`
`),d=[];s.forEach(y=>{const m=f.findIndex(E=>E.includes(`"<strong>id</strong>": "${y}"`));if(m>=0){let E=m;for(;E>=0&&!f[E].includes("{");)E--;let v=m,j=0;for(let U=E;U<f.length;U++){const C=f[U];for(let k=0;k<C.length;k++)C[k]==="{"&&j++,C[k]==="}"&&j--;if(j===0){v=U;break}}for(let U=E;U<=v;U++)d.push(U)}});for(let y=0;y<f.length;y++)d.includes(y)&&(f[y]=`<span class="json-highlight">${f[y]}</span>`);c=f.join(`
`)}return c};function Of({data:l,width:s=400,height:c=600,selectedElements:f=[],autoScrollEnabled:d=!0,onAutoScrollToggle:y,currentMode:m=""}){const E=g.useRef(null),v=g.useRef(null),j=g.useRef(null),U=g.useRef(null),C=g.useRef(null),k=(S,D="center")=>{if(!E.current)return;const $=E.current;let Z;D==="center"?Z=S.offsetTop-$.offsetTop-$.offsetHeight/2+S.offsetHeight/2:Z=S.offsetTop-$.offsetTop;const V=$.scrollTop,M=Z-V,q=300;let W=null;const h=(O,F,z,I)=>(O/=I/2,O<1?z/2*O*O+F:(O--,-z/2*(O*(O-2)-1)+F)),x=O=>{W===null&&(W=O);const F=O-W,z=h(F,V,M,q);$.scrollTop=z,F<q?requestAnimationFrame(x):$.scrollTop=Z};requestAnimationFrame(x)},R=S=>{S.current&&k(S.current,"start")};rr.useEffect(()=>{if(f.length===0||!d||m==="arc")return;const S=f[0];C.current!==S&&(C.current=S,requestAnimationFrame(()=>{if(!E.current)return;const D=E.current.querySelectorAll(".json-highlight");let $=!1;for(const Z of Array.from(D))if(Z.innerHTML.includes(`"<strong>id</strong>": "${S}"`)){k(Z,"center"),$=!0;break}$||(l.places.some(Z=>Z.id===S)?R(v):l.transitions.some(Z=>Z.id===S)?R(j):l.arcs.some(Z=>Z.id===S)&&R(U))}))},[f,l,d,m]);const Q={width:typeof s=="number"?`${s}px`:s,height:typeof c=="number"?`${c}px`:c};return a.jsxs("div",{className:"json-viewer-wrapper",style:Q,children:[a.jsxs("div",{className:"json-auto-scroll",children:[a.jsx("input",{type:"checkbox",id:"auto-scroll-toggle",checked:d,onChange:S=>y&&y(S.target.checked)}),a.jsx("label",{htmlFor:"auto-scroll-toggle",children:"Auto-scroll"})]}),a.jsxs("div",{ref:E,className:"json-viewer-container",children:[a.jsx("h3",{className:"json-viewer-title",children:"Petri Net:"}),a.jsx("pre",{ref:v,className:"json-viewer-content",children:a.jsx("span",{dangerouslySetInnerHTML:{__html:qo({places:l.places},f)}})}),a.jsx("pre",{ref:j,className:"json-viewer-content",children:a.jsx("span",{dangerouslySetInnerHTML:{__html:qo({transitions:l.transitions},f)}})}),a.jsx("pre",{ref:U,className:"json-viewer-content",children:a.jsx("span",{dangerouslySetInnerHTML:{__html:qo({arcs:l.arcs},f)}})})]})]})}function If({data:l,onValidate:s,inputConfigs:c,setInputConfigs:f,outputConfigs:d,setOutputConfigs:y,persistedValidationResult:m,setValidationResult:E,emptyInputFields:v,setEmptyInputFields:j,emptyOutputFields:U,setEmptyOutputFields:C,activePageId:k}){const[R,Q]=g.useState([]),[S,D]=g.useState([]),[$,Z]=g.useState(null),[V,M]=g.useState({}),[q,W]=g.useState({}),h=c!==void 0?c:R,x=f||Q,O=d!==void 0?d:S,F=y||D,z=m!==void 0?m:$,I=E||Z,H=v!==void 0?v:V,w=j||M,Y=U!==void 0?U:q,b=C||W,[_,A]=g.useState(!1),J=l.places.filter(oe=>oe.name&&oe.name.trim()!=="");g.useEffect(()=>{const oe=new Set(l.places.map(Ee=>Ee.id)),ie=h.filter(Ee=>oe.has(Ee.placeId));ie.length!==h.length&&x(ie);const ue=O.filter(Ee=>oe.has(Ee.placeId));ue.length!==O.length&&F(ue),z&&(ie.length!==h.length||ue.length!==O.length)&&I(null)},[l.places,h,O,z]),g.useEffect(()=>{if(J.length===0){h.length>0&&x([]),O.length>0&&F([]);return}const oe=new Set(l.places.map(Oe=>Oe.id)),ie=new Set(J.map(Oe=>Oe.id)),ue=[...oe].filter(Oe=>!ie.has(Oe));let Ee=!1;const re=h.filter(Oe=>oe.has(Oe.placeId)?ue.includes(Oe.placeId)?(Ee=!0,!1):!0:!1);let ve=!1;const $e=O.filter(Oe=>oe.has(Oe.placeId)?ue.includes(Oe.placeId)?(ve=!0,!1):!0:!1);(Ee||re.length!==h.length)&&x(re),(ve||$e.length!==O.length)&&F($e),(Ee||re.length!==h.length||ve||$e.length!==O.length)&&z&&I(null)},[J,l.places,h,O,z]);const G=()=>{if(J.length===0)return;const oe=new Set([...h.map(ve=>ve.placeId),...O.map(ve=>ve.placeId)]),ie=J.filter(ve=>!oe.has(ve.id));let ue;if(ie.length>0){const ve=ie.find($e=>{var Oe;return(Oe=$e.name)==null?void 0:Oe.toLowerCase().startsWith("input")});ue=ve?ve.id:ie[0].id}else ue=J[0].id;const Ee={placeId:ue,tokens:0},re=h.length;x([...h,Ee]),w({...H,[re]:!1})},T=()=>{if(J.length===0)return;const oe=new Set([...h.map(ve=>ve.placeId),...O.map(ve=>ve.placeId)]),ie=J.filter(ve=>!oe.has(ve.id));let ue;if(ie.length>0){const ve=ie.find($e=>{var Oe;return(Oe=$e.name)==null?void 0:Oe.toLowerCase().startsWith("output")});ue=ve?ve.id:ie[0].id}else ue=J[0].id;const Ee={placeId:ue,tokens:0},re=O.length;F([...O,Ee]),b({...Y,[re]:!1})},K=(oe,ie,ue)=>{const Ee=h.map((re,ve)=>{if(ve===oe){if(ie==="placeId")return{...re,placeId:ue};if(ie==="tokens"){const $e=ue===""?0:parseInt(ue,10)||0;return{...re,tokens:$e}}}return re});x(Ee)},me=(oe,ie,ue)=>{const Ee=O.map((re,ve)=>{if(ve===oe){if(ie==="placeId")return{...re,placeId:ue};if(ie==="tokens"){const $e=ue===""?0:parseInt(ue,10)||0;return{...re,tokens:$e}}}return re});F(Ee)},ge=oe=>{const ie=h.map((ue,Ee)=>Ee===oe?{...ue,tokens:ue.tokens+1}:ue);x(ie),w({...H,[oe]:!1})},Se=oe=>{const ie=h.map((ue,Ee)=>Ee===oe&&ue.tokens>0?{...ue,tokens:ue.tokens-1}:ue);x(ie)},Ne=oe=>{const ie=O.map((ue,Ee)=>Ee===oe?{...ue,tokens:ue.tokens+1}:ue);F(ie),b({...Y,[oe]:!1})},ee=oe=>{const ie=O.map((ue,Ee)=>Ee===oe&&ue.tokens>0?{...ue,tokens:ue.tokens-1}:ue);F(ie)},ye=oe=>{const ie=[...h];ie.splice(oe,1),x(ie);const ue={...H};delete ue[oe],Object.keys(ue).forEach(Ee=>{const re=parseInt(Ee);re>oe&&(ue[re-1]=ue[re],delete ue[re])}),w(ue)},Ce=oe=>{const ie=[...O];ie.splice(oe,1),F(ie);const ue={...Y};delete ue[oe],Object.keys(ue).forEach(Ee=>{const re=parseInt(Ee);re>oe&&(ue[re-1]=ue[re],delete ue[re])}),b(ue)},Ae=async()=>{if(!k){I({valid:!1,message:"Cannot validate: Active page ID is missing.",errors:["Active page ID is missing."]});return}if(h.length===0||O.length===0){I({valid:!1,message:"You must specify at least one input and one expected output.",errors:["Input or expected output is missing."]});return}if(!l){I({valid:!1,message:"Cannot validate: Petri net data is missing.",errors:["Petri net data is missing."]});return}A(!0);try{const oe={places:l.places.map(re=>({id:re.id,tokens:re.tokens,name:re.name||"",x:re.x||0,y:re.y||0,radius:re.radius||46,bounded:re.bounded||!1,capacity:re.capacity||null})),transitions:l.transitions.map(re=>({id:re.id,enabled:re.enabled,arcIds:re.arcIds||[],name:re.name||"",x:re.x||0,y:re.y||0,width:re.width||120,height:re.height||54})),arcs:l.arcs.map(re=>({id:re.id,type:re.type,incomingId:re.incomingId,outgoingId:re.outgoingId})),deterministicMode:l.deterministicMode??!1,title:l.title||""},ie={places:oe.places,transitions:oe.transitions,arcs:oe.arcs,deterministicMode:oe.deterministicMode,title:oe.title,inputConfigs:h.map(re=>({placeId:re.placeId,tokens:re.tokens})),expectedOutputs:O.map(re=>({placeId:re.placeId,tokens:re.tokens}))};console.log("Validation request body:",ie);const ue=await fetch(`/api/page/${k}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!ue.ok){const re=await ue.text();throw new Error(`Validation request failed: ${ue.status} ${re}`)}const Ee=await ue.json();I(Ee),s&&s(Ee)}catch(oe){console.error("Error validating Petri net:",oe);const ie=oe instanceof Error?oe.message:"Unknown error",ue={valid:!1,message:`Error: ${ie}`,errors:[ie]};I(ue),s&&s(ue)}finally{A(!1)}},Qe=()=>{x([]),F([]),I(null),w({}),b({})},st=oe=>{const ie=l.places.find(ue=>ue.id===oe);return(ie==null?void 0:ie.name)||oe},Be=oe=>{const ie=l.transitions.find(ue=>ue.id===oe);return ie!=null&&ie.name&&ie.name.trim()!==""?ie.name:oe};return a.jsxs("div",{className:"validator-container",children:[a.jsx("h3",{className:"validator-title",children:"Petri Net Verifier"}),a.jsxs("div",{className:"validator-section",children:[a.jsxs("div",{className:"validator-section-header",children:[a.jsx("h4",{className:"validator-section-title",children:"Input Places"}),a.jsx("button",{className:"validator-button-add green",onClick:G,disabled:J.length===0||_,children:"Add Input"})]}),h.length===0?a.jsx("p",{className:"validator-empty-message",children:"No input places named, please name your places."}):a.jsx("div",{children:h.map((oe,ie)=>{const ue=new Set(h.filter((re,ve)=>ve!==ie).map(re=>re.placeId)),Ee=J.filter(re=>re.id===oe.placeId||!ue.has(re.id));return a.jsxs("div",{className:"validator-config-item",children:[a.jsx("select",{className:"validator-select",value:oe.placeId,onChange:re=>K(ie,"placeId",re.target.value),disabled:_,children:Ee.map(re=>{const ve=re.name||re.id;return a.jsx("option",{value:re.id,children:ve},re.id)})}),a.jsxs("div",{className:"validator-tokens-control",children:[a.jsx("input",{className:"validator-input",type:"text",value:H[ie]?"":oe.tokens,onChange:re=>{const ve=re.target.value;K(ie,"tokens",ve),w(ve===""?{...H,[ie]:!0}:{...H,[ie]:!1})},onKeyDown:re=>{re.key==="Enter"&&re.currentTarget.blur()},min:"0",disabled:_}),a.jsxs("div",{className:"validator-button-controls",children:[a.jsx("button",{className:"validator-button-increment",onClick:()=>ge(ie),disabled:_,title:"Increase tokens",children:"+"}),a.jsx("button",{className:"validator-button-decrement",onClick:()=>Se(ie),disabled:_||oe.tokens<=0,title:"Decrease tokens",children:"-"})]})]}),a.jsx("button",{className:"validator-button-remove",onClick:()=>ye(ie),disabled:_,children:""})]},`input-${ie}`)})})]}),a.jsxs("div",{className:"validator-section",children:[a.jsxs("div",{className:"validator-section-header",children:[a.jsx("h4",{className:"validator-section-title",children:"Expected Outputs"}),a.jsx("button",{className:"validator-button-add blue",onClick:T,disabled:J.length===0||_,children:"Add Output"})]}),O.length===0?a.jsx("p",{className:"validator-empty-message",children:"No expected outputs named, please name your places."}):a.jsx("div",{children:O.map((oe,ie)=>{const ue=new Set(O.filter((re,ve)=>ve!==ie).map(re=>re.placeId)),Ee=J.filter(re=>re.id===oe.placeId||!ue.has(re.id));return a.jsxs("div",{className:"validator-config-item",children:[a.jsx("select",{className:"validator-select",value:oe.placeId,onChange:re=>me(ie,"placeId",re.target.value),disabled:_,children:Ee.map(re=>{const ve=re.name||re.id;return a.jsx("option",{value:re.id,children:ve},re.id)})}),a.jsxs("div",{className:"validator-tokens-control",children:[a.jsx("input",{className:"validator-input",type:"text",value:Y[ie]?"":oe.tokens,onChange:re=>{const ve=re.target.value;me(ie,"tokens",ve),b(ve===""?{...Y,[ie]:!0}:{...Y,[ie]:!1})},onKeyDown:re=>{re.key==="Enter"&&re.currentTarget.blur()},min:"0",disabled:_}),a.jsxs("div",{className:"validator-button-controls",children:[a.jsx("button",{className:"validator-button-increment",onClick:()=>Ne(ie),disabled:_,title:"Increase tokens",children:"+"}),a.jsx("button",{className:"validator-button-decrement",onClick:()=>ee(ie),disabled:_||oe.tokens<=0,title:"Decrease tokens",children:"-"})]})]}),a.jsx("button",{className:"validator-button-remove",onClick:()=>Ce(ie),disabled:_,children:""})]},`output-${ie}`)})})]}),a.jsxs("div",{className:"validator-actions",children:[a.jsx("button",{className:"validator-button-run",onClick:Ae,disabled:h.length===0||O.length===0||_,children:_?"Validating...":"Run Verification"}),a.jsx("button",{className:"validator-button-reset",onClick:Qe,disabled:_,children:"Reset"})]}),z&&a.jsxs("div",{className:"validator-result",children:[(()=>{let oe=z.valid,ie=z.message||"";return z.outputMatches&&Object.keys(z.outputMatches).length>0?Object.values(z.outputMatches).every(Ee=>Ee)?(oe=z.valid,ie="Output matches expectations."):(oe=!1,ie="Output does not match expectations."):oe&&!ie?ie="Validation reported success.":!oe&&!ie&&(ie="Validation failed (no specific details provided)."),a.jsx("h4",{className:`validator-result-title ${oe?"success":"error"}`,children:ie||(oe?"Validation Successful":"Validation Failed")})})(),z.outputMatches&&Object.keys(z.outputMatches).length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"validator-result-section-title",children:"Output Comparison:"}),a.jsx("ul",{className:"validator-result-list",children:Object.entries(z.outputMatches).map(([oe,ie],ue)=>{var pn,yn;const Ee=st(oe),re=ie?"Matched":"Did not match",ve=`validator-result-list-item ${ie?"success":"error"}`,$e=(yn=(pn=z.finalState)==null?void 0:pn.places)==null?void 0:yn.find(Qt=>Qt.id===oe),Oe=($e==null?void 0:$e.tokens)??"N/A",Ft=O.find(Qt=>Qt.placeId===oe),In=(Ft==null?void 0:Ft.tokens)??"N/A";return a.jsx("li",{className:ve,title:`Expected: ${In}`,children:`${Ee}: ${re} (Tokens: ${Oe})`},ue)})})]}),z.conflictingTransitions&&z.conflictingTransitions.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"validator-result-section-title",children:"Conflicting Transitions Detected:"}),a.jsx("ul",{className:"validator-result-list warning",children:z.conflictingTransitions.map((oe,ie)=>a.jsxs("li",{className:"validator-result-list-item warning",children:[Be(oe)," "]},ie))})]})]}),a.jsxs("div",{className:"validator-footer",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"How it works:"})," The verifier runs your Petri net with the specified input tokens and checks if it reaches the expected output state. * The verifier always runs in deterministic mode."]}),a.jsx("p",{style:{marginBottom:0},children:"It runs until no more transitions can fire or a conflict is detected between transitions."})]})]})}function _f({data:l,width:s="auto",height:c="auto"}){var E,v,j;const f=((E=l==null?void 0:l.places)==null?void 0:E.length)??0,d=((v=l==null?void 0:l.transitions)==null?void 0:v.length)??0,y=((j=l==null?void 0:l.arcs)==null?void 0:j.length)??0,m={width:s,height:c};return a.jsxs("div",{className:"analysis-container",style:m,children:[a.jsx("div",{className:"analysis-overlay",children:a.jsx("div",{className:"analysis-overlay-text",children:"Under Construction"})}),a.jsx("h3",{className:"analysis-title",children:"Analysis Tool"}),a.jsxs("div",{className:"analysis-section",children:[a.jsx("h4",{className:"analysis-section-title",children:"Petri Net Overview"}),a.jsxs("ul",{className:"analysis-overview",children:[a.jsxs("li",{children:["Places: ",f]}),a.jsxs("li",{children:["Transitions: ",d]}),a.jsxs("li",{children:["Arcs: ",y]})]})]}),a.jsxs("div",{className:"analysis-section",children:[a.jsx("h4",{className:"analysis-section-title",children:"Analysis Options"}),a.jsxs("div",{className:"analysis-button-group",children:[a.jsx("button",{disabled:!0,title:"Compute all possible states (markings) the net can reach from the current state.",children:"Reachable States"}),a.jsx("button",{disabled:!0,title:"Check for deadlocks or livelocks; ensure transitions can eventually fire again.",children:"Liveness"}),a.jsx("button",{disabled:!0,title:"Determine if the number of tokens in any place can grow indefinitely or stays bounded.",children:"Boundedness"}),a.jsx("button",{disabled:!0,title:"Find token conservation laws; relationships between place markings that always hold true.",children:"P-Invariants"}),a.jsx("button",{disabled:!0,title:"Find sequences of transition firings that return the net to a previous state (cyclic behavior).",children:"T-Invariants"}),a.jsx("button",{disabled:!0,title:"Show the matrix representing the relationships between transitions and places.",children:"Incidence Matrix"}),a.jsx("button",{disabled:!0,title:"Analyze potentially unbounded nets by representing infinite tokens symbolically.",children:"Coverability Graph"}),a.jsx("button",{disabled:!0,title:"Analyze properties derived directly from the net structure, ignoring the initial marking.",children:"Structural Analysis"})]}),a.jsx("div",{className:"analysis-results-placeholder",children:"Analysis results will be displayed here."})]})]})}function zf({data:l,width:s=400,height:c=600,selectedElements:f=[],autoScrollEnabled:d=!0,onAutoScrollToggle:y,currentMode:m="",onValidationResult:E,activePageId:v,validatorConfigs:j,onValidatorConfigsChange:U}){const[C,k]=g.useState("validator"),R=j||{inputConfigs:[],outputConfigs:[],validationResult:null,emptyInputFields:{},emptyOutputFields:{}},Q=D=>{U&&U({validationResult:D}),E&&E(D)},S={width:typeof s=="number"?`${s}px`:s,height:typeof c=="number"?`${c}px`:c,maxWidth:"100%"};return a.jsxs("div",{className:"tabbed-panel",style:S,children:[a.jsxs("div",{className:"tab-header",children:[a.jsx(bo,{label:"Verifier",isActive:C==="validator",onClick:()=>k("validator")}),a.jsx(bo,{label:"Viewer",isActive:C==="json",onClick:()=>k("json")}),a.jsx(bo,{label:"Analysis",isActive:C==="analysis",onClick:()=>k("analysis")})]}),a.jsxs("div",{className:"tab-content",children:[C==="json"&&a.jsx(Of,{data:l,width:"100%",height:"100%",selectedElements:f,autoScrollEnabled:d,onAutoScrollToggle:y,currentMode:m}),C==="validator"&&a.jsx(If,{data:l,width:"100%",height:"100%",onValidate:Q,inputConfigs:R.inputConfigs,setInputConfigs:D=>{if(U){const $=typeof D=="function"?D(R.inputConfigs):D;U({inputConfigs:$})}},outputConfigs:R.outputConfigs,setOutputConfigs:D=>{if(U){const $=typeof D=="function"?D(R.outputConfigs):D;U({outputConfigs:$})}},persistedValidationResult:R.validationResult,setValidationResult:D=>{if(U){const $=typeof D=="function"?D(R.validationResult):D;U({validationResult:$})}},emptyInputFields:R.emptyInputFields,setEmptyInputFields:D=>{if(U){const $=typeof D=="function"?D(R.emptyInputFields):D;U({emptyInputFields:$})}},emptyOutputFields:R.emptyOutputFields,setEmptyOutputFields:D=>{if(U){const $=typeof D=="function"?D(R.emptyOutputFields):D;U({emptyOutputFields:$})}},activePageId:v}),C==="analysis"&&a.jsx(_f,{data:l,width:"100%",height:"100%"})]})]})}function bo({label:l,isActive:s,onClick:c}){return a.jsx("button",{className:`tab-button ${s?"active":""}`,onClick:c,children:l})}const et=[];for(let l=0;l<256;++l)et.push((l+256).toString(16).slice(1));function Df(l,s=0){return(et[l[s+0]]+et[l[s+1]]+et[l[s+2]]+et[l[s+3]]+"-"+et[l[s+4]]+et[l[s+5]]+"-"+et[l[s+6]]+et[l[s+7]]+"-"+et[l[s+8]]+et[l[s+9]]+"-"+et[l[s+10]]+et[l[s+11]]+et[l[s+12]]+et[l[s+13]]+et[l[s+14]]+et[l[s+15]]).toLowerCase()}let es;const $f=new Uint8Array(16);function Ff(){if(!es){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");es=crypto.getRandomValues.bind(crypto)}return es($f)}const Uf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tc={randomUUID:Uf};function ts(l,s,c){var d;if(tc.randomUUID&&!l)return tc.randomUUID();l=l||{};const f=l.random??((d=l.rng)==null?void 0:d.call(l))??Ff();if(f.length<16)throw new Error("Random bytes length must be >= 16");return f[6]=f[6]&15|64,f[8]=f[8]&63|128,Df(f)}function Bf({places:l,transitions:s,arcs:c,selectedElements:f,setPlaces:d,setTransitions:y,setArcs:m,setSelectedElements:E,saveToHistory:v}){const[j,U]=g.useState(0),[C,k]=g.useState(null),R=g.useCallback(async()=>{if(f.length===0)return;const D=l.filter(M=>f.includes(M.id)),$=s.filter(M=>f.includes(M.id)),Z=new Set(f),V=c.filter(M=>Z.has(M.incomingId)&&Z.has(M.outgoingId));if(D.length>0||$.length>0){const M={type:"petriNetElements",places:JSON.parse(JSON.stringify(D)),transitions:JSON.parse(JSON.stringify($)),arcs:JSON.parse(JSON.stringify(V))};try{await navigator.clipboard.writeText(JSON.stringify(M,null,2)),U(0),k(null)}catch(q){console.error("Failed to copy to system clipboard:",q)}}else U(0),k(null)},[f,l,s,c]),Q=g.useCallback(async()=>{try{const D=await navigator.clipboard.readText();if(!D)return;const $=JSON.parse(D);if(($==null?void 0:$.type)!=="petriNetElements"||!$.places||!$.transitions||!$.arcs){console.warn("Clipboard data is not valid Petri net elements.");return}const Z=$;if(Z.places.length===0&&Z.transitions.length===0)return;v();const M=C!==null&&JSON.stringify(Z)===JSON.stringify(C)?j+1:1,q=30,W=M*q,h=M*q,x={},O=[],F=Z.places.map(w=>{const Y=`place_${ts()}`;return x[w.id]=Y,O.push(Y),{...w,id:Y,x:(w.x??100)+W,y:(w.y??100)+h}}),z=Z.transitions.map(w=>{const Y=`trans_${ts()}`;return x[w.id]=Y,O.push(Y),{...w,id:Y,x:(w.x??200)+W,y:(w.y??200)+h,arcIds:[]}}),I=Z.arcs.map(w=>{const Y=`arc_${ts()}`,b=x[w.incomingId],_=x[w.outgoingId];return b&&_?{...w,id:Y,incomingId:b,outgoingId:_}:null}).filter(w=>w!==null),H=z.map(w=>{const Y=Z.transitions.find(_=>x[_.id]===w.id);let b=[];if(Y){const _=new Set(I.map(A=>A.id));b=Y.arcIds.map(A=>x[A]).filter(A=>A!==void 0&&_.has(A))}return{...w,arcIds:b}});d(w=>[...w,...F]),y(w=>[...w,...H]),m(w=>[...w,...I]),E(O),k(Z),U(M)}catch(D){console.error("Paste error:",D),U(0),k(null)}},[j,C,v,d,y,m,E]),S=g.useCallback(async()=>{U(0),k(null)},[]);return{handleCopy:R,handlePaste:Q,clearClipboard:S}}const Vf=({pages:l,pageOrder:s,activePageId:c,onSelectPage:f,onCreatePage:d,onRenamePage:y,onDeletePage:m,onReorderPages:E,onCreatePageWithData:v})=>{const[j,U]=g.useState(null),[C,k]=g.useState(""),R=g.useRef(null),Q=g.useRef(null),[S,D]=g.useState(null),$=g.useRef(null),Z=g.useRef(null);g.useEffect(()=>{j&&R.current&&(R.current.focus(),R.current.select())},[j]);const V=(A,J)=>{D(null),U(A),k(J)},M=()=>{j&&C.trim()&&y(j,C.trim()),U(null),k("")},q=A=>{k(A.target.value)},W=()=>{M()},h=A=>{A.key==="Enter"?M():A.key==="Escape"&&(U(null),k(""))},x=(A,J)=>{A.preventDefault();const T=A.currentTarget.getBoundingClientRect();D({visible:!0,x:T.right,y:T.top,pageId:J,positionAdjusted:!1}),U(null)};g.useLayoutEffect(()=>{if(S!=null&&S.visible&&Q.current&&!S.positionAdjusted){const A=Q.current.offsetHeight;D(J=>J?{...J,y:J.y-A,positionAdjusted:!0}:null)}},[S==null?void 0:S.visible,S==null?void 0:S.pageId,S==null?void 0:S.positionAdjusted]);const O=()=>{D(null)};g.useEffect(()=>{const A=J=>{S!=null&&S.visible&&(J.target.closest(".context-menu")||O())};return S!=null&&S.visible&&(document.addEventListener("mousedown",A,!0),document.addEventListener("contextmenu",A,!0)),()=>{document.removeEventListener("mousedown",A,!0),document.removeEventListener("contextmenu",A,!0)}},[S]);const F=()=>{var A;S&&V(S.pageId,((A=l[S.pageId])==null?void 0:A.title)||""),O()},z=()=>{if(S){const A=l[S.pageId];(!(A.places.length>0||A.transitions.length>0||A.arcs.length>0)||window.confirm(`Are you sure you want to delete page "${A.title}"?`))&&m(S.pageId)}O()},I=()=>{if(S){const A=l[S.pageId],J=`page_${Date.now()}`,G={...JSON.parse(JSON.stringify(A)),id:J,title:`${A.title} (copy)`,selectedElements:[]};v(G),O()}},H=(A,J)=>{$.current=J,A.currentTarget.style.opacity="0.5",A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",J);const G=document.createElement("div");G.style.position="absolute",G.style.top="-9999px",G.style.width="1px",G.style.height="1px",G.style.overflow="hidden",document.body.appendChild(G),A.dataTransfer.setDragImage(G,0,0),setTimeout(()=>{document.body.removeChild(G)},0)},w=(A,J)=>{A.preventDefault(),Z.current=J,A.currentTarget.style.backgroundColor="#555"},Y=A=>{A.currentTarget.style.backgroundColor=""},b=A=>{if(A.preventDefault(),A.currentTarget.style.backgroundColor="",!$.current||!Z.current||$.current===Z.current){$.current=null,Z.current=null;return}const J=s.indexOf($.current),G=s.indexOf(Z.current);if(J===-1||G===-1){console.error("Error finding dragged items in pageOrder"),$.current=null,Z.current=null;return}const T=[...s],[K]=T.splice(J,1);T.splice(G,0,K),E(T),$.current=null,Z.current=null},_=A=>{A.currentTarget.style.opacity="1",$.current=null,Z.current=null,A.currentTarget.style.backgroundColor=""};return a.jsxs("div",{className:"pages-component-container",onDragOver:A=>A.preventDefault(),children:[s.map(A=>{const J=l[A];return J?a.jsx("div",{className:`page-tab ${A===c?"active":""}`,onClick:()=>{O(),f(A)},onDoubleClick:()=>V(A,J.title),onContextMenu:G=>x(G,A),title:J.title,draggable:"true",onDragStart:G=>H(G,A),onDragEnter:G=>w(G,A),onDragLeave:Y,onDragOver:G=>G.preventDefault(),onDrop:b,onDragEnd:_,children:j===A?a.jsx("input",{ref:R,type:"text",value:C,onChange:q,onBlur:W,onKeyDown:h,className:"page-tab-edit-input",maxLength:50}):J.title||`Page ${A.substring(0,4)}`},A):null}),a.jsx("button",{className:"add-page-button",onClick:d,title:"Create New Page",children:"+"}),(S==null?void 0:S.visible)&&a.jsxs("div",{ref:Q,className:"context-menu",style:{top:S.y,left:S.x},onMouseDown:A=>A.stopPropagation(),onContextMenu:A=>A.stopPropagation(),children:[a.jsx("div",{className:"context-menu-item",onClick:F,children:"Rename"}),a.jsx("div",{className:"context-menu-item",onClick:I,children:"Duplicate"}),Object.keys(l).length>1&&a.jsx("div",{className:"context-menu-item",onClick:z,children:"Delete"})]})]})},ri="patsAppState_v1";function Pf(){try{const l=localStorage.getItem(ri);if(l===null)return null;const s=JSON.parse(l);if(typeof s.pages!="object"||s.activePageId===void 0||!Array.isArray(s.pageOrder)||typeof s.projectTitle!="string"||typeof s.projectHasUnsavedChanges!="boolean")return console.warn("Persisted state is missing essential keys or has wrong types. Ignoring."),localStorage.removeItem(ri),null;const c={};if(s.pages)for(const f in s.pages){const d=s.pages[f];d&&typeof d=="object"&&(c[f]={id:d.id||f,title:d.title||"Untitled Page",places:Array.isArray(d.places)?d.places:[],transitions:Array.isArray(d.transitions)?d.transitions:[],arcs:Array.isArray(d.arcs)?d.arcs:[],deterministicMode:typeof d.deterministicMode=="boolean"?d.deterministicMode:!1,conflictResolutionMode:typeof d.conflictResolutionMode=="boolean"?d.conflictResolutionMode:!1,conflictingTransitions:Array.isArray(d.conflictingTransitions)?d.conflictingTransitions:[],selectedElements:Array.isArray(d.selectedElements)?d.selectedElements:[],history:d.history&&typeof d.history=="object"?{places:Array.isArray(d.history.places)?d.history.places:[],transitions:Array.isArray(d.history.transitions)?d.history.transitions:[],arcs:Array.isArray(d.history.arcs)?d.history.arcs:[],title:Array.isArray(d.history.title)?d.history.title:[]}:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:typeof d.zoomLevel=="number"?d.zoomLevel:1,panOffset:d.panOffset&&typeof d.panOffset.x=="number"&&typeof d.panOffset.y=="number"?d.panOffset:{x:0,y:0}})}return{pages:c,activePageId:s.activePageId!==void 0?s.activePageId:null,pageOrder:s.pageOrder||[],projectTitle:s.projectTitle||"Untitled MyPetri Project",projectHasUnsavedChanges:s.projectHasUnsavedChanges||!1}}catch(l){return console.error("Error loading state from localStorage:",l),localStorage.removeItem(ri),null}}function Wf(l){try{const s=JSON.stringify(l);localStorage.setItem(ri,s)}catch(s){console.error("Error saving state to localStorage:",s)}}function nc(l,s){const c={x:l.x,y:l.y};return l.id.startsWith("place")?Yf(c,l.radius,s):l.id.startsWith("trans")?Xf(c,l.width,l.height,s):c}function Yf(l,s,c){const f=c.x-l.x,d=c.y-l.y,y=Math.atan2(d,f);return{x:l.x+s*Math.cos(y),y:l.y+s*Math.sin(y)}}function Xf(l,s,c,f){const d=f.x-l.x,y=f.y-l.y,m=s/2,E=c/2;if(d===0&&y===0)return l;const v=m/Math.abs(d),j=E/Math.abs(y),U=Math.min(v,j);return{x:l.x+d*U,y:l.y+y*U}}const ii=class ii{constructor(){mn(this,"animations",[]);mn(this,"animationFrameId",null);mn(this,"consumptionAnimations",[]);mn(this,"productionAnimations",[]);mn(this,"allConsumptionsComplete",!1);mn(this,"speedMultiplier",1);this.animate=this.animate.bind(this)}hasActiveAnimations(){return this.animations.length>0||this.animationFrameId!==null}hasActiveProductionAnimations(){return this.productionAnimations.length>0&&this.allConsumptionsComplete}setSpeedMultiplier(s){this.speedMultiplier=s}startAnimation(s,c,f,d,y){const m=performance.now(),E=800*this.speedMultiplier,v=2.5*this.speedMultiplier,j=E,U=2500*this.speedMultiplier;let C=0,k="",R="";if("radius"in s){const S=d.find(D=>D.incomingId===s.id&&D.outgoingId===f.id);if(S){k=this.calculateArcPath(s,f,S,d);const D=document.createElementNS("http://www.w3.org/2000/svg","path");D.setAttribute("d",k),C=Math.max(C,D.getTotalLength())}}if("radius"in c){const S=d.find(D=>D.incomingId===f.id&&D.outgoingId===c.id);if(S){R=this.calculateArcPath(f,c,S,d);const D=document.createElementNS("http://www.w3.org/2000/svg","path");D.setAttribute("d",R),C=Math.max(C,D.getTotalLength())}}const Q=Math.min(Math.max(C*v,j),U);k&&this.consumptionAnimations.push({sourceId:s.id,targetId:f.id,arcPath:k,progress:0,startTime:m,duration:Q,type:"consume"}),R&&this.productionAnimations.push({sourceId:f.id,targetId:c.id,arcPath:R,progress:0,startTime:m,duration:Q,type:"produce",onComplete:y}),this.animations=[...this.consumptionAnimations,...this.productionAnimations],this.animationFrameId||(this.allConsumptionsComplete=!1,this.animationFrameId=requestAnimationFrame(this.animate))}calculateArcPath(s,c,f,d){const y=nc(s,{x:c.x,y:c.y}),m=nc(c,{x:s.x,y:s.y}),E=18;let v=0;const j=d.filter(V=>{const M=[V.incomingId,V.outgoingId].sort().join("-"),q=[f.incomingId,f.outgoingId].sort().join("-");return M===q});if(j.length>1){j.sort((M,q)=>M.id.localeCompare(q.id));const V=j.findIndex(M=>M.id===f.id);if(V!==-1){v=(-(j.length-1)/2+V)*E;const W=[f.incomingId,f.outgoingId].sort()[0];f.incomingId!==W&&(v*=-1)}}const U=m.x-y.x,C=m.y-y.y,k=Math.sqrt(U*U+C*C),R=k>0?U/k:0,S=-(k>0?C/k:0),D=R;v!==0&&k>0&&(y.x+=S*v,y.y+=D*v,m.x+=S*v,m.y+=D*v);const $=v!==0?(y.x+m.x)/2+S*v*.4:null,Z=v!==0?(y.y+m.y)/2+D*v*.4:null;return $!==null&&Z!==null?`M ${y.x},${y.y} Q ${$},${Z} ${m.x},${m.y}`:`M ${y.x},${y.y} L ${m.x},${m.y}`}animate(s){let c=!1;if(!this.allConsumptionsComplete){let f=!0;if(this.consumptionAnimations=this.consumptionAnimations.filter(d=>s<d.startTime||(d.progress=Math.min((s-d.startTime)/d.duration,1),d.progress<1)?(f=!1,c=!0,!0):!1),f&&!this.allConsumptionsComplete){this.allConsumptionsComplete=!0;const d=s+ii.TRANSITION_DELAY;this.productionAnimations.forEach(y=>y.startTime=d)}}if(this.allConsumptionsComplete&&(this.productionAnimations=this.productionAnimations.filter(f=>s<f.startTime||(f.progress=Math.min((s-f.startTime)/f.duration,1),f.progress>=.85&&f.onComplete&&(f.onComplete(),f.onComplete=void 0),f.progress<1)?(c=!0,!0):!1)),this.animations=[...this.consumptionAnimations,...this.productionAnimations],!c){this.animationFrameId=null,this.consumptionAnimations=[],this.productionAnimations=[],this.allConsumptionsComplete=!1;return}this.animationFrameId=requestAnimationFrame(this.animate)}getAnimationState(){return this.animations}clear(){this.animations=[],this.consumptionAnimations=[],this.productionAnimations=[],this.allConsumptionsComplete=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}completeCurrentAnimations(){this.hasActiveAnimations()&&(this.consumptionAnimations.forEach(s=>{s.progress=1}),this.allConsumptionsComplete=!0,this.productionAnimations.forEach(s=>{s.progress=1,s.onComplete&&(s.onComplete(),s.onComplete=void 0)}),this.animations=[],this.consumptionAnimations=[],this.productionAnimations=[],this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null))}startBidirectionalAnimation(s,c,f,d,y){const m=performance.now(),E=800*this.speedMultiplier,v=f.find(j=>(j.incomingId===s.id&&j.outgoingId===c.id||j.outgoingId===s.id&&j.incomingId===c.id)&&j.type==="BIDIRECTIONAL");if(v){const j=this.calculateArcPath(s,c,v,f),U=this.calculateArcPath(c,s,v,f);this.consumptionAnimations.push({sourceId:s.id,targetId:c.id,arcPath:j,progress:0,startTime:m,duration:E,type:"consume"}),this.productionAnimations.push({sourceId:c.id,targetId:s.id,arcPath:U,progress:0,startTime:m+E+50,duration:E,type:"produce",onComplete:y}),this.animations=[...this.consumptionAnimations,...this.productionAnimations],this.animationFrameId||(this.allConsumptionsComplete=!1,this.animationFrameId=requestAnimationFrame(this.animate)),setTimeout(d,E)}}};mn(ii,"TRANSITION_DELAY",50);let ls=ii;const Hf=({activePageId:l,setPages:s,saveToHistory:c,setProjectHasUnsavedChanges:f,setSelectedTool:d,arcType:y,selectedTool:m,activePageData:E,dragStartPositionsRef:v})=>{const j=g.useCallback((h,x,O,F)=>{const z=Math.round(h/Ze)*Ze,I=Math.round(x/Ze)*Ze,H=O.find(Y=>Y.x===z&&Y.y===I);if(H)return H;const w=F.find(Y=>Y.x===z&&Y.y===I);return w||null},[]),U=g.useCallback((h,x,O,F,z)=>{if(h===x)return!1;const I=F.find(A=>A.id===h)||z.find(A=>A.id===h),H=F.find(A=>A.id===x)||z.find(A=>A.id===x);if(!I||!H)return console.error("Could not find source or target element for arc validation."),!1;const w="radius"in I,Y="width"in I,b="radius"in H,_="width"in H;return O==="INHIBITOR"?w&&_:w&&_||Y&&b},[]),C=g.useCallback((h,x)=>{if(!l||!E)return;const O=x==null?void 0:x.shiftKey;s(F=>{const z=F[l];if(!z)return F;let I;const H=z.selectedElements;return h===""?I=[]:O?H.includes(h)?I=H.filter(w=>w!==h):I=[...H,h]:H.length===1&&H[0]===h?I=H:I=[h],{...F,[l]:{...z,selectedElements:I}}}),!O&&h!==""&&d("NONE")},[l,E,s,d]),k=g.useCallback(()=>{!l||!E||s(h=>{const x=h[l];return!x||x.selectedElements.length===0?h:{...h,[l]:{...x,selectedElements:[]}}})},[l,E,s]),R=g.useCallback(h=>{!l||!E||s(x=>{const O=x[l];return O?{...x,[l]:{...O,selectedElements:h}}:x})},[l,E,s]),Q=g.useCallback((h,x)=>{if(m==="NONE"){k();return}if(!(!l||!E))if(m==="PLACE"){const O={name:"",id:`place_${Date.now()}_${l}`,tokens:0,x:h,y:x,radius:46,bounded:!1,capacity:null};E&&c(E),s(F=>{const z=F[l];return z?{...F,[l]:{...z,places:[...z.places,O]}}:F}),d("NONE"),f(!0)}else if(m==="TRANSITION"){const O={name:"",id:`trans_${Date.now()}_${l}`,enabled:!1,arcIds:[],x:h,y:x,width:120,height:54};E&&c(E),s(F=>{const z=F[l];return z?{...F,[l]:{...z,transitions:[...z.transitions,O]}}:F}),d("NONE"),f(!0)}else m==="ARC"&&(S(h,x),d("NONE"))},[m,l,E,s,c,d,f,k]),S=g.useCallback((h,x)=>{if(!l||!E)return;const O=j(h,x,E.places,E.transitions);if(!O){k();return}const F=E.selectedElements;if(F.length===0)s(z=>{const I=z[l];return I?{...z,[l]:{...I,selectedElements:[O.id]}}:z});else{const z=F[0],I=O.id;U(z,I,y,E.places,E.transitions)?(E&&c(E),s(H=>{const w=H[l];if(!w)return H;const Y=`arc_${Date.now()}_${l}`,b={id:Y,type:y,incomingId:z,outgoingId:I},_=[...w.arcs,b],A=w.transitions.map(J=>{const G=w.transitions.some(T=>T.id===J.id);return(J.id===z||J.id===I)&&G&&!J.arcIds.includes(Y)?{...J,arcIds:[...J.arcIds,Y]}:J});return{...H,[l]:{...w,transitions:A,arcs:_,selectedElements:[]}}}),f(!0)):(console.warn(`Invalid arc from ${z} to ${I} (${y}).`),k())}},[l,E,j,U,y,s,c,f,k]),D=g.useCallback(h=>{if(!l||!E)return;const x=E.selectedElements;if(x.length===0)s(O=>{const F=O[l];return F?{...O,[l]:{...F,selectedElements:[h]}}:O});else{const O=x[0],F=h;U(O,F,y,E.places,E.transitions)?(E&&c(E),s(z=>{const I=z[l];if(!I)return z;const H=`arc_${Date.now()}_${l}`,w={id:H,type:y,incomingId:O,outgoingId:F},Y=[...I.arcs,w],b=I.transitions.map(_=>{const A=I.transitions.some(J=>J.id===_.id);return(_.id===O||_.id===F)&&A&&!_.arcIds.includes(H)?{..._,arcIds:[..._.arcIds,H]}:_});return{...z,[l]:{...I,transitions:b,arcs:Y,selectedElements:[]}}}),f(!0)):(console.warn("Invalid arc connection"),k())}},[l,E,U,y,s,c,f,k]),$=g.useCallback((h,x)=>{!l||!E||(s(O=>{const F=O[l];if(!F)return O;const z=F.places.map(I=>I.id===h?{...I,tokens:x}:I);return z===F.places?O:{...O,[l]:{...F,places:z}}}),f(!0))},[l,E,s,f]),Z=g.useCallback((h,x)=>{!l||!E||(s(O=>{const F=O[l];if(!F)return O;let z=!1;const I=F.places.map(w=>w.id===h?(z=!0,{...w,name:x}):w),H=F.transitions.map(w=>w.id===h?(z=!0,{...w,name:x}):w);return z?{...O,[l]:{...F,places:I,transitions:H}}:O}),f(!0))},[l,E,s,f]),V=g.useCallback((h,x)=>{!l||!E||(s(O=>{const F=O[l];if(!F)return O;const z=F.places.map(I=>I.id===h?{...I,capacity:x}:I);return z===F.places?O:{...O,[l]:{...F,places:z}}}),f(!0))},[l,E,s,f]),M=g.useCallback((h,x,O)=>{l&&(O==="start"&&E&&c(E),s(F=>{if(!F[l])return F;const z=F[l],I=z.places.map(H=>H.id===h?{...H,radius:x}:H);return JSON.stringify(z.places)===JSON.stringify(I)?F:(O==="end"&&f(!0),{...F,[l]:{...z,places:I}})}))},[l,E,c,s,f]),q=g.useCallback((h,x,O,F)=>{l&&(F==="start"&&E&&c(E),s(z=>{if(!z[l])return z;const I=z[l],H=I.transitions.map(w=>w.id===h?{...w,width:x,height:O}:w);return JSON.stringify(I.transitions)===JSON.stringify(H)?z:(F==="end"&&f(!0),{...z,[l]:{...I,transitions:H}})}))},[l,E,c,s,f]),W=g.useCallback((h,x,O,F="end")=>{if(!l||!E)return;if(F==="start"){c(E);const{places:w,transitions:Y,selectedElements:b}=E;v.current.clear();const _=[...w,...Y];if(b.forEach(A=>{const J=_.find(G=>G.id===A);J&&v.current.set(A,{x:J.x,y:J.y})}),!b.includes(h)){const A=_.find(J=>J.id===h);A&&v.current.set(h,{x:A.x,y:A.y})}return}const z=v.current.get(h);if(!z){F==="end"&&v.current.clear(),console.warn("Drag update/end called without valid start position for element:",h);return}const I=x-z.x,H=O-z.y;(F==="dragging"||F==="end")&&s(w=>{const Y=w[l];if(!Y)return w;const b=Y.selectedElements,_=b.length>1&&b.includes(h),A=Y.places.map(K=>{const me=v.current.get(K.id);return(K.id===h||_&&b.includes(K.id))&&me?{...K,x:me.x+I,y:me.y+H}:K}),J=Y.transitions.map(K=>{const me=v.current.get(K.id);return(K.id===h||_&&b.includes(K.id))&&me?{...K,x:me.x+I,y:me.y+H}:K}),G=JSON.stringify(Y.places)!==JSON.stringify(A),T=JSON.stringify(Y.transitions)!==JSON.stringify(J);return!G&&!T?w:{...w,[l]:{...Y,places:A,transitions:J}}}),F==="end"&&v.current.clear()},[l,E,c,v,s]);return{findClickedElement:j,isValidArcConnection:U,handleSelectElement:C,clearActivePageSelection:k,handleMultiSelectElement:R,handleCanvasClick:Q,handleArcCreation:S,handleArcPortClick:D,handleTokenUpdate:$,handleNameUpdate:Z,handleUpdatePlaceCapacity:V,updatePlaceSize:M,updateTransitionSize:q,updateElementPosition:W}},Qf=({activePageId:l,setPages:s,setProjectHasUnsavedChanges:c,setCurrentFiredTransitions:f,isTyping:d,handleCopy:y,handlePaste:m,setSelectedTool:E,clearActivePageSelection:v,activePageData:j})=>{const U=g.useCallback(k=>{if(!l)return;const{places:R,transitions:Q,arcs:S,title:D}=k;s($=>{const Z=$[l];if(!Z)return $;const V=Z.history||{places:[],transitions:[],arcs:[],title:[]},M=JSON.parse(JSON.stringify(R)),q=JSON.parse(JSON.stringify(Q)),W=JSON.parse(JSON.stringify(S)),h=D,x=[...V.places,M].slice(-50),O=[...V.transitions,q].slice(-50),F=[...V.arcs,W].slice(-50),z=[...V.title,h].slice(-50);return console.log("Saving to history:",{placesCount:R.length,transitionsCount:Q.length,arcsCount:S.length,historyLength:V.places.length,newHistoryLength:x.length,currentHistoryPlaces:V.places.length,currentHistoryTransitions:V.transitions.length,currentHistoryArcs:V.arcs.length,currentHistoryTitle:V.title.length}),{...$,[l]:{...Z,history:{places:x,transitions:O,arcs:F,title:z}}}})},[l,s]),C=g.useCallback(()=>{if(!l||!j)return;const k=j.history||{places:[],transitions:[],arcs:[],title:[]};if(k.places.length===0)return;const R=k.places[k.places.length-1],Q=k.transitions[k.transitions.length-1],S=k.arcs[k.arcs.length-1],D=k.title[k.title.length-1],$=k.places.slice(0,-1),Z=k.transitions.slice(0,-1),V=k.arcs.slice(0,-1),M=k.title.slice(0,-1);console.log("Undoing:",{currentPlacesCount:j.places.length,currentTransitionsCount:j.transitions.length,currentArcsCount:j.arcs.length,historyLength:k.places.length,placesToRestoreCount:R.length,transitionsToRestoreCount:Q.length,arcsToRestoreCount:S.length}),s(q=>({...q,[l]:{...q[l],title:D??q[l].title,places:R,transitions:Q,arcs:S,history:{places:$,transitions:Z,arcs:V,title:M},selectedElements:[]}})),f([]),c(!0)},[l,j,s,f,c]);return g.useEffect(()=>{function k(R){if(d)return;const Q=R.metaKey||R.ctrlKey;if(Q&&R.key==="c"){R.preventDefault(),y();return}if(Q&&R.key==="v"){R.preventDefault(),m();return}if(Q&&R.key==="z"){R.preventDefault(),C();return}if(R.key==="Escape"){E("NONE"),v();return}const S=()=>{!l||!j||j.selectedElements.length===0||(s(D=>{const $=D[l];if(!$)return D;const{places:Z,transitions:V,arcs:M,selectedElements:q}=$;U($);const W=new Set(q),h=Z.filter(z=>!W.has(z.id)),x=V.filter(z=>!W.has(z.id)),O=M.filter(z=>{const I=W.has(z.incomingId),H=W.has(z.outgoingId);return!I&&!H}),F=x.map(z=>({...z,arcIds:z.arcIds.filter(I=>O.some(H=>H.id===I))}));return{...D,[l]:{...$,places:h,transitions:F,arcs:O,selectedElements:[]}}}),c(!0))};if(R.key==="Delete"||R.key==="Backspace"){R.preventDefault(),S();return}}return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[d,y,m,C,E,v,l,j,s,U,c]),{saveToHistory:U,handleUndo:C}},Jf=({pages:l,setPages:s,pageOrder:c,setPageOrder:f,activePageId:d,setActivePageId:y,setProjectHasUnsavedChanges:m,setCurrentFiredTransitions:E,saveToHistory:v,defaultValidatorConfigs:j})=>{const U=g.useCallback(()=>{const W=window.location.origin+window.location.pathname,h=window.open(W,"_blank");h&&h.localStorage.removeItem("patsAppState_v1")},[]),C=g.useCallback(W=>{!d||!l[d]||(s(h=>{const x=h[d];let O=x.conflictResolutionMode,F=x.conflictingTransitions;return!W&&x.conflictResolutionMode&&(O=!1,F=[]),{...h,[d]:{...x,deterministicMode:W,conflictResolutionMode:O,conflictingTransitions:F}}}),m(!0))},[d,l,s,m]),k=g.useCallback((W,h)=>{s(x=>{if(!x[W])return console.warn(`Attempted to update validator configs for non-existent page: ${W}`),x;const O=x[W],F=O.validatorConfigs||{...j},z={...F,...h};return JSON.stringify(F)===JSON.stringify(z)?x:{...x,[W]:{...O,validatorConfigs:z}}}),m(!0)},[s,j,m]),R=g.useCallback(W=>{d&&k(d,W)},[d,k]),Q=g.useCallback(()=>{const W=`page_${Date.now()}`,h=c.length,x={id:W,title:`Page ${h+1}`,places:[],transitions:[],arcs:[],deterministicMode:!1,conflictResolutionMode:!1,conflictingTransitions:[],selectedElements:[],history:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:1,panOffset:{x:-750,y:-421.875},validatorConfigs:{...j}};s(O=>({...O,[W]:x})),f(O=>[...O,W]),y(W),m(!0)},[c.length,s,f,y,m,j]),S=g.useCallback(W=>{s(h=>({...h,[W.id]:W})),f(h=>[...h,W.id]),y(W.id),m(!0)},[s,f,y,m]),D=g.useCallback((W,h)=>{!W||!h.trim()||!l[W]||l[W].title===h.trim()||(s(x=>{const O=x[W];return!O||O.title===h.trim()?x:(v(O),{...x,[W]:{...O,title:h.trim()}})}),m(!0))},[l,s,v,m]),$=g.useCallback(W=>{const h=c;if(h.length<=1){console.warn("Cannot delete the last page.");return}let x=null;const O=h.indexOf(W);d===W?O>0?x=h[O-1]:x=h[1]:x=d;const F={...l};delete F[W],s(F),f(z=>z.filter(I=>I!==W)),y(x),E([]),m(!0)},[c,d,l,s,f,y,E,m]),Z=g.useCallback(W=>{JSON.stringify(c)!==JSON.stringify(W)&&(f(W),m(!0))},[c,f,m]),V=g.useCallback(W=>{!d||!l[d]||s(h=>{var O,F;if(!h[d])return h;const x=h[d];return x.zoomLevel===W.zoomLevel&&((O=x.panOffset)==null?void 0:O.x)===W.panOffset.x&&((F=x.panOffset)==null?void 0:F.y)===W.panOffset.y?h:{...h,[d]:{...x,zoomLevel:W.zoomLevel,panOffset:W.panOffset}}})},[d,l,s]),M=g.useCallback(W=>{d&&l[d]&&s(h=>{if(!h[d])return h;const x=h[d];return x.zoomLevel===W?h:{...h,[d]:{...x,zoomLevel:W}}})},[d,l,s]),q=g.useCallback(()=>{if(!d)return;const W=1,h={x:-750,y:-421.875};s(x=>{var F,z;if(!x[d])return x;const O=x[d];return O.zoomLevel===W&&((F=O.panOffset)==null?void 0:F.x)===h.x&&((z=O.panOffset)==null?void 0:z.y)===h.y?x:{...x,[d]:{...O,zoomLevel:W,panOffset:h}}})},[d,s]);return{handleNewProject:U,handleSetDeterministicMode:C,handleUpdateValidatorConfigs:k,onValidatorConfigsChangeCallback:R,handleCreatePage:Q,handleCreatePageWithData:S,handleRenamePage:D,handleDeletePage:$,handleReorderPages:Z,handleViewChange:V,handleZoomLevelChange:M,handleCenterView:q}},ns=()=>{console.log("Hostname:",window.location.hostname);const l=window.location.hostname==="localhost"?"http://localhost:8080":"";return console.log("Chosen baseUrl:",l),l},rc={PROCESS:`${ns()}/api/process`,RESOLVE:`${ns()}/api/process/resolve`,VALIDATE:`${ns()}/api/validate`},Gf=()=>{const l=g.useCallback(async(c,f)=>{const d=`${rc.PROCESS}/page/${c}/process`,y=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!y.ok){const m=await y.text();throw console.error("Simulation API error:",y.status,m),new Error(`Simulation failed: ${y.status} ${m}`)}return await y.json()},[]),s=g.useCallback(async(c,f,d)=>{const y=`${rc.RESOLVE}/page/${c}/resolve`,m={...f,selectedTransitionId:d},E=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!E.ok){const v=await E.text();throw console.error("Conflict resolution API error:",E.status,v),new Error(`Conflict resolution failed: ${E.status} ${v}`)}return await E.json()},[]);return{simulatePetriNet:l,resolveConflict:s}},Kf=l=>{const s=g.useCallback((f,d,y,m)=>{const E=d.filter(k=>k.outgoingId===f.id&&k.type!=="INHIBITOR"),v=d.filter(k=>k.incomingId===f.id),j=d.filter(k=>(k.incomingId===f.id||k.outgoingId===f.id)&&k.type==="BIDIRECTIONAL");E.forEach(k=>{const R=y.find(Q=>Q.id===k.incomingId);R&&l.startAnimation(R,f,f,d,()=>{})});const U=v.length;let C=0;v.forEach(k=>{const R=y.find(Q=>Q.id===k.outgoingId);R&&l.startAnimation(f,R,f,d,()=>{C++,C===U&&m&&m()})}),j.forEach(k=>{const R=y.find(Q=>Q.id===k.incomingId||Q.id===k.outgoingId);R&&l.startBidirectionalAnimation(R,f,d,()=>{},()=>{m&&m()})}),U===0&&j.length===0&&m&&m()},[l]),c=g.useCallback((f,d,y,m,E)=>{f.forEach(v=>{const j=d.transitions.find(R=>R.id===v.id);if(!j)return;const U=d.arcs.filter(R=>R.outgoingId===v.id&&R.type==="REGULAR"),C=d.arcs.filter(R=>R.incomingId===v.id&&R.type==="REGULAR"),k=d.arcs.filter(R=>(R.incomingId===v.id||R.outgoingId===v.id)&&R.type==="BIDIRECTIONAL");U.forEach(R=>{const Q=d.places.find(S=>S.id===R.incomingId);Q&&l.startAnimation(Q,j,j,d.arcs,()=>{})}),C.forEach(R=>{var S;const Q=d.places.find(D=>D.id===R.outgoingId);if(Q){const D=((S=y.places.find($=>$.id===Q.id))==null?void 0:S.tokens)??Q.tokens;l.startAnimation(j,Q,j,d.arcs,()=>{m($=>{const Z=$[E];if(!Z)return $;const V=Z.places.map(M=>M.id===Q.id?{...M,tokens:D}:M);return{...$,[E]:{...Z,places:V}}})})}}),k.forEach(R=>{var S;const Q=d.places.find(D=>D.id===R.incomingId||D.id===R.outgoingId);if(Q){const D=((S=y.places.find($=>$.id===Q.id))==null?void 0:S.tokens)??Q.tokens;l.startBidirectionalAnimation(Q,j,d.arcs,()=>{},()=>{m($=>{const Z=$[E];if(!Z)return $;const V=Z.places.map(M=>M.id===Q.id?{...M,tokens:D}:M);return{...$,[E]:{...Z,places:V}}})})}})})},[l]);return{startTransitionAnimations:s,startFiredTransitionAnimations:c}},Zf=()=>{const l=g.useCallback((c,f)=>{if(!f)return{hasConflicts:!1,conflictingTransitions:[]};const d=c.filter(y=>y.enabled);return d.length>1?{hasConflicts:!0,conflictingTransitions:d.map(y=>y.id)}:{hasConflicts:!1,conflictingTransitions:[]}},[]),s=g.useCallback((c,f)=>{var y;if(!f)return{hasConflicts:!1,conflictingTransitions:[]};const d=((y=c.transitions)==null?void 0:y.filter(m=>m.enabled).map(m=>m.id))||[];return d.length>1?{hasConflicts:!0,conflictingTransitions:d}:{hasConflicts:!1,conflictingTransitions:[]}},[]);return{detectConflicts:l,checkForNewConflicts:s}},qf=(l,s)=>{const c=g.useCallback((y,m,E,v=new Set)=>{l(j=>{var Q;const U=j[y];if(!U)return j;const C=((Q=m.transitions)==null?void 0:Q.filter(S=>S.enabled).map(S=>S.id))||[],k=U.places.map(S=>{const D=m.places.find(V=>V.id===S.id),$=U.arcs.some(V=>V.incomingId===S.id&&V.type==="REGULAR"&&C.some(M=>M===V.outgoingId)),Z=v.has(S.id);return D&&$?{...S,tokens:D.tokens}:Z?{...S,tokens:Math.max(0,S.tokens-1)}:S}),R=U.transitions.map(S=>{var $;const D=($=m.transitions)==null?void 0:$.find(Z=>Z.id===S.id);return D?{...S,enabled:D.enabled}:{...S,enabled:!1}});return!E.hasConflicts&&C.length>0?s(C):s([]),{...j,[y]:{...U,places:k,transitions:R,conflictResolutionMode:E.hasConflicts,conflictingTransitions:E.conflictingTransitions}}})},[l,s]),f=g.useCallback((y,m,E,v)=>{l(j=>{const U=j[y];if(!U)return j;const C=U.places.map(R=>{const Q=m.places.find($=>$.id===R.id),S=U.arcs.some($=>$.incomingId===R.id&&$.type==="REGULAR"&&$.outgoingId===E),D=U.arcs.some($=>($.incomingId===R.id||$.outgoingId===R.id)&&$.type==="BIDIRECTIONAL"&&($.incomingId===E||$.outgoingId===E));return Q&&S?{...R,tokens:Q.tokens}:D?{...R,tokens:Math.max(0,R.tokens-1)}:R}),k=U.transitions.map(R=>{var S;const Q=(S=m.transitions)==null?void 0:S.find(D=>D.id===R.id);return Q?{...R,enabled:Q.enabled}:{...R,enabled:!1}});return{...j,[y]:{...U,places:C,transitions:k,conflictResolutionMode:v.hasConflicts,conflictingTransitions:v.conflictingTransitions}}})},[l]),d=g.useCallback((y,m)=>{l(E=>({...E,[y]:{id:m.id,title:m.title,places:[],transitions:[],arcs:[],deterministicMode:!1,conflictResolutionMode:!1,conflictingTransitions:[],selectedElements:[],history:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:1,panOffset:{x:0,y:0}}})),s([])},[l,s]);return{updatePageAfterSimulation:c,updatePageAfterConflictResolution:f,resetPage:d}},bf=({activePageId:l,activePageData:s,setPages:c,setCurrentFiredTransitions:f,setProjectHasUnsavedChanges:d,setAnimationMessage:y,tokenAnimator:m,handleUndo:E})=>{const v=Gf(),j=Kf(m),U=Zf(),C=qf(c,f),k=g.useCallback(async()=>{var Z;if(!l||!s){console.log("No active page to simulate.");return}if(m.hasActiveAnimations()){console.log("Animation in progress. Please wait for it to complete."),y("Animation in progress. Please wait."),setTimeout(()=>y(null),2e3);return}y(null),f([]),await new Promise(V=>setTimeout(V,10));const $={places:s.places.map(V=>({id:V.id,tokens:V.tokens,name:V.name,x:V.x,y:V.y,radius:V.radius,bounded:V.bounded,capacity:V.capacity})),transitions:s.transitions.map(V=>({id:V.id,enabled:V.enabled,arcIds:V.arcIds,name:V.name,x:V.x,y:V.y,width:V.width,height:V.height})),arcs:s.arcs.map(V=>({id:V.id,type:V.type,incomingId:V.incomingId,outgoingId:V.outgoingId})),deterministicMode:s.deterministicMode,title:s.title};try{const V=await v.simulatePetriNet(l,$),M=((Z=V.transitions)==null?void 0:Z.filter(h=>h.enabled).map(h=>({...h,name:h.name||"",x:h.x||0,y:h.y||0,width:h.width||120,height:h.height||54})))||[],q=U.checkForNewConflicts(V,s.deterministicMode),W=new Set;q.hasConflicts?m.clear():j.startFiredTransitionAnimations(M,s,V,c,l),C.updatePageAfterSimulation(l,V,q,W),d(!0)}catch(V){console.error("Simulation error:",V)}},[l,s,m,y,f,v,j,U,C,d]),R=g.useCallback(async $=>{if(!l||!s){console.log("No active page for conflict resolution.");return}if(m.hasActiveAnimations()){console.log("Animation in progress. Please wait for it to complete."),y("Animation in progress. Please wait."),setTimeout(()=>y(null),2e3);return}y(null),f([]),await new Promise(V=>setTimeout(V,10)),f([$]);const Z={places:s.places.map(V=>({id:V.id,tokens:V.tokens,name:V.name,x:V.x,y:V.y,radius:V.radius,bounded:V.bounded,capacity:V.capacity})),transitions:s.transitions.map(V=>({id:V.id,enabled:V.enabled,arcIds:V.arcIds,name:V.name,x:V.x,y:V.y,width:V.width,height:V.height})),arcs:s.arcs.map(V=>({id:V.id,type:V.type,incomingId:V.incomingId,outgoingId:V.outgoingId})),deterministicMode:s.deterministicMode,title:s.title};try{const V=await v.resolveConflict(l,Z,$),M=s.transitions.find(W=>W.id===$);M&&j.startTransitionAnimations(M,s.arcs,s.places,()=>{U.checkForNewConflicts(V,s.deterministicMode).hasConflicts&&f([])});const q=U.checkForNewConflicts(V,s.deterministicMode);C.updatePageAfterConflictResolution(l,V,$,q),d(!0)}catch(V){console.error("Error resolving conflict:",V),l&&s&&c(M=>({...M,[l]:{...M[l],transitions:s.transitions,conflictResolutionMode:!1}})),f([])}},[l,s,m,y,f,v,j,U,C,d,c]),Q=g.useCallback(()=>{m.completeCurrentAnimations(),y(null)},[m,y]),S=g.useCallback(async()=>{if(!l||!s){console.log("No active page to reset.");return}const $=s;($.places.length>0||$.transitions.length>0||$.arcs.length>0)&&E();const Z=pf($.id,$.title);C.resetPage(l,Z),d(!0)},[l,s,E,C,d]),D=g.useCallback($=>{console.log("Validation result received:",$)},[]);return{handleSimulate:k,continueSimulation:R,handleCompleteAnimations:Q,handleReset:S,handleValidationResult:D}},is=(l,s)=>{const c=JSON.stringify(l,null,2),f=new Blob([c],{type:"application/json"}),d=URL.createObjectURL(f),y=document.createElement("a");y.href=d,y.download=s,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(d)},eh=l=>new Promise((s,c)=>{const f=new FileReader;f.onload=d=>{var y;try{const m=(y=d.target)==null?void 0:y.result,E=JSON.parse(m);s(E)}catch{c(new Error("Invalid JSON file"))}},f.onerror=()=>c(new Error("Failed to read file")),f.readAsText(l)}),th=({projectTitle:l,pages:s,pageOrder:c,activePageId:f,setProjectTitle:d,setPages:y,setPageOrder:m,setActivePageId:E,setCurrentFiredTransitions:v,setProjectHasUnsavedChanges:j,setProjectFileHandle:U,setOriginalFileNameFromInput:C,clearClipboard:k,activePageData:R,handleCreatePageWithData:Q})=>{const S=g.useCallback(async h=>{const x=h||`${l.replace(/\s+/g,"_")}.petri`,O={projectTitle:l,pages:s,pageOrder:c,activePageId:f,version:"1.0.0"};if("showSaveFilePicker"in window)try{const F=await window.showSaveFilePicker({suggestedName:x,types:[{description:"Petri Net Project",accept:{"application/json":[".petri"]}}]});U(F);const z=await F.createWritable();if(await z.write(JSON.stringify(O,null,2)),await z.close(),F.name&&F.name!==x&&F.name.endsWith(".petri")){const I=F.name.replace(/\.petri$/,"");I!==l&&d(I)}console.log("Project saved successfully as new file with File System Access API"),j(!1),C==null||C(null)}catch(F){F.name!=="AbortError"&&(console.error("Error saving file with FSA API:",F),alert(`Failed to save project file: ${F.message}`))}else console.warn("FSA API not supported, falling back to download."),U(null),is(O,x),j(!1),C==null||C(null)},[l,s,c,f,U,d,j,C]),D=g.useCallback(async()=>{await S()},[S]),$=g.useCallback(h=>{if(!R){alert("No active page to export.");return}const x=h||R.title.replace(/[^a-z0-9_\-\s]/gi,"_").replace(/\s+/g,"-")+".page.json"||"page.page.json";is(R,x)},[R]),Z=g.useCallback(async h=>{var x,O;if(h&&h.target&&h.target.files&&h.target.files[0]){U(null);const F=h.target.files[0];try{const z=await F.text(),I=JSON.parse(z);if(!I||typeof I.projectTitle!="string"||!I.pages||!I.pageOrder)throw new Error("Invalid project file format.");d(I.projectTitle||F.name.replace(/\.[^/.]+$/,"")),y(I.pages||{}),m(I.pageOrder||[]),E(I.activePageId||(((x=I.pageOrder)==null?void 0:x[0])??null)),v([]),k(),j(!1),C==null||C(F.name)}catch(z){console.error("Error opening project from input:",z),alert(`Failed to open project file: ${z.message}`),U(null),C==null||C(null)}h.target&&(h.target.value="")}else if("showOpenFilePicker"in window)try{const[F]=await window.showOpenFilePicker({types:[{description:"Petri Net Projects",accept:{"application/json":[".petri",".pats",".json"]}}],excludeAcceptAllOption:!0,multiple:!1});U(F);const z=await F.getFile(),I=await z.text(),H=JSON.parse(I);if(!H||typeof H.projectTitle!="string"||!H.pages||!H.pageOrder)throw new Error("Invalid project file format.");d(H.projectTitle||z.name.replace(/\.[^/.]+$/,"")),y(H.pages||{}),m(H.pageOrder||[]),E(H.activePageId||(((O=H.pageOrder)==null?void 0:O[0])??null)),v([]),k(),j(!1),C==null||C(null)}catch(F){F.name!=="AbortError"&&(console.error("Error opening file with FSA API:",F),alert(`Failed to open project file: ${F.message}`)),U(null),C==null||C(null)}else console.error("handleOpenProject: FSA not available and no input event provided. This indicates an issue in the calling logic (e.g., MenuBar)."),alert("File open functionality is not available. Your browser might be outdated or not support this feature.")},[U,d,y,m,E,v,k,j,C]),V=g.useCallback(async h=>{const x=h.target.files;if(!x||x.length===0)return;let O=!1;for(let F=0;F<x.length;F++){const z=x[F];try{const I=await eh(z);if(!I||!I.id||!I.title){console.warn(`Skipping file ${z.name}: Invalid page file format.`);continue}let H=I.id,w=1;for(;s[H];)H=`${I.id}_imported_${w++}`;const Y={...I,id:H};Q(Y),O=!0}catch(I){console.error(`Error importing page ${z.name}:`,I),alert(`Failed to import page ${z.name}.`)}}h.target.value="",O&&j(!0)},[s,Q,j]),M=g.useCallback(h=>{var O,F,z;const x={id:`imported_${Date.now()}`,title:h.title||"Imported Page",places:((O=h.places)==null?void 0:O.map(I=>({id:I.id,tokens:I.tokens||0,name:I.name||"",x:I.x||0,y:I.y||0,radius:I.radius||46,bounded:I.bounded||!1,capacity:I.capacity||null})))||[],transitions:((F=h.transitions)==null?void 0:F.map(I=>({id:I.id,enabled:I.enabled||!1,arcIds:I.arcIds||[],name:I.name||"",x:I.x||0,y:I.y||0,width:I.width||120,height:I.height||54})))||[],arcs:((z=h.arcs)==null?void 0:z.map(I=>({id:I.id,type:I.type,incomingId:I.incomingId,outgoingId:I.outgoingId})))||[],deterministicMode:h.deterministicMode||!1,conflictResolutionMode:!1,conflictingTransitions:[],selectedElements:[],history:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:h.zoomLevel??1,panOffset:h.panOffset??{x:-750,y:-421.875}};Q(x)},[Q]),q=g.useCallback(()=>{if(!f||!R){console.log("No active page to snapshot.");return}y(h=>{const x=h[f];if(!x)return h;const O={places:JSON.parse(JSON.stringify(x.places)),transitions:JSON.parse(JSON.stringify(x.transitions)),arcs:JSON.parse(JSON.stringify(x.arcs)),timestamp:Date.now(),description:`Snapshot taken at ${new Date().toLocaleString()}`};return{...h,[f]:{...x,snapshot:O}}}),j(!0)},[f,R,y,j]),W=g.useCallback(()=>{if(!f||!R||!R.snapshot){console.log("No snapshot to restore.");return}y(h=>{const x=h[f];return!x||!x.snapshot?h:{...h,[f]:{...x,places:x.snapshot.places,transitions:x.snapshot.transitions,arcs:x.snapshot.arcs,snapshot:void 0}}}),j(!0)},[f,R,y,j]);return{handleSaveProject:D,handleSaveProjectAs:S,handleExportActivePage:$,handleOpenProject:Z,handleImportPages:V,handleLegacyImport:M,handleSaveSnapshot:q,handleRestoreSnapshot:W}},nh=({activePageId:l,activePageData:s,pages:c,setPages:f,setProjectHasUnsavedChanges:d,saveToHistory:y,pageOrder:m,setPageOrder:E})=>{const v=g.useCallback((M,q,W)=>{l&&(W==="start"&&s&&y(s),f(h=>{if(!h[l])return h;const x=h[l],O=x.places.map(F=>F.id===M?{...F,radius:q}:F);return JSON.stringify(x.places)===JSON.stringify(O)?h:(W==="end"&&d(!0),{...h,[l]:{...x,places:O}})}))},[l,s,f,d,y]),j=g.useCallback((M,q,W,h)=>{l&&(h==="start"&&s&&y(s),f(x=>{if(!x[l])return x;const O=x[l],F=O.transitions.map(z=>z.id===M?{...z,width:q,height:W}:z);return JSON.stringify(O.transitions)===JSON.stringify(F)?x:(h==="end"&&d(!0),{...x,[l]:{...O,transitions:F}})}))},[l,s,f,d,y]),U=g.useRef(new Map),C=g.useCallback((M,q,W,h="end")=>{if(!l||!s)return;if(h==="start"){y(s);const{places:z,transitions:I,selectedElements:H}=s;U.current.clear();const w=[...z,...I];if(H.forEach(Y=>{const b=w.find(_=>_.id===Y);b&&U.current.set(Y,{x:b.x,y:b.y})}),!H.includes(M)){const Y=w.find(b=>b.id===M);Y&&U.current.set(M,{x:Y.x,y:Y.y})}return}const x=U.current.get(M);if(!x){h==="end"&&U.current.clear(),console.warn("Drag update/end called without valid start position for element:",M);return}const O=q-x.x,F=W-x.y;(h==="dragging"||h==="end")&&f(z=>{const I=z[l];if(!I)return z;const H=I.selectedElements,w=H.length>1&&H.includes(M),Y=I.places.map(J=>{const G=U.current.get(J.id);return(J.id===M||w&&H.includes(J.id))&&G?{...J,x:G.x+O,y:G.y+F}:J}),b=I.transitions.map(J=>{const G=U.current.get(J.id);return(J.id===M||w&&H.includes(J.id))&&G?{...J,x:G.x+O,y:G.y+F}:J}),_=JSON.stringify(I.places)!==JSON.stringify(Y),A=JSON.stringify(I.transitions)!==JSON.stringify(b);return!_&&!A?z:{...z,[l]:{...I,places:Y,transitions:b}}}),h==="end"&&U.current.clear()},[l,s,f,y]),k=g.useCallback((M,q)=>{!l||!s||(f(W=>{const h=W[l];if(!h)return W;const x=h.places.map(O=>O.id===M?{...O,tokens:q}:O);return x===h.places?W:{...W,[l]:{...h,places:x}}}),d(!0))},[l,c,f,d]),R=g.useCallback((M,q)=>{!l||!s||(f(W=>{const h=W[l];if(!h)return W;let x=!1;const O=h.places.map(z=>z.id===M?(x=!0,{...z,name:q}):z),F=h.transitions.map(z=>z.id===M?(x=!0,{...z,name:q}):z);return x?{...W,[l]:{...h,places:O,transitions:F}}:W}),d(!0))},[l,c,f,d]),Q=g.useCallback((M,q)=>{!l||!s||(f(W=>{const h=W[l];if(!h)return W;let x=!1;const O=h.places.map(F=>{if(F.id===M){const z=q!==null;let I=q;z&&(I===null||I<0)&&(I=0);let H=F.tokens;if(z&&I!==null&&H>I&&(H=I),F.bounded!==z||F.capacity!==I||F.tokens!==H)return x=!0,{...F,bounded:z,capacity:I,tokens:H}}return F});return x?{...W,[l]:{...h,places:O}}:W}),d(!0))},[l,c,f,d]),S=g.useCallback(M=>{!l||!s||(f(q=>{const W=q[l];let h=W.conflictResolutionMode,x=W.conflictingTransitions;return!M&&W.conflictResolutionMode&&(h=!1,x=[]),{...q,[l]:{...W,deterministicMode:M,conflictResolutionMode:h,conflictingTransitions:x}}}),d(!0))},[l,c,f,d]),D=g.useCallback(M=>{!l||!s||f(q=>{var h,x;if(!q[l])return q;const W=q[l];return W.zoomLevel===M.zoomLevel&&((h=W.panOffset)==null?void 0:h.x)===M.panOffset.x&&((x=W.panOffset)==null?void 0:x.y)===M.panOffset.y?q:{...q,[l]:{...W,zoomLevel:M.zoomLevel,panOffset:M.panOffset}}})},[l,c,f]),$=g.useCallback(M=>{l&&s&&f(q=>{if(!q[l])return q;const W=q[l];return W.zoomLevel===M?q:{...q,[l]:{...W,zoomLevel:M}}})},[l,c,f]),Z=g.useCallback(()=>{if(!l)return;const M=1,q={x:-750,y:-421.875};f(W=>{var x,O;if(!W[l])return W;const h=W[l];return h.zoomLevel===M&&((x=h.panOffset)==null?void 0:x.x)===q.x&&((O=h.panOffset)==null?void 0:O.y)===q.y?W:{...W,[l]:{...h,zoomLevel:M,panOffset:q}}})},[l,f]),V=g.useCallback(M=>{JSON.stringify(m)!==JSON.stringify(M)&&(E(M),d(!0))},[m,E,d]);return{updatePlaceSize:v,updateTransitionSize:j,updateElementPosition:C,handleTokenUpdate:k,handleNameUpdate:R,handleUpdatePlaceCapacity:Q,handleSetDeterministicMode:S,handleViewChange:D,handleZoomLevelChange:$,handleCenterView:Z,handleReorderPages:V}},rs={inputConfigs:[],outputConfigs:[],validationResult:null,emptyInputFields:{},emptyOutputFields:{}};function rh(){const s=window.name==="new_project"?null:Pf(),[c,f]=g.useState((s==null?void 0:s.pages)||{}),[d,y]=g.useState((s==null?void 0:s.activePageId)||null),[m,E]=g.useState((s==null?void 0:s.pageOrder)||[]),[v,j]=g.useState((s==null?void 0:s.projectTitle)||"Untitled MyPetri Project"),[U,C]=g.useState((s==null?void 0:s.projectHasUnsavedChanges)||!1),[k,R]=g.useState(null),[Q,S]=g.useState([]),[D,$]=g.useState("NONE"),[Z,V]=g.useState("REGULAR"),[M,q]=g.useState(!1),[W,h]=g.useState(!0),[x,O]=g.useState("select"),[F,z]=g.useState(!1),[I,H]=g.useState(null),w=g.useRef(new Map),Y=g.useRef(null),b=g.useMemo(()=>new ls,[]);g.useEffect(()=>{if(Object.keys(c).length===0&&m.length===0&&!s){const de=`page_${Date.now()}`,Re={id:de,title:"Page 1",places:[],transitions:[],arcs:[],deterministicMode:!1,conflictResolutionMode:!1,conflictingTransitions:[],selectedElements:[],history:{places:[],transitions:[],arcs:[],title:[]},zoomLevel:.85,panOffset:{x:-880,y:-400},validatorConfigs:{...rs}};f({[de]:Re}),E([de]),y(de),C(!1),R(null)}},[s]),g.useEffect(()=>{Wf({pages:c,activePageId:d,pageOrder:m,projectTitle:v,projectHasUnsavedChanges:U})},[c,d,m,v,U]);const _=g.useMemo(()=>d?c[d]:null,[c,d]),A=g.useMemo(()=>_?{title:_.title,deterministicMode:_.deterministicMode,places:_.places.map(de=>({id:de.id,tokens:de.tokens,name:de.name,x:de.x,y:de.y,radius:de.radius,bounded:de.bounded,capacity:de.capacity})),transitions:_.transitions.map(de=>({id:de.id,enabled:de.enabled,arcIds:de.arcIds,name:de.name,x:de.x,y:de.y,width:de.width,height:de.height})),arcs:_.arcs.map(de=>({id:de.id,type:de.type,incomingId:de.incomingId,outgoingId:de.outgoingId}))}:null,[_]),J=g.useMemo(()=>Object.keys(c).length===0&&!v?null:{projectTitle:v,pages:c,pageOrder:m,activePageId:d,version:"1.0.0"},[v,c,m,d]),{saveToHistory:G,handleUndo:T}=Qf({activePageId:d,setPages:f,setProjectHasUnsavedChanges:C,setCurrentFiredTransitions:S,isTyping:M,handleCopy:()=>{},handlePaste:()=>{},setSelectedTool:$,clearActivePageSelection:()=>{},activePageData:_}),{handleSelectElement:K,clearActivePageSelection:me,handleMultiSelectElement:ge,handleCanvasClick:Se,handleArcPortClick:Ne}=Hf({activePageId:d,setPages:f,saveToHistory:G,setProjectHasUnsavedChanges:C,setSelectedTool:$,arcType:Z,selectedTool:D,activePageData:_,dragStartPositionsRef:w}),{handleNewProject:ee,onValidatorConfigsChangeCallback:ye,handleCreatePage:Ce,handleCreatePageWithData:Ae,handleRenamePage:Qe,handleDeletePage:st}=Jf({pages:c,setPages:f,pageOrder:m,setPageOrder:E,activePageId:d,setActivePageId:y,setProjectHasUnsavedChanges:C,setCurrentFiredTransitions:S,saveToHistory:G,defaultValidatorConfigs:rs}),{handleSimulate:Be,continueSimulation:oe,handleCompleteAnimations:ie,handleReset:ue,handleValidationResult:Ee}=bf({activePageId:d,activePageData:_,setPages:f,setCurrentFiredTransitions:S,setProjectHasUnsavedChanges:C,setAnimationMessage:H,tokenAnimator:b,handleUndo:T}),{clearClipboard:re}=Bf({places:(_==null?void 0:_.places)||[],transitions:(_==null?void 0:_.transitions)||[],arcs:(_==null?void 0:_.arcs)||[],selectedElements:(_==null?void 0:_.selectedElements)||[],setPlaces:de=>{d&&(f(Re=>{if(!Re[d])return Re;const ut=Re[d].places,at=typeof de=="function"?de(ut):de;return{...Re,[d]:{...Re[d],places:at}}}),C(!0))},setTransitions:de=>{d&&(f(Re=>{if(!Re[d])return Re;const ut=Re[d].transitions,at=typeof de=="function"?de(ut):de;return{...Re,[d]:{...Re[d],transitions:at}}}),C(!0))},setArcs:de=>{d&&(f(Re=>{if(!Re[d])return Re;const ut=Re[d].arcs,at=typeof de=="function"?de(ut):de;return{...Re,[d]:{...Re[d],arcs:at}}}),C(!0))},setSelectedElements:de=>{d&&f(Re=>{if(!Re[d])return Re;const ut=Re[d].selectedElements,at=typeof de=="function"?de(ut):de;return{...Re,[d]:{...Re[d],selectedElements:at}}})},saveToHistory:()=>{_&&(G(_),C(!0))}}),{handleSaveProject:ve,handleSaveProjectAs:$e,handleExportActivePage:Oe,handleOpenProject:Ft,handleImportPages:In,handleLegacyImport:pn,handleSaveSnapshot:yn,handleRestoreSnapshot:Qt}=th({projectTitle:v,pages:c,pageOrder:m,activePageId:d,setProjectTitle:j,setPages:f,setPageOrder:E,setActivePageId:y,setCurrentFiredTransitions:S,setProjectHasUnsavedChanges:C,setProjectFileHandle:R,clearClipboard:re,activePageData:_,handleCreatePageWithData:Ae}),{updatePlaceSize:lr,updateTransitionSize:_n,updateElementPosition:Xr,handleTokenUpdate:gn,handleNameUpdate:xn,handleUpdatePlaceCapacity:oi,handleSetDeterministicMode:Hr,handleViewChange:Qr,handleZoomLevelChange:si,handleCenterView:ir,handleReorderPages:or}=nh({activePageId:d,activePageData:_,pages:c,setPages:f,setProjectHasUnsavedChanges:C,saveToHistory:G,pageOrder:m,setPageOrder:E}),sr=de=>{q(de)};return g.useEffect(()=>{O(D==="ARC"?"arc":D==="PLACE"?"place":D==="TRANSITION"?"transition":"select")},[D]),a.jsxs("div",{className:"app",children:[a.jsx(Lf,{ref:Y,title:v,onTitleChange:de=>{de!==v&&(j(de),C(!0))}}),a.jsx(Af,{projectData:J,onNewProject:ee,onImport:pn,onOpenProject:Ft,onSaveProject:ve,onSaveProjectAs:$e,onImportPages:In,onExportActivePage:Oe,onExportProject:()=>{is({projectTitle:v,pages:c,pageOrder:m,activePageId:d,version:"1.0.0"},`${v.replace(/\s+/g,"_")}_project.pats`)},currentZoom:(_==null?void 0:_.zoomLevel)||1,onZoomChange:si,onCreatePage:Ce,projectFileHandle:k,projectHasUnsavedChanges:U,onRenameProjectTitle:de=>{de!==v&&(j(de),C(!0))},onSaveSnapshot:yn,onRestoreSnapshot:Qt,hasSnapshot:!!(_!=null&&_.snapshot),activePageTitle:(_==null?void 0:_.title)||"No Page"}),a.jsxs("div",{className:"main-content",children:[a.jsxs("div",{className:"left-sidebar",children:[a.jsx("div",{className:"toolbar-container",children:a.jsx(Mf,{selectedTool:D,setSelectedTool:de=>{de==="ARC"&&me(),$(de)},arcType:Z,setArcType:V,showCapacityEditorMode:F,onToggleCapacityEditorMode:z})}),a.jsxs("div",{className:"controls-section",children:[a.jsxs("div",{className:"control-item",children:[a.jsx("span",{className:"control-label",children:"Deterministic Mode"}),a.jsxs("label",{className:"switch-container",htmlFor:"deterministic-mode",children:[a.jsx("input",{type:"checkbox",id:"deterministic-mode",checked:(_==null?void 0:_.deterministicMode)??!1,onChange:de=>Hr(de.target.checked),style:{opacity:0,width:0,height:0}}),a.jsx("span",{className:"switch-slider round"})]})]}),a.jsxs("div",{className:"control-item",children:[a.jsx("span",{className:"control-label",children:"Show Capacity"}),a.jsxs("label",{className:"switch-container",htmlFor:"capacity-mode-toggle",children:[a.jsx("input",{type:"checkbox",id:"capacity-mode-toggle",checked:F,onChange:de=>z(de.target.checked),style:{opacity:0,width:0,height:0}}),a.jsx("span",{className:"switch-slider round"})]})]}),a.jsx("button",{onClick:Be,className:"next-state-button",title:"Advance the Petri net to the next state",children:"Next State"}),I&&a.jsxs("div",{className:"animation-message",children:[I,a.jsx("button",{onClick:ie,className:"animation-skip-button",children:"Skip"})]}),(_==null?void 0:_.conflictResolutionMode)&&a.jsx("div",{className:"conflict-resolution-message",children:"Select one transition to fire"})]}),a.jsx("div",{className:"sidebar-spacer"}),a.jsx("div",{className:"reset-section",children:a.jsx("button",{onClick:ue,className:"reset-canvas-button",title:"Clear all elements from the canvas",children:"Reset Canvas"})})]}),a.jsxs("div",{className:"center-area",children:[a.jsx("div",{className:"canvas-container-main",children:a.jsx(jf,{places:(_==null?void 0:_.places)||[],transitions:(_==null?void 0:_.transitions)||[],arcs:(_==null?void 0:_.arcs)||[],selectedElements:(_==null?void 0:_.selectedElements)||[],onCanvasClick:Se,onSelectElement:K,onMultiSelectElement:ge,onUpdatePlaceSize:lr,onUpdateTransitionSize:_n,onUpdateElementPosition:Xr,onArcPortClick:Ne,selectedTool:D,onSelectTool:$,arcType:Z,onUpdateToken:gn,onTypingChange:sr,onUpdateName:xn,conflictResolutionMode:(_==null?void 0:_.conflictResolutionMode)??!1,conflictingTransitions:(_==null?void 0:_.conflictingTransitions)||[],onConflictingTransitionSelect:oe,firedTransitions:Q,onUpdatePlaceCapacity:oi,showCapacityEditorMode:F,zoomLevel:(_==null?void 0:_.zoomLevel)??1,panOffset:(_==null?void 0:_.panOffset)??{x:0,y:0},onViewChange:Qr,onCenterView:ir,tokenAnimator:b})}),a.jsx(Vf,{pages:c,pageOrder:m,activePageId:d,onSelectPage:y,onCreatePage:Ce,onRenamePage:Qe,onDeletePage:st,onReorderPages:or,onCreatePageWithData:Ae})]}),a.jsxs("div",{className:"right-panel",children:[A&&_&&a.jsx(zf,{data:A,onValidationResult:Ee,selectedElements:(_==null?void 0:_.selectedElements)||[],autoScrollEnabled:W,onAutoScrollToggle:h,currentMode:x,width:"100%",height:"100%",activePageId:d,validatorConfigs:_.validatorConfigs||rs,onValidatorConfigsChange:ye}),!A&&a.jsx("div",{className:"no-active-page",children:"No active Petri net selected."})]})]})]})}af.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(rh,{})}));
